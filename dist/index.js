module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t={};this.getAttemptToRemove=function(){return t.attemptToRemove},this.setAttemptToRemove=function(e){t.attemptToRemove=e},this.setDraggedElement=function(e){t.draggedElement=e},this.getDraggedElement=function(){return t.draggedElement},this.registerPaletteElements=function(e){t.registeredPaletteElements=e},this.getRegisteredPaletteElements=function(){return t.registeredPaletteElements||[]},this.setDropPostion=function(e){t.dropPosition=e},this.getDropPostion=function(){return t.dropPosition},this.error=console.error,this.log=console.log};t.default=r},function(e,t){e.exports=require("react")},function(e,t,n){e.exports=n(18)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(14),i=(r=a)&&r.__esModule?r:{default:r};var l=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t={},n=["id","type","name","payload","dropzoneID","parentID"];t.tree=[{id:"root",fields:[]}];var r=function e(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.tree,a=o.find(function(e){return e.id===r});if(!a)for(var i=0;i<o.length;i++){var l=o[i];if(l.fields){var s=e(n,r,l.fields);if(s)return s}}return a},a=function(e,t,n){var o=r(t,n);return o?o.fields.find(function(t){return t.id===e}):null},l=function(e,t){var r={};return e?(Object.keys(e).forEach(function(o){"function"!=typeof e[o]&&(t||!t&&-1!==n.indexOf(o))&&(r[o]=e[o])}),r):null},s=function(){return l(a.apply(void 0,arguments))};this.updateState=function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=arguments[4];!function e(n,r,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.tree,i=a.find(function(e){return e.id===r}),l=!1;if(i){if(n===r)i.fields=o;else if(i.fields&&o.length){var s=[];i.fields.filter(function(e){return e.dropzoneID===n}).length!==o.length?i.fields=o.concat(i.fields.filter(function(e){return e.dropzoneID!==n})):(o.forEach(function(e){-1===i.fields.findIndex(function(t){return t.id===e.id})&&s.push(e)}),s.length||(i.fields=i.fields.map(function(e){return o.find(function(t){return t.id===e.id})||e}))),s.length&&(i.fields=i.fields.concat(s))}else n&&i.fields?i.fields=i.fields.filter(function(e){return e.dropzoneID!==n}):i.fields=o;l=!0}else for(var u=0;u<a.length;u++){var f=a[u].fields,c=!1;if(f&&(c=e(n,r,o,f)),c)break}return l}(e,n,r),o(t.tree),i.default.notifyStateChange(),a&&i.default.notifyElementRemove({dropzoneID:e,parentID:n,dispatchElementRemove:a,trashed:!0})},this.getElementParent=r,this.getElement=s,this.removeElement=function(e,t,n,r){var o=a(e,t,n);return!!o&&(o.removeElement(e,r),i.default.notifyElementRemove({elementID:e,dropzoneID:t,parentID:n,trashed:!1}),!0)},this.updateElement=function(e,t,n,r,l){var u=a(e,t,n);return!!u&&(u.updateElement(o({},r,{id:e}),l),i.default.notifyElementUpdate(s(e,t,n)),!0)},this.getState=function(){return t.tree},this.getStorableState=function(){return t.tree[0].fields.map(function(e){return function e(t){var n=[],r=l(t,!0);return t.fields&&t.fields.length&&t.fields.forEach(function(t){n.push(e(t))}),n.length&&(r.initialElements=[],r.fields=[],n.forEach(function(e){r.initialElements.push(e),r.fields.push(e)})),r}(e)})},this.clearState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=t.tree[0],r=n.fields.length;return n.fields.length||(i.default.notifyStateFlush(),e()),n.fields.forEach(function(t,n){t.flushDroppedElements(function(){n===r-1&&(i.default.notifyStateFlush(!0),e())})}),!0},this.addEventListener=i.default.addEventListener,this.removeEventListener=i.default.removeEventListener};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=f(a),l=f(n(2)),s=f(n(3)),u=f(n(0));function f(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return p.call(n),n.canvasRef=i.default.createRef(),n.state={initialElements:[],droppedElements:[],initDone:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentWillMount",value:function(){this._setInitialElements(this.props.initialElements)}},{key:"componentWillReceiveProps",value:function(e){var t=e.initialElements;this._setInitialElements(t)}},{key:"render",value:function(){var e=this,t=this.state.droppedElements,n=this.props,o=n.capacity,a=n.id,l=n.placeholder,s=!o||o>t.length;return i.default.createElement("div",{ref:this.canvasRef,className:(s?"":"no-space")+" "+("root"===a?"canvas":"")+" "+(t.length?"":"empty")+" dropzone",onDragOver:this._onDragOver,onDragLeave:this._onDragLeave,onDragEnter:this._onDragEnter,onDrop:this._onDrop,onDragEnd:this._onDragEnd},t.map(function(t,n){return e._renderDragItem(r({},t,{index:n,spaceAvailable:s,initDone:e.state.initDone,dropzoneProps:{initDone:e.state.initDone,parentID:t.id}}))}),t.length?null:i.default.createElement("p",{className:"dropzone-placeholder"},l))}}]),t}(),p=function(){var e=this;this.dangerouslySetElements=function(t,n){var o=[];o="function"==typeof t?t(e.state.droppedElements)||[]:t;var a=e.props,i=a.id,l=a.parentID;o=o.map(function(t){return r({},t,{dropzoneID:i,parentID:l,showBasicContent:!1,updateState:e._updateState,removeElement:e._removeElement,updateElement:e._updateElement,flushDroppedElements:e._flushDroppedElements,checkAndRemoveElement:e._checkAndRemoveElement})}),e.setState({initialElements:o,droppedElements:o},function(){return e._updateState(n)})},this._unmarkDragElements=function(){[].forEach.call(e.canvasRef.current.querySelectorAll(".drag-item"),function(e){return e.classList.remove("before","after")})},this._setInitialElements=function(t){if(Array.isArray(t)&&t.length&&!e.state.initDone&&!e.state.initialElements.length){var n=e.props,o=n.id,a=n.parentID,i=t.map(function(t){return r({},t,{key:t.id,dropzoneID:o,parentID:a,showBasicContent:!1,updateState:e._updateState,removeElement:e._removeElement,updateElement:e._updateElement,flushDroppedElements:e._flushDroppedElements,checkAndRemoveElement:e._checkAndRemoveElement})});e.setState({initialElements:i,droppedElements:i},function(){return e._updateState(function(){e.setState({initDone:!0})})})}},this._manageInsideClass=function(t,n){var r=t.target;e.canvasRef.current===r&&r.classList[n]("inside")},this._removeElement=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments[2],o=e.state.droppedElements.findIndex(function(e){return e.id===t});e.setState({droppedElements:e.state.droppedElements.filter(function(e,t){return t!==o})},function(){return e._updateState(n,r?t:null)})},this._updateElement=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(-1===e.state.droppedElements.findIndex(function(e){return e.id===t.id}))return n(null);var o=["name","type","payload"],a={};return Object.keys(t).forEach(function(e){-1!==o.indexOf(e)&&(a[e]=t[e])}),e.setState({droppedElements:e.state.droppedElements.map(function(e){return e.id===t.id?r({},e,a):e})},function(){return e._updateState(n)}),!0},this._updateState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments[1],r=e.props,o=r.id,a=r.parentID;s.default.updateState(o,a,e.state.droppedElements,t,n)},this._flushDroppedElements=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};e.setState({initialElements:[],droppedElements:[]},function(){return e._updateState(t)})},this._checkAndRemoveElement=function(){var t=u.default.getDraggedElement(),n=t.removeElement,r=t.elementID,o=e.props.onElementMove(t),a=!u.default.getAttemptToRemove();o&&a&&n(r)},this._onDragOver=function(e){e.preventDefault(),e.stopPropagation()},this._onDragLeave=function(t){e._manageInsideClass(t,"remove"),u.default.setAttemptToRemove(!0)},this._onDragEnter=function(t){e._manageInsideClass(t,"add"),u.default.setAttemptToRemove(!1)},this._onDrop=function(t){t.preventDefault(),t.stopPropagation();var n=e.state.droppedElements;u.default.setAttemptToRemove(!1),e._manageInsideClass(t,"remove");var o=e.props.onDrop,a=JSON.parse(t.dataTransfer.getData("data"));return a=r({},a),e._unmarkDragElements(),o?o(a,e._addElement,{dropIndex:n.length?0:u.default.getDropPostion()+1,currentElements:n}):e._addElement(a)},this._addElement=function(t){var n=e.props,o=n.id,a=n.capacity,i=n.parentID,l=n.allowHorizontal,f=u.default.getDropPostion(),d=u.default.getDraggedElement(),p=!t||!t.id,m=-1,h=t.id&&e.state.droppedElements.filter(function(e,n){return e.id===t.id&&(m=n,!0)}).length,v=m===f,g=[].concat(e.state.droppedElements),b=!1;if(p||h){if(v)return u.default.error("Duplicate or invalid ID");b=!0,g=g.map(function(e){return e.id===t.id?r({},e,{remove:!0}):e})}var y=null;if(t.parentID&&t.dropzoneID){var E=s.default.traverseAndReturnElement(t.id,t.dropzoneID,t.parentID);!function e(t){t.forEach(function(t){t.fields&&(t.initialElements=t.fields,e(t.fields))})}(y=E&&E.fields||[])}var _=r({},t,{key:t.id,dropzoneID:o,parentID:i,allowHorizontal:l,showBasicContent:!1,updateState:e._updateState,removeElement:e._removeElement,updateElement:e._updateElement,initialElements:y||e.state.initialElements,flushDroppedElements:e._flushDroppedElements,checkAndRemoveElement:e._checkAndRemoveElement});return g=f>0?[].concat(c(g.slice(0,f)),[_],c(g.slice(f))):[_].concat(c(g)),v||(g=g.filter(function(e){return!e.remove})),a&&g.length>a?u.default.error("Maximum capacity of canvas("+o+") is "+a):(e.setState({droppedElements:g},function(){!b&&d&&"function"==typeof d.checkAndRemoveElement&&d.checkAndRemoveElement(),e._updateState()}),e.canvasRef.current.classList.add("dropping"),setTimeout(function(){e.canvasRef.current&&e.canvasRef.current.classList.remove("dropping")},500),{dropzoneID:o,elements:g})},this._renderDragItem=function(e){var t=u.default.getRegisteredPaletteElements().find(function(t){return t.type===e.type});return t?i.default.createElement(t.component,e):null}};d.propTypes={id:l.default.string.isRequired,capacity:l.default.number,onDrop:l.default.func,onElementMove:l.default.func,allowHorizontal:l.default.bool,initialElements:l.default.arrayOf(Object),parentID:l.default.string.isRequired,placeholder:l.default.oneOfType([l.default.string,l.default.node])},d.defaultProps={initialElements:[],placeholder:"Drop Here",onElementMove:function(){return!0}},t.default=d},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){var r,o,a={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),s=null,u=0,f=[],c=n(5);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=a[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(b(r.parts[i],t))}else{var l=[];for(i=0;i<r.parts.length;i++)l.push(b(r.parts[i],t));a[r.id]={id:r.id,refs:1,parts:l}}}}function p(e,t){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],l={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(l):n.push(r[i]={id:i,parts:[l]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),f.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",g(t,e.attrs),m(e,t),t}function g(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function b(e,t){var n,r,o,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var i=u++;n=s||(s=v(t)),r=_.bind(null,n,i,!1),o=_.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",g(t,e.attrs),m(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(r=c(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}.bind(null,n,t),o=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){h(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var i=n[o];(l=a[i.id]).refs--,r.push(l)}e&&d(p(e,t),t);for(o=0;o<r.length;o++){var l;if(0===(l=r[o]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete a[l.id]}}}};var y,E=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function _(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(a).concat([o]).join("\n")}var i;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,"/* Very basic style */\n\n/* Prevent the text contents of draggable elements from being selectable. */\n[draggable] {\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n\n  /* Required to make elements draggable in old WebKit */\n  -khtml-user-drag: element;\n  -webkit-user-drag: element;\n}\n\n/* class gets appended to canvas when user dragging over on it */\n.inside {\n  -webkit-box-shadow: inset 0 0 26px 0.5px rgba(20, 180, 81, 0.75);\n  -moz-box-shadow: inset 0 0 26px 0.5px rgba(20, 180, 81, 0.75);\n  box-shadow: inset 0 0 26px 0.5px rgba(20, 180, 81, 0.75);\n}\n\n.trash-box.inside,\n.dropzone.inside.no-space {\n  -webkit-box-shadow: inset 0 0 26px 0.5px rgba(230, 23, 23, 0.5);\n  -moz-box-shadow: inset 0 0 26px 0.5px rgba(230, 23, 23, 0.75);\n  box-shadow: inset 0 0 26px 0.5px rgba(230, 23, 23, 0.75);\n}\n\n.dropzone {\n  width: 100%;\n  padding: 10px;\n  position: relative;\n  box-sizing: border-box;\n  background: #f0faff;\n  border: 1px solid #0277bd;\n}\n\n.dropzone.empty {\n  padding: 40px;\n}\n\n.palette {\n  padding: 10px;\n  background: #fff;\n  box-sizing: border-box;\n  border: 1px solid #01579b;\n}\n\n.drag-item {\n  padding: 10px;\n  color: #01579b;\n  box-sizing: border-box;\n  background-color: #b3e5fc;\n  border: 1px solid #01579b;\n}\n\n.inline.drag-item {\n  margin: 0 10px;\n  display: inline-block;\n}\n\n.dropzone-placeholder {\n  width: 100%;\n  color: #01579b;\n  text-align: center;\n  position: absolute;\n  left: 0;\n  top: calc(50% - 10px);\n  animation-name: changeColor;\n  animation-duration: 2s;\n  animation-timing-function: ease-in-out;\n  animation-iteration-count: infinite;\n}\n\n@keyframes changeColor {\n  25% {\n    transform: scale(1);\n    opacity: 1;\n  }\n\n  75% {\n    transform: scale(1);\n    opacity: 0.5;\n  }\n}\n\n.palette-wrapper .drag-item {\n  color: #fff;\n  background-color: #01579b;\n}\n\n.drag-item + div {\n  margin-top: 10px;\n}\n\n.drag-item.after,\n.drag-item.before {\n  position: relative;\n}\n\n.drag-item.after::after {\n  content: '';\n  position: absolute;\n  width: 50%;\n  height: 1px;\n  background: #14b451;\n  left: 50%;\n  bottom: -1px;\n  border-radius: 50%;\n  transform: translate(-50%, 0);\n  -webkit-box-shadow: 0px 4px 10px 0px rgba(20, 180, 81, 1);\n  -moz-box-shadow: 0px 4px 10px 0px rgba(20, 180, 81, 1);\n  box-shadow: 0px 4px 10px 0px rgba(20, 180, 81, 1);\n}\n\n.drag-item.before::before {\n  content: '';\n  position: absolute;\n  width: 50%;\n  height: 1px;\n  background: #14b451;\n  left: 50%;\n  top: -1px;\n  border-radius: 50%;\n  transform: translate(-50%, 0);\n  -webkit-box-shadow: 0px -1px 10px 0.3px rgba(23, 180, 81, 1);\n  -moz-box-shadow: 0px -1px 10px 0.3px rgba(23, 180, 81, 1);\n  box-shadow: 0px -1px 10px 0.3px rgba(23, 180, 81, 1);\n}\n\n.inline.drag-item.before::before {\n  width: 1px;\n  height: 50%;\n  left: -1px;\n  right: unset;\n  top: 50%;\n  transform: translate(0, -50%);\n}\n\n.inline.drag-item.after::after {\n  width: 1px;\n  height: 50%;\n  right: -1px;\n  left: unset;\n  top: unset;\n  transform: translate(0, -50%);\n}\n\n.trash-box {\n  padding: 30px 10px;\n  margin: 10px 0;\n  color: #b71c1c;\n  background: #ffcdd2;\n  text-align: center;\n  border: 1px solid #b71c1c;\n}\n",""])},function(e,t,n){var r=n(8);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(1)),i=u(n(2)),l=u(n(0)),s=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onStateChange=function(e){n.setState({currentState:e})},n._renderElementInPreviewMode=function(e){var t={},o=n.registeredPaletteElements.find(function(t){return t.type===e.type});return Array.isArray(e.fields)&&e.fields.forEach(function(e){t[e.dropzoneID]=t[e.dropzoneID]||[],t[e.dropzoneID]=t[e.dropzoneID].concat(n._renderElementInPreviewMode(e))}),a.default.createElement(o.component,r({id:e.id,key:e.id,childNode:t},r({},e,{showPreview:!0,showBasicContent:!1})))},n.state={currentState:s.default.getState()},n.registeredPaletteElements=l.default.getRegisteredPaletteElements(),s.default.addEventListener(n._onStateChange),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),o(t,[{key:"render",value:function(){var e=this.state.currentState[0];return"function"==typeof this.props.children?this.props.children({children:e.fields.map(this._renderElementInPreviewMode)}):a.default.createElement("div",{className:"preview-container"},e.fields.map(this._renderElementInPreviewMode))}}]),t}();f.propTypes={children:i.default.func},t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=s(o),i=s(n(2)),l=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._manageInsideClass=function(e,t){var r=e.target;n.trashRef.current===r&&r.classList[t]("inside")},n._onDrop=function(e){e.preventDefault(),e.stopPropagation();var t=l.default.getDraggedElement();if(!t)return!1;var r=n.props,o=r.onBeforeTrash,a=r.onAfterTrash,i=t.removeElement,s=o(t);return n._manageInsideClass(e,"remove"),s&&l.default.getAttemptToRemove()&&(i(t.elementID,function(){a()},!0),l.default.setDraggedElement(null)),l.default.setAttemptToRemove(!1),!0},n._onDragOver=function(e){e.preventDefault()},n._onDragLeave=function(e){n._manageInsideClass(e,"remove")},n._onDragEnter=function(e){l.default.getDraggedElement()&&n._manageInsideClass(e,"add")},n.trashRef=a.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){return a.default.createElement("div",{ref:this.trashRef,className:"trash-box",onDragLeave:this._onDragLeave,onDragEnter:this._onDragEnter,onDragOver:this._onDragOver,onDrop:this._onDrop},this.props.children||a.default.createElement("span",null,"Trash Box"))}}]),t}();u.propTypes={onBeforeTrash:i.default.func,onAfterTrash:i.default.func,children:i.default.oneOfType([i.default.arrayOf(i.default.element),i.default.element])},u.defaultProps={onBeforeTrash:function(){return!0},onAfterTrash:function(){return!0}},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=u(a),l=u(n(2)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r._renderList=function(e){var t=s.default.getRegisteredPaletteElements().find(function(t){return t.type===e.type});return t?i.default.createElement(t.component,e):null},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props.paletteElements;return i.default.createElement("div",{className:"palette"},t.map(function(t){return e._renderList(r({},t,{key:t.id,showBasicContent:!0}))}))}}]),t}();c.propTypes={paletteElements:l.default.arrayOf(function(e){var t=!1;return e.forEach(function(n){n&&!n.id&&(t="`id` is required in all palette element"),e.filter(function(e){return e.id===n.id}).length>1&&(t="`id` of palette element should be unique")}),!t||new Error(t)})},c.defaultProps={paletteElements:[]},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=u(a),l=u(n(2)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._dragEnd=function(e){e.stopPropagation(),n.dragElemRef.current.classList.remove("before","after"),s.default.setDraggedElement(null)},n._dragStart=function(e){e.stopPropagation();var t=n.props,r=t.id,o=t.type,a=t.name,i=t.fields,l=t.payload,u=t.dropzoneID,f=t.removeElement,c=t.checkAndRemoveElement,d={id:r,type:o,name:a,payload:l};i&&(d.fields=i),e.dataTransfer.effectAllowed="copy",e.dataTransfer.setData("data",JSON.stringify(d)),u&&s.default.setDraggedElement({elementID:r,dropzoneID:u,removeElement:f,checkAndRemoveElement:c})},n._onDragOver=function(e){var t=n.dragElemRef.current.getBoundingClientRect();if(!n.props.spaceAvailable)return!1;if(n.props.allowHorizontal){var r=e.clientX;if(r>=t.x&&r<=t.x+t.width)r<t.x+t.width/2?(n.dragElemRef.current.classList.remove("after"),n.dragElemRef.current.classList.add("before"),s.default.setDropPostion(n.props.index)):(n.dragElemRef.current.classList.remove("before"),n.dragElemRef.current.classList.add("after"),s.default.setDropPostion(n.props.index+1))}else{var o=e.clientY;if(o>=t.y&&o<=t.y+t.height)o<t.y+t.height/2?(n.dragElemRef.current.classList.remove("after"),n.dragElemRef.current.classList.add("before"),s.default.setDropPostion(n.props.index)):(n.dragElemRef.current.classList.remove("before"),n.dragElemRef.current.classList.add("after"),s.default.setDropPostion(n.props.index+1))}return!0},n._onDragLeave=function(){n.dragElemRef.current.classList.remove("before","after")},n.dragElemRef=i.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.initDone!==e.initDone&&e.initDone&&this.props.updateState()}},{key:"render",value:function(){var e=this.props,t=e.elementProps,n=e.draggable,o=e.allowHorizontal,a=null;return this.props.dropzoneID&&(a={onDragOver:this._onDragOver,onDragLeave:this._onDragLeave}),n&&(a=r({},a,{draggable:!0})),i.default.createElement("div",r({ref:this.dragElemRef,className:"drag-item "+(o?"inline":""),onDragStart:this._dragStart,onDragEnd:this._dragEnd},t,a),this.props.children)}}]),t}();f.propTypes={id:l.default.string.isRequired,name:l.default.string,initDone:l.default.bool,index:l.default.number,allowHorizontal:l.default.bool,fields:l.default.instanceOf(Array),draggable:l.default.bool,spaceAvailable:l.default.bool,updateState:l.default.func,dropzoneID:l.default.string,payload:l.default.instanceOf(Object),elementProps:l.default.instanceOf(Object),type:l.default.string.isRequired,children:l.default.oneOfType([l.default.arrayOf(l.default.element),l.default.element]).isRequired,removeElement:l.default.func,checkAndRemoveElement:l.default.func},f.defaultProps={checkAndRemoveElement:function(){return!0},elementProps:null,payload:null,draggable:!0,updateState:function(){return!0}},t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var i=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.notifyStateChange=function(){t.event.change.forEach(function(e){return e(o.default.getState())})},this.notifyStateFlush=function(e){e&&t.notifyStateChange(),t.event.flush.forEach(function(e){return e(!0)})},this.notifyElementUpdate=function(e){t.event.updateElement.forEach(function(t){return t(e)})},this.notifyElementRemove=function(e){t.event.removeElement.forEach(function(t){return t(e)})},this.addEventListener=function(e,n){var o=null;return"function"!=typeof n?(r.default.error("`cb` param has to be function"),!1):(Object.prototype.hasOwnProperty.call(t.event,e)?(t.event[e].push(n),o=n):r.default.error("No such event"),o)},this.removeEventListener=function(e,n){Object.prototype.hasOwnProperty.call(t.event,e)?t.event[e]=t.event[e].filter(function(e){return e!==n}):r.default.error("No such event")},this.event={change:[],flush:[],removeElement:[],updateElement:[]}};t.default=i},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,a,i,l,s){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,o,a,i,l,s],c=0;(u=new Error(t.replace(/%s/g,function(){return f[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";var r=n(17),o=n(16),a=n(15);e.exports=function(){function e(e,t,n,r,i,l){l!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=i(n(1)),a=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement("div",{className:"main-canvas"},o.default.createElement(a.default,r({},e,{parentID:"root",id:"root",initDone:!0})))}},function(e,t,n){"use strict";var r=c(n(19)),o=c(n(4)),a=c(n(13)),i=c(n(12)),l=c(n(11)),s=c(n(10)),u=c(n(3)),f=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}n(9),e.exports={Canvas:r.default,Dropzone:o.default,Draggable:a.default,Palette:i.default,Trash:l.default,Preview:s.default,state:u.default,core:f.default,registerPaletteElements:f.default.registerPaletteElements}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvY29yZS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJyZWFjdFwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL3N0YXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0Ryb3B6b25lL0Ryb3B6b25lLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5jc3M/NzUyOCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9QcmV2aWV3L1ByZXZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvVHJhc2gvVHJhc2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUGFsZXR0ZS9QYWxldHRlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0RyYWdnYWJsZS9EcmFnZ2FibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvbGliL1JlYWN0UHJvcFR5cGVzU2VjcmV0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9mYmpzL2xpYi9pbnZhcmlhbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZianMvbGliL2VtcHR5RnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvZmFjdG9yeVdpdGhUaHJvd2luZ1NoaW1zLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0NhbnZhcy9DYW52YXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb3JlIiwiQ29yZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJnZXRBdHRlbXB0VG9SZW1vdmUiLCJhdHRlbXB0VG9SZW1vdmUiLCJzZXRBdHRlbXB0VG9SZW1vdmUiLCJzdGF0dXMiLCJzZXREcmFnZ2VkRWxlbWVudCIsImRyYWdnZWRFbGVtZW50IiwiZ2V0RHJhZ2dlZEVsZW1lbnQiLCJyZWdpc3RlclBhbGV0dGVFbGVtZW50cyIsInJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHMiLCJnZXRSZWdpc3RlcmVkUGFsZXR0ZUVsZW1lbnRzIiwic2V0RHJvcFBvc3Rpb24iLCJkcm9wUG9zaXRpb24iLCJnZXREcm9wUG9zdGlvbiIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInJlcXVpcmUiLCJfZXZlbnQiLCJzdGF0ZSIsIlN0YXRlIiwic2hhcmVhYmxlRWxlbWVudFByb3BzIiwidHJlZSIsImlkIiwiZmllbGRzIiwidHJhdmVyc2VBbmRSZXR1cm5QYXJlbnQiLCJkcm9wem9uZUlEIiwicGFyZW50SUQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJmb3VuZFBhcmVudCIsImZpbmQiLCJlbGVtZW50IiwidHJhdmVyc2VBbmRSZXR1cm5FbGVtZW50IiwiZWxlbWVudElEIiwiZmllbGRQYXJlbnQiLCJmaWVsZCIsInJlbW92ZVNlbnNpdGl2ZVByb3BzIiwib25seVJlbW92ZUZ1bmN0aW9ucyIsInNoYXJlYWJsZUVsZW1lbnQiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsImluZGV4T2YiLCJnZXRFbGVtZW50IiwidXBkYXRlU3RhdGUiLCJjYiIsImRpc3BhdGNoRWxlbWVudFJlbW92ZSIsInRyYXZlcnNlQW5kVXBkYXRlVHJlZSIsInVwZGF0ZWRGaWVsZHMiLCJtYXRjaGVkUGFyZW50Q2FudmFzIiwicmV0dXJuU3RhdHVzIiwiZmllbGRzVG9CZUFkZGVkIiwiZmlsdGVyIiwiZiIsImNvbmNhdCIsInVGaWVsZCIsImZpbmRJbmRleCIsInB1c2giLCJtYXAiLCJ1ZiIsImNoaWxkRmllbGRzIiwiX2V2ZW50MiIsImRlZmF1bHQiLCJub3RpZnlTdGF0ZUNoYW5nZSIsIm5vdGlmeUVsZW1lbnRSZW1vdmUiLCJ0cmFzaGVkIiwiZ2V0RWxlbWVudFBhcmVudCIsInJlbW92ZUVsZW1lbnQiLCJ1cGRhdGVFbGVtZW50IiwibmV3RGF0YSIsIl9leHRlbmRzIiwibm90aWZ5RWxlbWVudFVwZGF0ZSIsImdldFN0YXRlIiwiZ2V0U3RvcmFibGVTdGF0ZSIsInRyYXZlcnNlQW5kVGFrZVNuYXBzaG90Iiwic3ViRmllbGRzIiwibmVjZXNzYXJ5RGV0YWlscyIsImluaXRpYWxFbGVtZW50cyIsInNmIiwiY2xlYXJTdGF0ZSIsInJvb3ROb2RlIiwidG9wTGV2ZWxGaWVsZHMiLCJub3RpZnlTdGF0ZUZsdXNoIiwidG9wTGV2ZWxFbGVtZW50IiwiZmx1c2hEcm9wcGVkRWxlbWVudHMiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9yZWFjdCIsIkRyb3B6b25lIiwicHJvcHMiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiZ2V0UHJvdG90eXBlT2YiLCJfaW5pdGlhbGlzZVByb3BzIiwiY2FudmFzUmVmIiwiX3JlYWN0MiIsImNyZWF0ZVJlZiIsImRyb3BwZWRFbGVtZW50cyIsImluaXREb25lIiwiX3NldEluaXRpYWxFbGVtZW50cyIsIl9yZWYiLCJfdGhpczIiLCJfcHJvcHMiLCJjYXBhY2l0eSIsInBsYWNlaG9sZGVyIiwic3BhY2VBdmFpbGFibGUiLCJjcmVhdGVFbGVtZW50IiwicmVmIiwiY2xhc3NOYW1lIiwib25EcmFnT3ZlciIsIl9vbkRyYWdPdmVyIiwib25EcmFnTGVhdmUiLCJfb25EcmFnTGVhdmUiLCJvbkRyYWdFbnRlciIsIl9vbkRyYWdFbnRlciIsIm9uRHJvcCIsIl9vbkRyb3AiLCJvbkRyYWdFbmQiLCJfb25EcmFnRW5kIiwiZSIsIl9yZW5kZXJEcmFnSXRlbSIsImluZGV4IiwiZHJvcHpvbmVQcm9wcyIsImRhbmdlcm91c2x5U2V0RWxlbWVudHMiLCJkYXRhIiwiZG9uZSIsImVsZW1lbnRzIiwiX3RoaXMzIiwiX3Byb3BzMiIsInNob3dCYXNpY0NvbnRlbnQiLCJfdXBkYXRlU3RhdGUiLCJfcmVtb3ZlRWxlbWVudCIsIl91cGRhdGVFbGVtZW50IiwiX2ZsdXNoRHJvcHBlZEVsZW1lbnRzIiwiY2hlY2tBbmRSZW1vdmVFbGVtZW50IiwiX2NoZWNrQW5kUmVtb3ZlRWxlbWVudCIsInNldFN0YXRlIiwiX3VubWFya0RyYWdFbGVtZW50cyIsImN1cnJlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiQXJyYXkiLCJpc0FycmF5IiwiX3Byb3BzMyIsInVwZGF0ZWRJbml0aWFsSXRlbXMiLCJfbWFuYWdlSW5zaWRlQ2xhc3MiLCJfcmVmMiIsImFjdGlvbiIsInRhcmdldCIsInN1cHBvcnRlZEtleXMiLCJuZXdFbGVtZW50RGF0YSIsIl9wcm9wczQiLCJfc3RhdGUyIiwiZWxlbWVudE1vdmVkIiwiX2NvcmUyIiwib25FbGVtZW50TW92ZSIsImF0dGVtcHRUb01vdmUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIkpTT04iLCJwYXJzZSIsImRhdGFUcmFuc2ZlciIsImdldERhdGEiLCJfYWRkRWxlbWVudCIsImRyb3BJbmRleCIsImN1cnJlbnRFbGVtZW50cyIsInVwZGF0ZWREYXRhIiwiX3Byb3BzNSIsImFsbG93SG9yaXpvbnRhbCIsImludmFsaWRVcGRhdGVkRGF0YSIsImluZGV4T2ZQcmVzZW50RWxlbWVudCIsImtleUFscmVhZHlQcmVzZW50IiwiaXNTYW1lSW5kZXgiLCJuZXdFbGVtZW50cyIsImVsZW1lbnRBbHJlYWR5UmVtb3ZlZCIsImluaXRpYWxFbGVtZW50c1RvQmluZCIsIm9sZENvcHkiLCJhc3NpZ25Jbml0aWFsRWxlbWVudHMiLCJsaXN0IiwiZWxlbWVudFRvRHJvcCIsInNsaWNlIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYWRkIiwic2V0VGltZW91dCIsInR5cGUiLCJjb21wb25lbnQiLCJwcm9wVHlwZXMiLCJfcHJvcFR5cGVzMiIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJudW1iZXIiLCJmdW5jIiwiYm9vbCIsImFycmF5T2YiLCJvbmVPZlR5cGUiLCJub2RlIiwiZGVmYXVsdFByb3BzIiwiY3NzIiwibG9jYXRpb24iLCJ3aW5kb3ciLCJFcnJvciIsImJhc2VVcmwiLCJwcm90b2NvbCIsImhvc3QiLCJjdXJyZW50RGlyIiwicGF0aG5hbWUiLCJyZXBsYWNlIiwiZnVsbE1hdGNoIiwib3JpZ1VybCIsIm5ld1VybCIsInVucXVvdGVkT3JpZ1VybCIsInRyaW0iLCIkMSIsInRlc3QiLCJzdHJpbmdpZnkiLCJmbiIsIm1lbW8iLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJkb2N1bWVudCIsImFsbCIsImF0b2IiLCJhcHBseSIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiZml4VXJscyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsIml0ZW0iLCJkb21TdHlsZSIsInJlZnMiLCJqIiwicGFydHMiLCJhZGRTdHlsZSIsImxpc3RUb1N0eWxlcyIsIm5ld1N0eWxlcyIsImJhc2UiLCJwYXJ0IiwibWVkaWEiLCJzb3VyY2VNYXAiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImluc2VydEludG8iLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsImluc2VydEF0IiwibmV4dFNpYmxpbmciLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsImZpcnN0Q2hpbGQiLCJiZWZvcmUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJhdHRycyIsImFkZEF0dHJzIiwiZWwiLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZXN1bHQiLCJ0cmFuc2Zvcm0iLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImJpbmQiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJCbG9iIiwiYnRvYSIsImxpbmsiLCJyZWwiLCJjcmVhdGVMaW5rRWxlbWVudCIsImF1dG9GaXhVcmxzIiwiY29udmVydFRvQWJzb2x1dGVVcmxzIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJibG9iIiwib2xkU3JjIiwiaHJlZiIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiQm9vbGVhbiIsImpvaW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsInVzZVNvdXJjZU1hcCIsInRvU3RyaW5nIiwiY29udGVudCIsImNzc01hcHBpbmciLCJzb3VyY2VNYXBwaW5nIiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiaG1yIiwibG9jYWxzIiwiUHJldmlldyIsIl9vblN0YXRlQ2hhbmdlIiwibmV3U3RhdGUiLCJjdXJyZW50U3RhdGUiLCJfcmVuZGVyRWxlbWVudEluUHJldmlld01vZGUiLCJjaGlsZHJlbiIsImVsZW1lbnREYXRhIiwiY2hpbGROb2RlIiwic2hvd1ByZXZpZXciLCJDb21wb25lbnQiLCJyb290IiwiVHJhc2giLCJ0cmFzaFJlZiIsImVsZW1lbnRUb0JlVHJhc2hlZCIsIl90aGlzJHByb3BzIiwib25CZWZvcmVUcmFzaCIsIm9uQWZ0ZXJUcmFzaCIsIlBhbGV0dGUiLCJfcmVuZGVyTGlzdCIsInBhbGV0dGVFbGVtZW50cyIsInByb3BWYWx1ZSIsImlzRXJyb3IiLCJEcmFnZ2FibGUiLCJfZHJhZ0VuZCIsImRyYWdFbGVtUmVmIiwiX2RyYWdTdGFydCIsInBheWxvYWQiLCJlZmZlY3RBbGxvd2VkIiwic2V0RGF0YSIsImVsZW1Db3JkIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZHJhZ0VsZW1YIiwiY2xpZW50WCIsIngiLCJ3aWR0aCIsImRyYWdFbGVtWSIsImNsaWVudFkiLCJ5IiwiaGVpZ2h0IiwibmV4dFByb3BzIiwiZWxlbWVudFByb3BzIiwiZHJhZ2dhYmxlIiwib25EcmFnU3RhcnQiLCJpbnN0YW5jZU9mIiwicnBtRXZlbnQiLCJScG1FdmVudCIsImV2ZW50IiwiY2hhbmdlIiwidHJpZ2dlckNoYW5nZSIsImZsdXNoIiwiZXZlbnROYW1lIiwicmV0dXJuQ0IiLCJ2YWxpZGF0ZUZvcm1hdCIsImZvcm1hdCIsImNvbmRpdGlvbiIsImEiLCJiIiwiYXJncyIsImFyZ0luZGV4IiwiZnJhbWVzVG9Qb3AiLCJtYWtlRW1wdHlGdW5jdGlvbiIsImFyZyIsImVtcHR5RnVuY3Rpb24iLCJ0aGF0UmV0dXJucyIsInRoYXRSZXR1cm5zRmFsc2UiLCJ0aGF0UmV0dXJuc1RydWUiLCJ0aGF0UmV0dXJuc051bGwiLCJ0aGF0UmV0dXJuc1RoaXMiLCJ0aGF0UmV0dXJuc0FyZ3VtZW50IiwiaW52YXJpYW50IiwiUmVhY3RQcm9wVHlwZXNTZWNyZXQiLCJzaGltIiwicHJvcE5hbWUiLCJjb21wb25lbnROYW1lIiwicHJvcEZ1bGxOYW1lIiwic2VjcmV0IiwiZ2V0U2hpbSIsIlJlYWN0UHJvcFR5cGVzIiwiYXJyYXkiLCJzeW1ib2wiLCJhbnkiLCJvYmplY3RPZiIsIm9uZU9mIiwic2hhcGUiLCJleGFjdCIsImNoZWNrUHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiX0Ryb3B6b25lMiIsIkNhbnZhcyJdLCJtYXBwaW5ncyI6IjJCQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEyQ0EsT0F0Q0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLHdGQ2NNQyxFQUFPLElBaEZYLFNBQUFDLGlHQUFjQyxDQUFBQyxLQUFBRixHQUVaLElBQU1ELEtBUU5HLEtBQUtDLG1CQUFxQixrQkFBT0osRUFBS0ssaUJBTXRDRixLQUFLRyxtQkFBcUIsU0FBQ0MsR0FDekJQLEVBQUtLLGdCQUFrQkUsR0FPekJKLEtBQUtLLGtCQUFvQixTQUFDQyxHQUN4QlQsRUFBS1MsZUFBaUJBLEdBT3hCTixLQUFLTyxrQkFBb0Isa0JBQU9WLEVBQUtTLGdCQU1yQ04sS0FBS1Esd0JBQTBCLFNBQUNDLEdBQzlCWixFQUFLWSwwQkFBNEJBLEdBT25DVCxLQUFLVSw2QkFBK0Isa0JBQU9iLEVBQUtZLCtCQU1oRFQsS0FBS1csZUFBaUIsU0FBQ0MsR0FDckJmLEVBQUtlLGFBQWVBLEdBT3RCWixLQUFLYSxlQUFpQixrQkFBT2hCLEVBQUtlLGNBU2xDWixLQUFLYyxNQUFRQyxRQUFRRCxNQU9yQmQsS0FBS2dCLElBQU1ELFFBQVFDLGVBTVJuQixpQkNuRmYxQixFQUFBRCxRQUFBK0MsUUFBQSwwQkMwQkE5QyxFQUFBRCxRQUFBRixFQUFBLEdBQUFBLDRQQzFCQWtELEVBQUFsRCxFQUFBLDRDQTBWTW1ELEVBQVEsSUF2VlosU0FBQUMsaUdBQWNyQixDQUFBQyxLQUFBb0IsR0FFWixJQUFNRCxLQUNBRSxHQUF5QixLQUFNLE9BQVEsT0FBUSxVQUFXLGFBQWMsWUFHOUVGLEVBQU1HLE9BQ0pDLEdBQUksT0FDSkMsWUFXRixJQXdGTUMsRUFBMEIsU0FBMUJBLEVBQTJCQyxFQUFZQyxHQUFrQyxJQUF4QkgsRUFBd0JJLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQWZULEVBQU1HLEtBQzlEUyxFQUFjUCxFQUFPUSxLQUFLLFNBQUFDLEdBQUEsT0FBV0EsRUFBUVYsS0FBT0ksSUFFMUQsSUFBS0ksRUFDSCxJQUFLLElBQUkzRCxFQUFJLEVBQUdBLEVBQUlvRCxFQUFPSyxPQUFRekQsSUFBSyxDQUN0QyxJQUFNNkQsRUFBVVQsRUFBT3BELEdBQ3ZCLEdBQUk2RCxFQUFRVCxPQUFRLENBQ2xCLElBQU1wQixFQUFTcUIsRUFBd0JDLEVBQVlDLEVBQVVNLEVBQVFULFFBQ3JFLEdBQUlwQixFQUNGLE9BQU9BLEdBTWYsT0FBTzJCLEdBVUhHLEVBQTJCLFNBQUNDLEVBQVdULEVBQVlDLEdBQ3ZELElBQU1TLEVBQWNYLEVBQXdCQyxFQUFZQyxHQUN4RCxPQUFJUyxFQUNLQSxFQUFZWixPQUFPUSxLQUFLLFNBQUFLLEdBQUEsT0FBU0EsRUFBTWQsS0FBT1ksSUFHaEQsTUFpQ0hHLEVBQXVCLFNBQUNMLEVBQVNNLEdBQ3JDLElBQU1DLEtBRU4sT0FBS1AsR0FLTG5ELE9BQU8yRCxLQUFLUixHQUFTUyxRQUFRLFNBQUNDLEdBRUYsbUJBQWpCVixFQUFRVSxLQUViSixJQUNDQSxJQUErRCxJQUF4Q2xCLEVBQXNCdUIsUUFBUUQsTUFHeERILEVBQWlCRyxHQUFPVixFQUFRVSxNQUk3QkgsR0FoQkUsTUFvQkxLLEVBQWEsa0JBQWFQLEVBQXFCSiw0QkE0RHJEbEMsS0FBSzhDLFlBQWMsU0FBQ3BCLEVBQVlDLEVBQVVILEdBQWlELElBQXpDdUIsRUFBeUNuQixVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFwQyxhQUFVb0IsRUFBMEJwQixVQUFBLElBNU83RCxTQUF4QnFCLEVBQXlCdkIsRUFBWUMsRUFBVXVCLEdBQXVDLElBQXhCMUIsRUFBd0JJLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQWZULEVBQU1HLEtBQzNFNkIsRUFBc0IzQixFQUFPUSxLQUFLLFNBQUFLLEdBQUEsT0FBU0EsRUFBTWQsS0FBT0ksSUFDMUR5QixHQUFlLEVBR25CLEdBQUlELEVBQXFCLENBQ3ZCLEdBQUl6QixJQUFlQyxFQUVqQndCLEVBQW9CM0IsT0FBUzBCLE9BQ3hCLEdBQUtDLEVBQW9CM0IsUUFBVzBCLEVBQWNyQixPQVNsRCxDQUNMLElBQU13QixLQUd3QkYsRUFBb0IzQixPQUMvQzhCLE9BQU8sU0FBQUMsR0FBQSxPQUFLQSxFQUFFN0IsYUFBZUEsSUFFTkcsU0FBV3FCLEVBQWNyQixPQUdqRHNCLEVBQW9CM0IsT0FBUzBCLEVBQzFCTSxPQUFPTCxFQUFvQjNCLE9BQ3pCOEIsT0FBTyxTQUFBQyxHQUFBLE9BQUtBLEVBQUU3QixhQUFlQSxNQUVsQ3dCLEVBQWNSLFFBQVEsU0FBQ2UsSUFLRCxJQUpETixFQUFvQjNCLE9BQ3BDa0MsVUFBVSxTQUFBSCxHQUFBLE9BQUtBLEVBQUVoQyxLQUFPa0MsRUFBT2xDLE1BSWhDOEIsRUFBZ0JNLEtBQUtGLEtBS3BCSixFQUFnQnhCLFNBRW5Cc0IsRUFBb0IzQixPQUFTMkIsRUFBb0IzQixPQUM5Q29DLElBQUksU0FBQ0wsR0FFSixPQURXTCxFQUFjbEIsS0FBSyxTQUFBNkIsR0FBQSxPQUFNQSxFQUFHdEMsS0FBT2dDLEVBQUVoQyxNQUNuQ2dDLE1BTWpCRixFQUFnQnhCLFNBQ2xCc0IsRUFBb0IzQixPQUFTMkIsRUFBb0IzQixPQUFPZ0MsT0FBT0gsU0E1QzdEM0IsR0FBY3lCLEVBQW9CM0IsT0FDcEMyQixFQUFvQjNCLE9BQVMyQixFQUFvQjNCLE9BQzlDOEIsT0FBTyxTQUFBQyxHQUFBLE9BQUtBLEVBQUU3QixhQUFlQSxJQUdoQ3lCLEVBQW9CM0IsT0FBUzBCLEVBMkNqQ0UsR0FBZSxPQUlmLElBQUssSUFBSWhGLEVBQUksRUFBR0EsRUFBSW9ELEVBQU9LLE9BQVF6RCxJQUFLLENBQ3RDLElBQU0wRixFQUFjdEMsRUFBT3BELEdBQUdvRCxPQUMxQnBCLEdBQVMsRUFPYixHQUpJMEQsSUFDRjFELEVBQVM2QyxFQUFzQnZCLEVBQVlDLEVBQVV1QixFQUFlWSxJQUdsRTFELEVBQ0YsTUFLTixPQUFPZ0QsRUErSlBILENBQXNCdkIsRUFBWUMsRUFBVUgsR0FDNUN1QixFQUFHNUIsRUFBTUcsTUFDVHlDLEVBQUFDLFFBQVNDLG9CQUdMakIsR0FDRmUsRUFBQUMsUUFBU0UscUJBQ1B4QyxhQUNBQyxXQUNBcUIsd0JBRUFtQixTQUFTLEtBTWZuRSxLQUFLb0UsaUJBQW1CM0MsRUFHeEJ6QixLQUFLNkMsV0FBYUEsRUFHbEI3QyxLQUFLcUUsY0FsSWlCLFNBQUNsQyxFQUFXVCxFQUFZQyxFQUFVb0IsR0FDdEQsSUFBTWQsRUFBVUMsRUFBeUJDLEVBQVdULEVBQVlDLEdBRWhFLFFBQUlNLElBQ0ZBLEVBQVFvQyxjQUFjbEMsRUFBV1ksR0FDakNnQixFQUFBQyxRQUFTRSxxQkFDUC9CLFlBQVdULGFBQVlDLFdBQVV3QyxTQUFTLEtBRXJDLElBNkhYbkUsS0FBS3NFLGNBNUVpQixTQUFDbkMsRUFBV1QsRUFBWUMsRUFBVTRDLEVBQVN4QixHQUMvRCxJQUFNZCxFQUFVQyxFQUF5QkMsRUFBV1QsRUFBWUMsR0FFaEUsUUFBSU0sSUFDRkEsRUFBUXFDLGNBQVJFLEtBQ0tELEdBQ0hoRCxHQUFJWSxJQUNIWSxHQUVIZ0IsRUFBQUMsUUFBU1Msb0JBQW9CNUIsRUFBV1YsRUFBV1QsRUFBWUMsS0FFeEQsSUF3RVgzQixLQUFLMEUsU0FBVyxrQkFBT3ZELEVBQU1HLE1BUTdCdEIsS0FBSzJFLGlCQUFtQixrQkFBT3hELEVBQU1HLEtBQUssR0FBR0UsT0FDMUNvQyxJQUFJLFNBQUFMLEdBQUEsT0F4RXlCLFNBQTFCcUIsRUFBMkIzQyxHQUMvQixJQUFNNEMsS0FFQUMsRUFBbUJ4QyxFQUFxQkwsR0FBUyxHQXFCdkQsT0FsQklBLEVBQVFULFFBQVVTLEVBQVFULE9BQU9LLFFBQ25DSSxFQUFRVCxPQUFPa0IsUUFBUSxTQUFDYSxHQUN0QnNCLEVBQVVsQixLQUFLaUIsRUFBd0JyQixNQUt2Q3NCLEVBQVVoRCxTQUNaaUQsRUFBaUJDLG1CQUNqQkQsRUFBaUJ0RCxVQUVqQnFELEVBQVVuQyxRQUFRLFNBQUNzQyxHQUNqQkYsRUFBaUJDLGdCQUFnQnBCLEtBQUtxQixHQUN0Q0YsRUFBaUJ0RCxPQUFPbUMsS0FBS3FCLE1BSzFCRixFQWdER0YsQ0FBd0JyQixNQU9wQ3ZELEtBQUtpRixXQUFhLFdBQW1CLElBQWxCbEMsRUFBa0JuQixVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFiLGFBQ2hCc0QsRUFBVy9ELEVBQU1HLEtBQUssR0FDdEI2RCxFQUFpQkQsRUFBUzFELE9BQU9LLE9BaUJ2QyxPQWRLcUQsRUFBUzFELE9BQU9LLFNBQ25Ca0MsRUFBQUMsUUFBU29CLG1CQUNUckMsS0FHRm1DLEVBQVMxRCxPQUFPa0IsUUFBUSxTQUFDMkMsRUFBaUJqSCxHQUN4Q2lILEVBQWdCQyxxQkFBcUIsV0FDL0JsSCxJQUFNK0csRUFBaUIsSUFDekJwQixFQUFBQyxRQUFTb0Isa0JBQWlCLEdBQzFCckMsVUFLQyxHQVFUL0MsS0FBS3VGLGlCQUFtQnhCLEVBQUFDLFFBQVN1QixpQkFPakN2RixLQUFLd0Ysb0JBQXNCekIsRUFBQUMsUUFBU3dCLCtCQU16QnJFLDhlQzVWZnNFLEVBQUF6SCxFQUFBLGNBQ0FBLEVBQUEsUUFFQUEsRUFBQSxRQUNBQSxFQUFBLG1MQUVNMEgsY0FDSixTQUFBQSxFQUFZQyxnR0FBTzVGLENBQUFDLEtBQUEwRixHQUFBLElBQUFFLG1LQUFBQyxDQUFBN0YsTUFBQTBGLEVBQUFJLFdBQUFoSCxPQUFBaUgsZUFBQUwsSUFBQW5ILEtBQUF5QixLQUNYMkYsSUFEVyxPQUFBSyxFQUFBekgsS0FBQXFILEdBS2pCQSxFQUFLSyxVQUFZQyxFQUFBbEMsUUFBTW1DLFlBS3ZCUCxFQUFLekUsT0FDSDRELG1CQUNBcUIsbUJBQ0FDLFVBQVUsR0FiS1Qsa1lBa0JqQjVGLEtBQUtzRyxvQkFBb0J0RyxLQUFLMkYsTUFBTVosc0VBR1MsSUFBbkJBLEVBQW1Cd0IsRUFBbkJ4QixnQkFDMUIvRSxLQUFLc0csb0JBQW9CdkIsb0NBb1lsQixJQUFBeUIsRUFBQXhHLEtBQ0NvRyxFQUFvQnBHLEtBQUttQixNQUF6QmlGLGdCQURESyxFQUUrQnpHLEtBQUsyRixNQUFuQ2UsRUFGREQsRUFFQ0MsU0FBVW5GLEVBRlhrRixFQUVXbEYsR0FBSW9GLEVBRmZGLEVBRWVFLFlBQ2hCQyxHQUFpQkYsR0FBV0EsRUFBV04sRUFBZ0J2RSxPQUU3RCxPQUNFcUUsRUFBQWxDLFFBQUE2QyxjQUFBLE9BQ0VDLElBQUs5RyxLQUFLaUcsVUFDVmMsV0FBZUgsRUFBOEIsR0FBYixZQUFoQyxLQUEwRCxTQUFQckYsRUFBZ0IsU0FBVyxJQUE5RSxLQUFxRjZFLEVBQWdCdkUsT0FBbUIsR0FBVixTQUE5RyxZQUNBbUYsV0FBWWhILEtBQUtpSCxZQUNqQkMsWUFBYWxILEtBQUttSCxhQUNsQkMsWUFBYXBILEtBQUtxSCxhQUNsQkMsT0FBUXRILEtBQUt1SCxRQUNiQyxVQUFXeEgsS0FBS3lILFlBR2RyQixFQUFnQnhDLElBQUksU0FBQzhELEVBQUd0SixHQUFKLE9BQ2xCb0ksRUFBS21CLGdCQUFMbkQsS0FDS2tELEdBQ0hFLE1BQU94SixFQUNQd0ksaUJBQ0FQLFNBQVVHLEVBQUtyRixNQUFNa0YsU0FDckJ3QixlQUNFeEIsU0FBVUcsRUFBS3JGLE1BQU1rRixTQUNyQjFFLFNBQVUrRixFQUFFbkcsU0FPakI2RSxFQUFnQnZFLE9BQ3lDLEtBQXhEcUUsRUFBQWxDLFFBQUE2QyxjQUFBLEtBQUdFLFVBQVUsd0JBQXdCSiwwQ0F6Wi9DbUIsdUJBQXlCLFNBQUNDLEVBQU1DLEdBQzlCLElBQUlDLEtBRUZBLEVBRGtCLG1CQUFURixFQUNFQSxFQUFLRyxFQUFLL0csTUFBTWlGLHFCQUVoQjJCLEVBTDBCLElBQUFJLEVBT0ZELEVBQUt2QyxNQUE5QmpFLEVBUDJCeUcsRUFPL0I1RyxHQUFnQkksRUFQZXdHLEVBT2Z4RyxTQUV4QnNHLEVBQVdBLEVBQVNyRSxJQUFJLFNBQUE4RCxHQUFBLE9BQUFsRCxLQUNuQmtELEdBQ0hoRyxhQUNBQyxXQUNBeUcsa0JBQWtCLEVBQ2xCdEYsWUFBYW9GLEVBQUtHLGFBQ2xCaEUsY0FBZTZELEVBQUtJLGVBQ3BCaEUsY0FBZTRELEVBQUtLLGVBQ3BCakQscUJBQXNCNEMsRUFBS00sc0JBQzNCQyxzQkFBdUJQLEVBQUtRLDJCQUc5QlIsRUFBS1MsVUFDSDVELGdCQUFpQmtELEVBQ2pCN0IsZ0JBQWlCNkIsR0FDaEIsa0JBQU1DLEVBQUtHLGFBQWFMLFdBTTdCWSxvQkFBc0IsY0FDakJsRyxRQUFRbkUsS0FBSzJKLEVBQUtqQyxVQUFVNEMsUUFBUUMsaUJBQWlCLGNBQWUsU0FBQXBCLEdBQUEsT0FBS0EsRUFBRXFCLFVBQVVDLE9BQU8sU0FBVSxpQkFPM0cxQyxvQkFBc0IsU0FBQ3ZCLEdBU3JCLEdBTndCa0UsTUFBTUMsUUFBUW5FLElBQ2RBLEVBQWdCbEQsU0FDZnFHLEVBQUsvRyxNQUFNa0YsV0FDWDZCLEVBQUsvRyxNQUFNNEQsZ0JBQWdCbEQsT0FHL0IsS0FBQXNILEVBQ2tCakIsRUFBS3ZDLE1BQTlCakUsRUFET3lILEVBQ1g1SCxHQUFnQkksRUFETHdILEVBQ0t4SCxTQUNsQnlILEVBQXNCckUsRUFBZ0JuQixJQUFJLFNBQUE4RCxHQUFBLE9BQUFsRCxLQUMzQ2tELEdBQ0gvRSxJQUFLK0UsRUFBRW5HLEdBQ1BHLGFBQ0FDLFdBQ0F5RyxrQkFBa0IsRUFDbEJ0RixZQUFhb0YsRUFBS0csYUFDbEJoRSxjQUFlNkQsRUFBS0ksZUFDcEJoRSxjQUFlNEQsRUFBS0ssZUFDcEJqRCxxQkFBc0I0QyxFQUFLTSxzQkFDM0JDLHNCQUF1QlAsRUFBS1EsMkJBRzlCUixFQUFLUyxVQUNINUQsZ0JBQWlCcUUsRUFDakJoRCxnQkFBaUJnRCxHQUNoQixrQkFBT2xCLEVBQUtHLGFBQWEsV0FDMUJILEVBQUtTLFVBQ0h0QyxVQUFVLGVBWWxCZ0QsbUJBQXFCLFNBQUFDLEVBQWFDLEdBQVcsSUFBckJDLEVBQXFCRixFQUFyQkUsT0FDbEJ0QixFQUFLakMsVUFBVTRDLFVBQVlXLEdBQzdCQSxFQUFPVCxVQUFVUSxHQUFRLGdCQVU3QmpCLGVBQWlCLFNBQUNuRyxHQUFvRCxJQUF6Q1ksRUFBeUNuQixVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFwQyxhQUFVb0IsRUFBMEJwQixVQUFBLEdBQzlEZ0csRUFBUU0sRUFBSy9HLE1BQU1pRixnQkFBZ0IxQyxVQUFVLFNBQUFnRSxHQUFBLE9BQUtBLEVBQUVuRyxLQUFPWSxJQUVqRStGLEVBQUtTLFVBQ0h2QyxnQkFBaUI4QixFQUFLL0csTUFBTWlGLGdCQUFnQjlDLE9BQU8sU0FBQzVFLEVBQUdOLEdBQUosT0FBV0EsSUFBTXdKLEtBQ25FLGtCQUFNTSxFQUFLRyxhQUFhdEYsRUFBSUMsRUFBd0JiLEVBQVksY0FRckVvRyxlQUFpQixTQUFDaEUsR0FBMkIsSUFBbEJ4QixFQUFrQm5CLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQWIsYUFHOUIsSUFBc0IsSUFGRHNHLEVBQUsvRyxNQUFNaUYsZ0JBQWdCMUMsVUFBVSxTQUFBZ0UsR0FBQSxPQUFLQSxFQUFFbkcsS0FBT2dELEVBQVFoRCxLQUc5RSxPQUFPd0IsRUFBRyxNQUlaLElBQU0wRyxHQUFpQixPQUFRLE9BQVEsV0FDakNDLEtBbUJOLE9BbEJBNUssT0FBTzJELEtBQUs4QixHQUNUN0IsUUFBUSxTQUFDQyxJQUM0QixJQUFoQzhHLEVBQWM3RyxRQUFRRCxLQUN4QitHLEVBQWUvRyxHQUFPNEIsRUFBUTVCLE1BSXBDdUYsRUFBS1MsVUFDSHZDLGdCQUFpQjhCLEVBQUsvRyxNQUFNaUYsZ0JBQ3pCeEMsSUFBSSxTQUFDOEQsR0FDSixPQUFJQSxFQUFFbkcsS0FBT2dELEVBQVFoRCxHQUNuQmlELEtBQVlrRCxFQUFNZ0MsR0FHYmhDLEtBRVYsa0JBQU1RLEVBQUtHLGFBQWF0RixNQUVwQixRQVFUc0YsYUFBZSxXQUEwQyxJQUF6Q3RGLEVBQXlDbkIsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBcEMsYUFBVW9CLEVBQTBCcEIsVUFBQSxHQUFBK0gsRUFJbkR6QixFQUFLdkMsTUFGSGpFLEVBRmlEaUksRUFFckRwSSxHQUNBSSxFQUhxRGdJLEVBR3JEaEksU0FHRmlJLEVBQUE1RixRQUFNbEIsWUFDSnBCLEVBQ0FDLEVBQ0F1RyxFQUFLL0csTUFBTWlGLGdCQUNYckQsRUFDQUMsU0FVSndGLHNCQUF3QixXQUFtQixJQUFsQnpGLEVBQWtCbkIsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBYixhQUM1QnNHLEVBQUtTLFVBQ0g1RCxtQkFDQXFCLG9CQUNDLGtCQUFPOEIsRUFBS0csYUFBYXRGLFdBUzlCMkYsdUJBQXlCLFdBQ3ZCLElBQU1tQixFQUFlQyxFQUFBOUYsUUFBS3pELG9CQUNsQjhELEVBQTZCd0YsRUFBN0J4RixjQUFlbEMsRUFBYzBILEVBQWQxSCxVQUNqQi9CLEVBQVM4SCxFQUFLdkMsTUFBTW9FLGNBQWNGLEdBQ2xDRyxHQUFpQkYsRUFBQTlGLFFBQUsvRCxxQkFFeEJHLEdBQVU0SixHQUNaM0YsRUFBY2xDLFNBT2xCOEUsWUFBYyxTQUFDUyxHQUNiQSxFQUFFdUMsaUJBQ0Z2QyxFQUFFd0Msd0JBT0ovQyxhQUFlLFNBQUNPLEdBQ2RRLEVBQUttQixtQkFBbUIzQixFQUFHLFVBQzNCb0MsRUFBQTlGLFFBQUs3RCxvQkFBbUIsU0FPMUJrSCxhQUFlLFNBQUNLLEdBQ2RRLEVBQUttQixtQkFBbUIzQixFQUFHLE9BQzNCb0MsRUFBQTlGLFFBQUs3RCxvQkFBbUIsU0FVMUJvSCxRQUFVLFNBQUNHLEdBQ1RBLEVBQUV1QyxpQkFDRnZDLEVBQUV3QyxrQkFGYSxJQUdQOUQsRUFBb0I4QixFQUFLL0csTUFBekJpRixnQkFFUjBELEVBQUE5RixRQUFLN0Qsb0JBQW1CLEdBQ3hCK0gsRUFBS21CLG1CQUFtQjNCLEVBQUcsVUFOWixJQVFQSixFQUFXWSxFQUFLdkMsTUFBaEIyQixPQUNKUyxFQUFPb0MsS0FBS0MsTUFBTTFDLEVBQUUyQyxhQUFhQyxRQUFRLFNBSzdDLE9BSkF2QyxPQUFZQSxHQUVaRyxFQUFLVSxzQkFFRXRCLEVBQVNBLEVBQU9TLEVBQU1HLEVBQUtxQyxhQUNoQ0MsVUFBWXBFLEVBQWdCdkUsT0FBcUMsRUFBNUJpSSxFQUFBOUYsUUFBS25ELGlCQUFtQixFQUM3RDRKLGdCQUFpQnJFLElBQ2Q4QixFQUFLcUMsWUFBWXhDLFNBYXhCd0MsWUFBYyxTQUFDRyxHQUFnQixJQUFBQyxFQU16QnpDLEVBQUt2QyxNQUpIakUsRUFGdUJpSixFQUUzQnBKLEdBQ0FtRixFQUgyQmlFLEVBRzNCakUsU0FDQS9FLEVBSjJCZ0osRUFJM0JoSixTQUNBaUosRUFMMkJELEVBSzNCQyxnQkFFSWhLLEVBQWVrSixFQUFBOUYsUUFBS25ELGlCQUNwQlAsRUFBaUJ3SixFQUFBOUYsUUFBS3pELG9CQUN0QnNLLEdBQXNCSCxJQUFnQkEsRUFBWW5KLEdBQ3BEdUosR0FBeUIsRUFDdkJDLEVBQW9CTCxFQUFZbkosSUFDcEMyRyxFQUFLL0csTUFBTWlGLGdCQUFnQjlDLE9BQU8sU0FBQ29FLEVBQUd0SixHQUNwQyxPQUFJc0osRUFBRW5HLEtBQU9tSixFQUFZbkosS0FDdkJ1SixFQUF3QjFNLEdBRWpCLEtBSVJ5RCxPQUNDbUosRUFBY0YsSUFBMEJsSyxFQUMxQ3FLLEtBQWlCekgsT0FBTzBFLEVBQUsvRyxNQUFNaUYsaUJBQ25DOEUsR0FBd0IsRUFHNUIsR0FBSUwsR0FBc0JFLEVBQW1CLENBQzNDLEdBQUlDLEVBQ0YsT0FBT2xCLEVBQUE5RixRQUFLbEQsTUFBTSwyQkFHcEJvSyxHQUF3QixFQUN4QkQsRUFBY0EsRUFBWXJILElBQUksU0FBQzhELEdBQzdCLE9BQUlBLEVBQUVuRyxLQUFPbUosRUFBWW5KLEdBQ3ZCaUQsS0FBWWtELEdBQUdzQixRQUFRLElBRWxCdEIsSUFJWCxJQUFJeUQsRUFBd0IsS0FDNUIsR0FBSVQsRUFBWS9JLFVBQVkrSSxFQUFZaEosV0FBWSxDQUNsRCxJQUFNMEosRUFBVXhCLEVBQUE1RixRQUFNOUIseUJBQXlCd0ksRUFBWW5KLEdBQUltSixFQUFZaEosV0FBWWdKLEVBQVkvSSxXQUVyRSxTQUF4QjBKLEVBQXlCQyxHQUM3QkEsRUFBSzVJLFFBQVEsU0FBQWdGLEdBQ1BBLEVBQUVsRyxTQUNKa0csRUFBRTNDLGdCQUFrQjJDLEVBQUVsRyxPQUN0QjZKLEVBQXNCM0QsRUFBRWxHLFdBSzlCNkosQ0FWQUYsRUFBd0JDLEdBQVdBLEVBQVE1SixZQWE3QyxJQUFNK0osT0FDRGIsR0FDSC9ILElBQUsrSCxFQUFZbkosR0FDakJHLGFBQ0FDLFdBQ0FpSixrQkFDQXhDLGtCQUFrQixFQUNsQnRGLFlBQWFvRixFQUFLRyxhQUNsQmhFLGNBQWU2RCxFQUFLSSxlQUNwQmhFLGNBQWU0RCxFQUFLSyxlQUVwQnhELGdCQUFpQm9HLEdBQXlCakQsRUFBSy9HLE1BQU00RCxnQkFDckRPLHFCQUFzQjRDLEVBQUtNLHNCQUMzQkMsc0JBQXVCUCxFQUFLUSx5QkFxQjlCLE9BakJFdUMsRUFERXJLLEVBQWUsS0FDakJxSyxTQUNLQSxFQUFZTyxNQUFNLEVBQUc1SyxLQUN4QjJLLEdBRkZFLEVBR0tSLEVBQVlPLE1BQU01SyxNQUlyQjJLLEdBREYvSCxPQUFBaUksRUFFS1IsSUFJRkQsSUFDSEMsRUFBY0EsRUFBWTNILE9BQU8sU0FBQW9FLEdBQUEsT0FBTUEsRUFBRXNCLFVBSXZDdEMsR0FBWXVFLEVBQVlwSixPQUFTNkUsRUFDNUJvRCxFQUFBOUYsUUFBS2xELE1BQUwsOEJBQXlDWSxFQUF6QyxRQUEyRGdGLElBSXBFd0IsRUFBS1MsVUFDSHZDLGdCQUFpQjZFLEdBQ2hCLFlBRUlDLEdBQXlCNUssR0FBa0UsbUJBQXpDQSxFQUFlbUksdUJBQ3BFbkksRUFBZW1JLHdCQUlqQlAsRUFBS0csaUJBSVBILEVBQUtqQyxVQUFVNEMsUUFBUUUsVUFBVTJDLElBQUksWUFDckNDLFdBQVcsV0FDVHpELEVBQUtqQyxVQUFVNEMsU0FBV1gsRUFBS2pDLFVBQVU0QyxRQUFRRSxVQUFVQyxPQUFPLGFBQ2pFLE1BR0R0SCxhQUNBdUcsU0FBVWdELFVBU2R0RCxnQkFBa0IsU0FBQ2hDLEdBQ2pCLElBQU0xRCxFQUFVNkgsRUFBQTlGLFFBQUt0RCwrQkFBK0JzQixLQUFLLFNBQUEwRixHQUFBLE9BQUtBLEVBQUVrRSxPQUFTakcsRUFBTWlHLE9BQy9FLE9BQU8zSixFQUFVaUUsRUFBQWxDLFFBQUE2QyxjQUFDNUUsRUFBUTRKLFVBQWNsRyxHQUFZLE9BMEN4REQsRUFBU29HLFdBQ1B2SyxHQUFJd0ssRUFBQS9ILFFBQVVnSSxPQUFPQyxXQUNyQnZGLFNBQVVxRixFQUFBL0gsUUFBVWtJLE9BQ3BCNUUsT0FBUXlFLEVBQUEvSCxRQUFVbUksS0FDbEJwQyxjQUFlZ0MsRUFBQS9ILFFBQVVtSSxLQUN6QnZCLGdCQUFpQm1CLEVBQUEvSCxRQUFVb0ksS0FDM0JySCxnQkFBaUJnSCxFQUFBL0gsUUFBVXFJLFFBQVF2TixRQUNuQzZDLFNBQVVvSyxFQUFBL0gsUUFBVWdJLE9BQU9DLFdBQzNCdEYsWUFBYW9GLEVBQUEvSCxRQUFVc0ksV0FDckJQLEVBQUEvSCxRQUFVZ0ksT0FDVkQsRUFBQS9ILFFBQVV1SSxRQUlkN0csRUFBUzhHLGNBQ1B6SCxtQkFDQTRCLFlBQWEsWUFDYm9ELGNBQWUsa0JBQU8sY0FHVHJFLGlCQzljZnZILEVBQUFELFFBQUEsU0FBQXVPLEdBRUEsSUFBQUMsRUFBQSxvQkFBQUMsZUFBQUQsU0FFQSxJQUFBQSxFQUNBLFVBQUFFLE1BQUEsb0NBSUEsSUFBQUgsR0FBQSxpQkFBQUEsRUFDQSxPQUFBQSxFQUdBLElBQUFJLEVBQUFILEVBQUFJLFNBQUEsS0FBQUosRUFBQUssS0FDQUMsRUFBQUgsRUFBQUgsRUFBQU8sU0FBQUMsUUFBQSxpQkEyREEsT0EvQkFULEVBQUFTLFFBQUEsK0RBQUFDLEVBQUFDLEdBRUEsSUFXQUMsRUFYQUMsRUFBQUYsRUFDQUcsT0FDQUwsUUFBQSxvQkFBQXJPLEVBQUEyTyxHQUF3QyxPQUFBQSxJQUN4Q04sUUFBQSxvQkFBQXJPLEVBQUEyTyxHQUF3QyxPQUFBQSxJQUd4QywwREFBQUMsS0FBQUgsR0FDQUgsR0FRQUUsRUFGQSxJQUFBQyxFQUFBMUssUUFBQSxNQUVBMEssRUFDRyxJQUFBQSxFQUFBMUssUUFBQSxLQUVIaUssRUFBQVMsRUFHQU4sRUFBQU0sRUFBQUosUUFBQSxZQUlBLE9BQUEvQyxLQUFBdUQsVUFBQUwsR0FBQSx5QkM5RUEsSUFFQU0sRUFDQUMsRUFIQUMsS0FXQUMsR0FUQUgsRUFTQSxXQU1BLE9BQUFoQixRQUFBb0IsbUJBQUFDLE1BQUFyQixPQUFBc0IsTUFaQSxXQUVBLFlBREEsSUFBQUwsTUFBQUQsRUFBQU8sTUFBQWxPLEtBQUE0QixZQUNBZ00sSUFpQkEvSyxFQUFBLFNBQUE4SyxHQUNBLElBQUFDLEtBRUEsZ0JBQUFwRSxHQU1BLHNCQUFBQSxFQUNBLE9BQUFBLElBRUEsWUFBQW9FLEVBQUFwRSxHQUFBLENBQ0EsSUFBQTJFLEVBakJBLFNBQUEzRSxHQUNBLE9BQUF1RSxTQUFBSyxjQUFBNUUsSUFnQkFqTCxLQUFBeUIsS0FBQXdKLEdBRUEsR0FBQW1ELE9BQUEwQixtQkFBQUYsYUFBQXhCLE9BQUEwQixrQkFDQSxJQUdBRixJQUFBRyxnQkFBQUMsS0FDSyxNQUFBN0csR0FDTHlHLEVBQUEsS0FHQVAsRUFBQXBFLEdBQUEyRSxFQUVBLE9BQUFQLEVBQUFwRSxJQTFCQSxHQThCQWdGLEVBQUEsS0FDQUMsRUFBQSxFQUNBQyxLQUVBQyxFQUFBM1EsRUFBQSxHQXFEQSxTQUFBNFEsRUFBQUMsRUFBQUMsR0FDQSxRQUFBMVEsRUFBQSxFQUFnQkEsRUFBQXlRLEVBQUFoTixPQUFtQnpELElBQUEsQ0FDbkMsSUFBQTJRLEVBQUFGLEVBQUF6USxHQUNBNFEsRUFBQW5CLEVBQUFrQixFQUFBeE4sSUFFQSxHQUFBeU4sRUFBQSxDQUNBQSxFQUFBQyxPQUVBLFFBQUFDLEVBQUEsRUFBaUJBLEVBQUFGLEVBQUFHLE1BQUF0TixPQUEyQnFOLElBQzVDRixFQUFBRyxNQUFBRCxHQUFBSCxFQUFBSSxNQUFBRCxJQUdBLEtBQVFBLEVBQUFILEVBQUFJLE1BQUF0TixPQUF1QnFOLElBQy9CRixFQUFBRyxNQUFBeEwsS0FBQXlMLEVBQUFMLEVBQUFJLE1BQUFELEdBQUFKLFFBRUcsQ0FDSCxJQUFBSyxLQUVBLElBQUFELEVBQUEsRUFBaUJBLEVBQUFILEVBQUFJLE1BQUF0TixPQUF1QnFOLElBQ3hDQyxFQUFBeEwsS0FBQXlMLEVBQUFMLEVBQUFJLE1BQUFELEdBQUFKLElBR0FqQixFQUFBa0IsRUFBQXhOLEtBQTJCQSxHQUFBd04sRUFBQXhOLEdBQUEwTixLQUFBLEVBQUFFLFdBSzNCLFNBQUFFLEVBQUEvRCxFQUFBd0QsR0FJQSxJQUhBLElBQUFELEtBQ0FTLEtBRUFsUixFQUFBLEVBQWdCQSxFQUFBa04sRUFBQXpKLE9BQWlCekQsSUFBQSxDQUNqQyxJQUFBMlEsRUFBQXpELEVBQUFsTixHQUNBbUQsRUFBQXVOLEVBQUFTLEtBQUFSLEVBQUEsR0FBQUQsRUFBQVMsS0FBQVIsRUFBQSxHQUlBUyxHQUFjL0MsSUFIZHNDLEVBQUEsR0FHY1UsTUFGZFYsRUFBQSxHQUVjVyxVQURkWCxFQUFBLElBR0FPLEVBQUEvTixHQUNBK04sRUFBQS9OLEdBQUE0TixNQUFBeEwsS0FBQTZMLEdBREFYLEVBQUFsTCxLQUFBMkwsRUFBQS9OLElBQWtEQSxLQUFBNE4sT0FBQUssS0FJbEQsT0FBQVgsRUFHQSxTQUFBYyxFQUFBYixFQUFBYyxHQUNBLElBQUFwRyxFQUFBM0csRUFBQWlNLEVBQUFlLFlBRUEsSUFBQXJHLEVBQ0EsVUFBQW9ELE1BQUEsK0dBR0EsSUFBQWtELEVBQUFwQixJQUFBN00sT0FBQSxHQUVBLFdBQUFpTixFQUFBaUIsU0FDQUQsRUFFR0EsRUFBQUUsWUFDSHhHLEVBQUF5RyxhQUFBTCxFQUFBRSxFQUFBRSxhQUVBeEcsRUFBQTBHLFlBQUFOLEdBSkFwRyxFQUFBeUcsYUFBQUwsRUFBQXBHLEVBQUEyRyxZQU1BekIsRUFBQS9LLEtBQUFpTSxRQUNFLGNBQUFkLEVBQUFpQixTQUNGdkcsRUFBQTBHLFlBQUFOLE9BQ0UscUJBQUFkLEVBQUFpQixXQUFBakIsRUFBQWlCLFNBQUFLLE9BSUYsVUFBQXhELE1BQUEsOExBSEEsSUFBQW9ELEVBQUFuTixFQUFBaU0sRUFBQWUsV0FBQSxJQUFBZixFQUFBaUIsU0FBQUssUUFDQTVHLEVBQUF5RyxhQUFBTCxFQUFBSSxJQU1BLFNBQUFLLEVBQUFULEdBQ0EsVUFBQUEsRUFBQVUsV0FBQSxTQUNBVixFQUFBVSxXQUFBQyxZQUFBWCxHQUVBLElBQUFZLEVBQUE5QixFQUFBOUwsUUFBQWdOLEdBQ0FZLEdBQUEsR0FDQTlCLEVBQUErQixPQUFBRCxFQUFBLEdBSUEsU0FBQUUsRUFBQTVCLEdBQ0EsSUFBQWMsRUFBQTdCLFNBQUFsSCxjQUFBLFNBT0EsT0FMQWlJLEVBQUE2QixNQUFBL0UsS0FBQSxXQUVBZ0YsRUFBQWhCLEVBQUFkLEVBQUE2QixPQUNBaEIsRUFBQWIsRUFBQWMsR0FFQUEsRUFlQSxTQUFBZ0IsRUFBQUMsRUFBQUYsR0FDQTdSLE9BQUEyRCxLQUFBa08sR0FBQWpPLFFBQUEsU0FBQUMsR0FDQWtPLEVBQUFDLGFBQUFuTyxFQUFBZ08sRUFBQWhPLE1BSUEsU0FBQXlNLEVBQUEyQixFQUFBakMsR0FDQSxJQUFBYyxFQUFBb0IsRUFBQWhJLEVBQUFpSSxFQUdBLEdBQUFuQyxFQUFBb0MsV0FBQUgsRUFBQXRFLElBQUEsQ0FHQSxLQUZBd0UsRUFBQW5DLEVBQUFvQyxVQUFBSCxFQUFBdEUsTUFTQSxvQkFKQXNFLEVBQUF0RSxJQUFBd0UsRUFVQSxHQUFBbkMsRUFBQU4sVUFBQSxDQUNBLElBQUEyQyxFQUFBMUMsSUFFQW1CLEVBQUFwQixNQUFBa0MsRUFBQTVCLElBRUFrQyxFQUFBSSxFQUFBQyxLQUFBLEtBQUF6QixFQUFBdUIsR0FBQSxHQUNBbkksRUFBQW9JLEVBQUFDLEtBQUEsS0FBQXpCLEVBQUF1QixHQUFBLFFBR0FKLEVBQUFyQixXQUNBLG1CQUFBNEIsS0FDQSxtQkFBQUEsSUFBQUMsaUJBQ0EsbUJBQUFELElBQUFFLGlCQUNBLG1CQUFBQyxNQUNBLG1CQUFBQyxNQUVBOUIsRUF0REEsU0FBQWQsR0FDQSxJQUFBNkMsRUFBQTVELFNBQUFsSCxjQUFBLFFBUUEsT0FOQWlJLEVBQUE2QixNQUFBL0UsS0FBQSxXQUNBa0QsRUFBQTZCLE1BQUFpQixJQUFBLGFBRUFoQixFQUFBZSxFQUFBN0MsRUFBQTZCLE9BQ0FoQixFQUFBYixFQUFBNkMsR0FFQUEsRUE2Q0FFLENBQUEvQyxHQUNBa0MsRUFpRkEsU0FBQVcsRUFBQTdDLEVBQUFpQyxHQUNBLElBQUF0RSxFQUFBc0UsRUFBQXRFLElBQ0FpRCxFQUFBcUIsRUFBQXJCLFVBUUFvQyxPQUFBaFEsSUFBQWdOLEVBQUFpRCx1QkFBQXJDLEdBRUFaLEVBQUFpRCx1QkFBQUQsS0FDQXJGLEVBQUFrQyxFQUFBbEMsSUFHQWlELElBRUFqRCxHQUFBLHVEQUF1RGlGLEtBQUFNLFNBQUFDLG1CQUFBOUgsS0FBQXVELFVBQUFnQyxNQUFBLE9BR3ZELElBQUF3QyxFQUFBLElBQUFULE1BQUFoRixJQUE2QmIsS0FBQSxhQUU3QnVHLEVBQUFSLEVBQUFTLEtBRUFULEVBQUFTLEtBQUFkLElBQUFDLGdCQUFBVyxHQUVBQyxHQUFBYixJQUFBRSxnQkFBQVcsSUE1R0FkLEtBQUEsS0FBQXpCLEVBQUFkLEdBQ0E5RixFQUFBLFdBQ0FxSCxFQUFBVCxHQUVBQSxFQUFBd0MsTUFBQWQsSUFBQUUsZ0JBQUE1QixFQUFBd0MsU0FHQXhDLEVBQUFjLEVBQUE1QixHQUNBa0MsRUFzREEsU0FBQXBCLEVBQUFtQixHQUNBLElBQUF0RSxFQUFBc0UsRUFBQXRFLElBQ0FnRCxFQUFBc0IsRUFBQXRCLE1BRUFBLEdBQ0FHLEVBQUFrQixhQUFBLFFBQUFyQixHQUdBLEdBQUFHLEVBQUF5QyxXQUNBekMsRUFBQXlDLFdBQUFDLFFBQUE3RixNQUNFLENBQ0YsS0FBQW1ELEVBQUFPLFlBQ0FQLEVBQUFXLFlBQUFYLEVBQUFPLFlBR0FQLEVBQUFNLFlBQUFuQyxTQUFBd0UsZUFBQTlGLE1BckVBNEUsS0FBQSxLQUFBekIsR0FDQTVHLEVBQUEsV0FDQXFILEVBQUFULEtBTUEsT0FGQW9CLEVBQUFELEdBRUEsU0FBQXlCLEdBQ0EsR0FBQUEsRUFBQSxDQUNBLEdBQ0FBLEVBQUEvRixNQUFBc0UsRUFBQXRFLEtBQ0ErRixFQUFBL0MsUUFBQXNCLEVBQUF0QixPQUNBK0MsRUFBQTlDLFlBQUFxQixFQUFBckIsVUFFQSxPQUdBc0IsRUFBQUQsRUFBQXlCLFFBRUF4SixLQXJPQTdLLEVBQUFELFFBQUEsU0FBQW9OLEVBQUF3RCxHQUNBLHVCQUFBMkQsY0FDQSxpQkFBQTFFLFNBQUEsVUFBQW5CLE1BQUEsaUVBR0FrQyxTQUVBNkIsTUFBQSxpQkFBQTdCLEVBQUE2QixNQUFBN0IsRUFBQTZCLFNBSUE3QixFQUFBTixXQUFBLGtCQUFBTSxFQUFBTixZQUFBTSxFQUFBTixVQUFBVixLQUdBZ0IsRUFBQWUsYUFBQWYsRUFBQWUsV0FBQSxRQUdBZixFQUFBaUIsV0FBQWpCLEVBQUFpQixTQUFBLFVBRUEsSUFBQWxCLEVBQUFRLEVBQUEvRCxFQUFBd0QsR0FJQSxPQUZBRixFQUFBQyxFQUFBQyxHQUVBLFNBQUE0RCxHQUdBLElBRkEsSUFBQUMsS0FFQXZVLEVBQUEsRUFBaUJBLEVBQUF5USxFQUFBaE4sT0FBbUJ6RCxJQUFBLENBQ3BDLElBQUEyUSxFQUFBRixFQUFBelEsSUFDQTRRLEVBQUFuQixFQUFBa0IsRUFBQXhOLEtBRUEwTixPQUNBMEQsRUFBQWhQLEtBQUFxTCxHQUdBMEQsR0FFQTlELEVBREFTLEVBQUFxRCxFQUFBNUQsR0FDQUEsR0FHQSxJQUFBMVEsRUFBQSxFQUFpQkEsRUFBQXVVLEVBQUE5USxPQUFzQnpELElBQUEsQ0FDdkMsSUFBQTRRLEVBRUEsUUFGQUEsRUFBQTJELEVBQUF2VSxJQUVBNlEsS0FBQSxDQUNBLFFBQUFDLEVBQUEsRUFBbUJBLEVBQUFGLEVBQUFHLE1BQUF0TixPQUEyQnFOLElBQUFGLEVBQUFHLE1BQUFELFlBRTlDckIsRUFBQW1CLEVBQUF6TixRQTZMQSxJQUNBcVIsRUFEQUMsR0FDQUQsS0FFQSxTQUFBaEwsRUFBQWtMLEdBR0EsT0FGQUYsRUFBQWhMLEdBQUFrTCxFQUVBRixFQUFBdFAsT0FBQXlQLFNBQUFDLEtBQUEsUUFJQSxTQUFBNUIsRUFBQXhCLEVBQUFoSSxFQUFBb0IsRUFBQStILEdBQ0EsSUFBQXRFLEVBQUF6RCxFQUFBLEdBQUErSCxFQUFBdEUsSUFFQSxHQUFBbUQsRUFBQXlDLFdBQ0F6QyxFQUFBeUMsV0FBQUMsUUFBQU8sRUFBQWpMLEVBQUE2RSxPQUNFLENBQ0YsSUFBQXdHLEVBQUFsRixTQUFBd0UsZUFBQTlGLEdBQ0F5RyxFQUFBdEQsRUFBQXNELFdBRUFBLEVBQUF0TCxJQUFBZ0ksRUFBQVcsWUFBQTJDLEVBQUF0TCxJQUVBc0wsRUFBQXJSLE9BQ0ErTixFQUFBSyxhQUFBZ0QsRUFBQUMsRUFBQXRMLElBRUFnSSxFQUFBTSxZQUFBK0Msb0JDOVRBOVUsRUFBQUQsUUFBQSxTQUFBaVYsR0FDQSxJQUFBN0gsS0F3Q0EsT0FyQ0FBLEVBQUE4SCxTQUFBLFdBQ0EsT0FBQXBULEtBQUE0RCxJQUFBLFNBQUFtTCxHQUNBLElBQUFzRSxFQXNDQSxTQUFBdEUsRUFBQW9FLEdBQ0EsSUFBQUUsRUFBQXRFLEVBQUEsT0FDQXVFLEVBQUF2RSxFQUFBLEdBQ0EsSUFBQXVFLEVBQ0EsT0FBQUQsRUFHQSxHQUFBRixHQUFBLG1CQUFBekIsS0FBQSxDQUNBLElBQUE2QixHQVlBN0QsRUFaQTRELEVBaUJBLG1FQUhBNUIsS0FBQU0sU0FBQUMsbUJBQUE5SCxLQUFBdUQsVUFBQWdDLE1BR0EsT0FoQkE4RCxFQUFBRixFQUFBRyxRQUFBN1AsSUFBQSxTQUFBOFAsR0FDQSx1QkFBQUosRUFBQUssV0FBQUQsRUFBQSxRQUdBLE9BQUFMLEdBQUE3UCxPQUFBZ1EsR0FBQWhRLFFBQUErUCxJQUFBUCxLQUFBLE1BT0EsSUFBQXRELEVBSkEsT0FBQTJELEdBQUFMLEtBQUEsTUF0REFZLENBQUE3RSxFQUFBb0UsR0FDQSxPQUFBcEUsRUFBQSxHQUNBLFVBQUFBLEVBQUEsT0FBbUNzRSxFQUFBLElBRW5DQSxJQUVHTCxLQUFBLEtBSUgxSCxFQUFBbE4sRUFBQSxTQUFBRSxFQUFBdVYsR0FDQSxpQkFBQXZWLElBQ0FBLElBQUEsS0FBQUEsRUFBQSxNQUVBLElBREEsSUFBQXdWLEtBQ0ExVixFQUFBLEVBQWdCQSxFQUFBNEIsS0FBQTZCLE9BQWlCekQsSUFBQSxDQUNqQyxJQUFBbUQsRUFBQXZCLEtBQUE1QixHQUFBLEdBQ0EsaUJBQUFtRCxJQUNBdVMsRUFBQXZTLElBQUEsR0FFQSxJQUFBbkQsRUFBQSxFQUFZQSxFQUFBRSxFQUFBdUQsT0FBb0J6RCxJQUFBLENBQ2hDLElBQUEyUSxFQUFBelEsRUFBQUYsR0FLQSxpQkFBQTJRLEVBQUEsSUFBQStFLEVBQUEvRSxFQUFBLE1BQ0E4RSxJQUFBOUUsRUFBQSxHQUNBQSxFQUFBLEdBQUE4RSxFQUNLQSxJQUNMOUUsRUFBQSxPQUFBQSxFQUFBLGFBQUE4RSxFQUFBLEtBRUF2SSxFQUFBM0gsS0FBQW9MLE1BSUF6RCxxQkM5Q0FuTixFQUFBRCxRQUFBRixFQUFBLEVBQUFBLEVBQUEsSUFLQTJGLE1BQUF4RixFQUFBQyxFQUFBLHl0R0FBOHVHLHNCQ0o5dUcsSUFBQWlWLEVBQUFyVixFQUFBLEdBRUEsaUJBQUFxVixRQUFBbFYsRUFBQUMsRUFBQWlWLEVBQUEsTUFPQSxJQUFBdkUsR0FBZWlGLEtBQUEsRUFFZjdDLGVBUEFBLEVBUUFyQixnQkFBQS9OLEdBRUE5RCxFQUFBLEVBQUFBLENBQUFxVixFQUFBdkUsR0FFQXVFLEVBQUFXLFNBQUE3VixFQUFBRCxRQUFBbVYsRUFBQVcsd2ZDakJBaFcsRUFBQSxRQUNBQSxFQUFBLFFBRUFBLEVBQUEsUUFDQUEsRUFBQSwyREFFTWlXLGNBQ0osU0FBQUEsRUFBWXRPLGdHQUFPNUYsQ0FBQUMsS0FBQWlVLEdBQUEsSUFBQXJPLG1LQUFBQyxDQUFBN0YsTUFBQWlVLEVBQUFuTyxXQUFBaEgsT0FBQWlILGVBQUFrTyxJQUFBMVYsS0FBQXlCLEtBQ1gyRixJQURXLE9BQUFDLEVBWW5Cc08sZUFBaUIsU0FBQ0MsR0FDaEJ2TyxFQUFLK0MsVUFDSHlMLGFBQWNELEtBZEN2TyxFQXdCbkJ5Tyw0QkFBOEIsU0FBQ3BTLEdBQzdCLElBQU1xUyxLQUNBQyxFQUFjM08sRUFBS25GLDBCQUN0QnVCLEtBQUssU0FBQTBGLEdBQUEsT0FBS0EsRUFBRWtFLE9BQVMzSixFQUFRMkosT0FjaEMsT0FWSTNDLE1BQU1DLFFBQVFqSCxFQUFRVCxTQUN4QlMsRUFBUVQsT0FBT2tCLFFBQVEsU0FBQ0wsR0FDdEJpUyxFQUFTalMsRUFBTVgsWUFBYzRTLEVBQVNqUyxFQUFNWCxnQkFDNUM0UyxFQUFTalMsRUFBTVgsWUFBYzRTLEVBQVNqUyxFQUFNWCxZQUN6QzhCLE9BQU9vQyxFQUFLeU8sNEJBQTRCaFMsTUFPN0M2RCxFQUFBbEMsUUFBQTZDLGNBQUMwTixFQUFZMUksVUFBYnJILEdBQ0VqRCxHQUFJVSxFQUFRVixHQUNab0IsSUFBS1YsRUFBUVYsR0FDYmlULFVBQVdGLEdBSGI5UCxLQUlXdkMsR0FBU3dTLGFBQWEsRUFBTXJNLGtCQUFrQixPQTNDM0R4QyxFQUFLekUsT0FDSGlULGFBQWN4SyxFQUFBNUYsUUFBTVUsWUFHdEJrQixFQUFLbkYsMEJBQTRCcUosRUFBQTlGLFFBQUt0RCwrQkFDdENrSixFQUFBNUYsUUFBTXVCLGlCQUFpQkssRUFBS3NPLGdCQVJYdE8scVVBRENNLEVBQUFsQyxRQUFNMFEsK0NBcUR4QixJQUFNQyxFQUFPM1UsS0FBS21CLE1BQU1pVCxhQUFhLEdBR3JDLE1BQW1DLG1CQUF4QnBVLEtBQUsyRixNQUFNMk8sU0FDYnRVLEtBQUsyRixNQUFNMk8sVUFDaEJBLFNBQVVLLEVBQUtuVCxPQUFPb0MsSUFBSTVELEtBQUtxVSwrQkFNakNuTyxFQUFBbEMsUUFBQTZDLGNBQUEsT0FBS0UsVUFBVSxxQkFFWDROLEVBQUtuVCxPQUFPb0MsSUFBSTVELEtBQUtxVSx1Q0FPL0JKLEVBQVFuSSxXQUNOd0ksU0FBVXZJLEVBQUEvSCxRQUFVbUksZ0JBR1A4SCwwVUNuRmZ4TyxFQUFBekgsRUFBQSxjQUNBQSxFQUFBLFFBRUFBLEVBQUEsMkRBRU00VyxjQUNKLFNBQUFBLEVBQVlqUCxnR0FBTzVGLENBQUFDLEtBQUE0VSxHQUFBLElBQUFoUCxtS0FBQUMsQ0FBQTdGLE1BQUE0VSxFQUFBOU8sV0FBQWhILE9BQUFpSCxlQUFBNk8sSUFBQXJXLEtBQUF5QixLQUNYMkYsSUFEVyxPQUFBQyxFQWNuQnlELG1CQUFxQixTQUFBOUMsRUFBYWdELEdBQVcsSUFBckJDLEVBQXFCakQsRUFBckJpRCxPQUNsQjVELEVBQUtpUCxTQUFTaE0sVUFBWVcsR0FDNUJBLEVBQU9ULFVBQVVRLEdBQVEsV0FoQlYzRCxFQW9CbkIyQixRQUFVLFNBQUNHLEdBQ1RBLEVBQUV1QyxpQkFDRnZDLEVBQUV3QyxrQkFHRixJQUFNNEssRUFBcUJoTCxFQUFBOUYsUUFBS3pELG9CQUdoQyxJQUFLdVUsRUFDSCxPQUFPLEVBVE0sSUFBQUMsRUFZeUJuUCxFQUFLRCxNQUFyQ3FQLEVBWk9ELEVBWVBDLGNBQWVDLEVBWlJGLEVBWVFFLGFBQ2Y1USxFQUFrQnlRLEVBQWxCelEsY0FDRmpFLEVBQVM0VSxFQUFjRixHQW1CN0IsT0FqQkFsUCxFQUFLeUQsbUJBQW1CM0IsRUFBRyxVQUd2QnRILEdBQVUwSixFQUFBOUYsUUFBSy9ELHVCQUVqQm9FLEVBQWN5USxFQUFtQjNTLFVBQVcsV0FFMUM4UyxNQUNDLEdBR0huTCxFQUFBOUYsUUFBSzNELGtCQUFrQixPQUl6QnlKLEVBQUE5RixRQUFLN0Qsb0JBQW1CLElBRWpCLEdBckRVeUYsRUEyRG5CcUIsWUFBYyxTQUFDUyxHQUNiQSxFQUFFdUMsa0JBNURlckUsRUFtRW5CdUIsYUFBZSxTQUFDTyxHQUNkOUIsRUFBS3lELG1CQUFtQjNCLEVBQUcsV0FwRVY5QixFQTJFbkJ5QixhQUFlLFNBQUNLLEdBQ2FvQyxFQUFBOUYsUUFBS3pELHFCQUc5QnFGLEVBQUt5RCxtQkFBbUIzQixFQUFHLFFBMUU3QjlCLEVBQUtpUCxTQUFXM08sRUFBQWxDLFFBQU1tQyxZQUxMUCxzWEFvRmpCLE9BQ0VNLEVBQUFsQyxRQUFBNkMsY0FBQSxPQUNFQyxJQUFLOUcsS0FBSzZVLFNBQ1Y5TixVQUFVLFlBQ1ZHLFlBQWFsSCxLQUFLbUgsYUFDbEJDLFlBQWFwSCxLQUFLcUgsYUFDbEJMLFdBQVloSCxLQUFLaUgsWUFDakJLLE9BQVF0SCxLQUFLdUgsU0FFWHZILEtBQUsyRixNQUFNMk8sVUFBWXBPLEVBQUFsQyxRQUFBNkMsY0FBQSxtQ0FNakMrTixFQUFNOUksV0FDSmtKLGNBQWVqSixFQUFBL0gsUUFBVW1JLEtBQ3pCOEksYUFBY2xKLEVBQUEvSCxRQUFVbUksS0FDeEJtSSxTQUFVdkksRUFBQS9ILFFBQVVzSSxXQUNsQlAsRUFBQS9ILFFBQVVxSSxRQUFRTixFQUFBL0gsUUFBVS9CLFNBQzVCOEosRUFBQS9ILFFBQVUvQixXQUlkMlMsRUFBTXBJLGNBQ0p3SSxjQUFlLGtCQUFPLEdBQ3RCQyxhQUFjLGtCQUFPLGNBR1JMLDhlQ3ZIZm5QLEVBQUF6SCxFQUFBLGNBQ0FBLEVBQUEsUUFFQUEsRUFBQSw4TkFFTWtYLDZTQU1KQyxZQUFjLFNBQUN4UCxHQUNiLElBQU0xRCxFQUFVNkgsRUFBQTlGLFFBQUt0RCwrQkFBK0JzQixLQUFLLFNBQUEwRixHQUFBLE9BQUtBLEVBQUVrRSxPQUFTakcsRUFBTWlHLE9BQy9FLE9BQU8zSixFQUFVaUUsRUFBQWxDLFFBQUE2QyxjQUFDNUUsRUFBUTRKLFVBQWNsRyxHQUFZLGlZQUc3QyxJQUFBYSxFQUFBeEcsS0FDQ29WLEVBQW9CcFYsS0FBSzJGLE1BQXpCeVAsZ0JBRVIsT0FDRWxQLEVBQUFsQyxRQUFBNkMsY0FBQSxPQUFLRSxVQUFVLFdBRVhxTyxFQUFnQnhSLElBQUksU0FBQW1MLEdBQUEsT0FDbEJ2SSxFQUFLMk8sWUFBTDNRLEtBQXNCdUssR0FBTXBNLElBQUtvTSxFQUFLeE4sR0FBSTZHLGtCQUFrQixpQkFReEU4TSxFQUFRcEosV0FDTnNKLGdCQUFpQnJKLEVBQUEvSCxRQUFVcUksUUFBUSxTQUFDZ0osR0FDbEMsSUFBSUMsR0FBVSxFQWFkLE9BVkFELEVBQVUzUyxRQUFRLFNBQUNxTSxHQUNiQSxJQUFTQSxFQUFLeE4sS0FDaEIrVCxFQUFVLDJDQUdSRCxFQUFVL1IsT0FBTyxTQUFBbEYsR0FBQSxPQUFLQSxFQUFFbUQsS0FBT3dOLEVBQUt4TixLQUFJTSxPQUFTLElBQ25EeVQsRUFBVSwrQ0FJUEEsR0FBVSxJQUFJMUksTUFBTTBJLE1BSS9CSixFQUFRMUksY0FDTjRJLDhCQUdhRiw4ZUN0RGZ6UCxFQUFBekgsRUFBQSxjQUNBQSxFQUFBLFFBRUFBLEVBQUEsMkRBRU11WCxjQUNKLFNBQUFBLEVBQVk1UCxnR0FBTzVGLENBQUFDLEtBQUF1VixHQUFBLElBQUEzUCxtS0FBQUMsQ0FBQTdGLE1BQUF1VixFQUFBelAsV0FBQWhILE9BQUFpSCxlQUFBd1AsSUFBQWhYLEtBQUF5QixLQUNYMkYsSUFEVyxPQUFBQyxFQWFuQjRQLFNBQVcsU0FBQzlOLEdBQ1ZBLEVBQUV3QyxrQkFFRnRFLEVBQUs2UCxZQUFZNU0sUUFBUUUsVUFBVUMsT0FBTyxTQUFVLFNBR3BEYyxFQUFBOUYsUUFBSzNELGtCQUFrQixPQW5CTnVGLEVBc0JuQjhQLFdBQWEsU0FBQ2hPLEdBQ1pBLEVBQUV3QyxrQkFEZ0IsSUFBQTZLLEVBWWRuUCxFQUFLRCxNQVJQcEUsRUFKZ0J3VCxFQUloQnhULEdBQ0FxSyxFQUxnQm1KLEVBS2hCbkosS0FDQWpOLEVBTmdCb1csRUFNaEJwVyxLQUNBNkMsRUFQZ0J1VCxFQU9oQnZULE9BQ0FtVSxFQVJnQlosRUFRaEJZLFFBQ0FqVSxFQVRnQnFULEVBU2hCclQsV0FDQTJDLEVBVmdCMFEsRUFVaEIxUSxjQUNBb0UsRUFYZ0JzTSxFQVdoQnRNLHNCQUdJVixHQUNKeEcsS0FDQXFLLE9BQ0FqTixPQUNBZ1gsV0FHRW5VLElBQ0Z1RyxFQUFLdkcsT0FBU0EsR0FHaEJrRyxFQUFFMkMsYUFBYXVMLGNBQWdCLE9BQy9CbE8sRUFBRTJDLGFBQWF3TCxRQUFRLE9BQVExTCxLQUFLdUQsVUFBVTNGLElBSTFDckcsR0FDRm9JLEVBQUE5RixRQUFLM0QsbUJBQ0g4QixVQUFXWixFQUNYRyxhQUNBMkMsZ0JBQ0FvRSwyQkF6RGE3QyxFQW1FbkJxQixZQUFjLFNBQUNTLEdBQ2IsSUFBTW9PLEVBQVdsUSxFQUFLNlAsWUFBWTVNLFFBQVFrTix3QkFFMUMsSUFBS25RLEVBQUtELE1BQU1pQixlQUNkLE9BQU8sRUFHVCxHQUFJaEIsRUFBS0QsTUFBTWlGLGdCQUFpQixDQUM5QixJQUFNb0wsRUFBWXRPLEVBQUV1TyxRQUNwQixHQUFJRCxHQUFhRixFQUFTSSxHQUFLRixHQUFhRixFQUFTSSxFQUFJSixFQUFTSyxNQUU1REgsRUFEU0YsRUFBU0ksRUFBSUosRUFBU0ssTUFBUSxHQUV6Q3ZRLEVBQUs2UCxZQUFZNU0sUUFBUUUsVUFBVUMsT0FBTyxTQUMxQ3BELEVBQUs2UCxZQUFZNU0sUUFBUUUsVUFBVTJDLElBQUksVUFDdkM1QixFQUFBOUYsUUFBS3JELGVBQWVpRixFQUFLRCxNQUFNaUMsU0FFL0JoQyxFQUFLNlAsWUFBWTVNLFFBQVFFLFVBQVVDLE9BQU8sVUFDMUNwRCxFQUFLNlAsWUFBWTVNLFFBQVFFLFVBQVUyQyxJQUFJLFNBQ3ZDNUIsRUFBQTlGLFFBQUtyRCxlQUFlaUYsRUFBS0QsTUFBTWlDLE1BQVEsUUFHdEMsQ0FDTCxJQUFNd08sRUFBWTFPLEVBQUUyTyxRQUNwQixHQUFJRCxHQUFhTixFQUFTUSxHQUFLRixHQUFhTixFQUFTUSxFQUFJUixFQUFTUyxPQUU1REgsRUFEU04sRUFBU1EsRUFBSVIsRUFBU1MsT0FBUyxHQUUxQzNRLEVBQUs2UCxZQUFZNU0sUUFBUUUsVUFBVUMsT0FBTyxTQUMxQ3BELEVBQUs2UCxZQUFZNU0sUUFBUUUsVUFBVTJDLElBQUksVUFDdkM1QixFQUFBOUYsUUFBS3JELGVBQWVpRixFQUFLRCxNQUFNaUMsU0FFL0JoQyxFQUFLNlAsWUFBWTVNLFFBQVFFLFVBQVVDLE9BQU8sVUFDMUNwRCxFQUFLNlAsWUFBWTVNLFFBQVFFLFVBQVUyQyxJQUFJLFNBQ3ZDNUIsRUFBQTlGLFFBQUtyRCxlQUFlaUYsRUFBS0QsTUFBTWlDLE1BQVEsSUFLN0MsT0FBTyxHQXhHVWhDLEVBMkduQnVCLGFBQWUsV0FFYnZCLEVBQUs2UCxZQUFZNU0sUUFBUUUsVUFBVUMsT0FBTyxTQUFVLFVBMUdwRHBELEVBQUs2UCxZQUFjdlAsRUFBQWxDLFFBQU1tQyxZQUhSUCx1WUFNTzRRLEdBRXBCeFcsS0FBSzJGLE1BQU1VLFdBQWFtUSxFQUFVblEsVUFBWW1RLEVBQVVuUSxVQUMxRHJHLEtBQUsyRixNQUFNN0MsK0NBdUdOLElBQUEyRCxFQUM4Q3pHLEtBQUsyRixNQUFsRDhRLEVBRERoUSxFQUNDZ1EsYUFBY0MsRUFEZmpRLEVBQ2VpUSxVQUFXOUwsRUFEMUJuRSxFQUMwQm1FLGdCQUM3QmxELEVBQUksS0FpQlIsT0FmSTFILEtBQUsyRixNQUFNakUsYUFFYmdHLEdBQ0VWLFdBQVloSCxLQUFLaUgsWUFDakJDLFlBQWFsSCxLQUFLbUgsZUFJbEJ1UCxJQUNGaFAsT0FDS0EsR0FDSGdQLFdBQVcsS0FLYnhRLEVBQUFsQyxRQUFBNkMsY0FBQSxNQUFBckMsR0FDRXNDLElBQUs5RyxLQUFLeVYsWUFDVjFPLFVBQUEsY0FBd0I2RCxFQUFrQixTQUFXLElBQ3JEK0wsWUFBYTNXLEtBQUswVixXQUNsQmxPLFVBQVd4SCxLQUFLd1YsVUFDWmlCLEVBQ0EvTyxHQUdGMUgsS0FBSzJGLE1BQU0yTyxtQkFPckJpQixFQUFVekosV0FDUnZLLEdBQUl3SyxFQUFBL0gsUUFBVWdJLE9BQU9DLFdBQ3JCdE4sS0FBTW9OLEVBQUEvSCxRQUFVZ0ksT0FDaEIzRixTQUFVMEYsRUFBQS9ILFFBQVVvSSxLQUNwQnhFLE1BQU9tRSxFQUFBL0gsUUFBVWtJLE9BQ2pCdEIsZ0JBQWlCbUIsRUFBQS9ILFFBQVVvSSxLQUMzQjVLLE9BQVF1SyxFQUFBL0gsUUFBVTRTLFdBQVczTixPQUM3QnlOLFVBQVczSyxFQUFBL0gsUUFBVW9JLEtBQ3JCeEYsZUFBZ0JtRixFQUFBL0gsUUFBVW9JLEtBQzFCdEosWUFBYWlKLEVBQUEvSCxRQUFVbUksS0FDdkJ6SyxXQUFZcUssRUFBQS9ILFFBQVVnSSxPQUN0QjJKLFFBQVM1SixFQUFBL0gsUUFBVTRTLFdBQVc5WCxRQUM5QjJYLGFBQWMxSyxFQUFBL0gsUUFBVTRTLFdBQVc5WCxRQUNuQzhNLEtBQU1HLEVBQUEvSCxRQUFVZ0ksT0FBT0MsV0FDdkJxSSxTQUFVdkksRUFBQS9ILFFBQVVzSSxXQUNsQlAsRUFBQS9ILFFBQVVxSSxRQUFRTixFQUFBL0gsUUFBVS9CLFNBQzVCOEosRUFBQS9ILFFBQVUvQixVQUNUZ0ssV0FDSDVILGNBQWUwSCxFQUFBL0gsUUFBVW1JLEtBQ3pCMUQsc0JBQXVCc0QsRUFBQS9ILFFBQVVtSSxNQUduQ29KLEVBQVUvSSxjQUNSL0Qsc0JBQXVCLGtCQUFPLEdBQzlCZ08sYUFBYyxLQUNkZCxRQUFTLEtBQ1RlLFdBQVcsRUFDWDVULFlBQWEsa0JBQU8sY0FHUHlTLGlGQ3hMZixRQUFBdlgsRUFBQSxRQUNBQSxFQUFBLDJEQWlGTTZZLEVBQVcsSUE3RWYsU0FBQUMsSUFBYyxJQUFBbFIsRUFBQTVGLGtHQUFBRCxDQUFBQyxLQUFBOFcsR0FBQTlXLEtBV2RpRSxrQkFBb0IsV0FFbEIyQixFQUFLbVIsTUFBTUMsT0FBT3RVLFFBQVEsU0FBQWdGLEdBQUEsT0FBS0EsRUFBRWtDLEVBQUE1RixRQUFNVSxlQWIzQjFFLEtBa0Jkb0YsaUJBQW1CLFNBQUM2UixHQUNkQSxHQUNGclIsRUFBSzNCLG9CQUlQMkIsRUFBS21SLE1BQU1HLE1BQU14VSxRQUFRLFNBQUFnRixHQUFBLE9BQUtBLEdBQUUsTUF4QnBCMUgsS0E0QmR5RSxvQkFBc0IsU0FBQ3hDLEdBRXJCMkQsRUFBS21SLE1BQU16UyxjQUFjNUIsUUFBUSxTQUFBZ0YsR0FBQSxPQUFLQSxFQUFFekYsTUE5QjVCakMsS0FrQ2RrRSxvQkFBc0IsU0FBQ2pDLEdBRXJCMkQsRUFBS21SLE1BQU0xUyxjQUFjM0IsUUFBUSxTQUFBZ0YsR0FBQSxPQUFLQSxFQUFFekYsTUFwQzVCakMsS0E0Q2R1RixpQkFBbUIsU0FBQzRSLEVBQVdwVSxHQUM3QixJQUFJcVUsRUFBVyxLQUVmLE1BQWtCLG1CQUFQclUsR0FDVCtHLEVBQUE5RixRQUFLbEQsTUFBTSxrQ0FDSixJQUdMaEMsT0FBT1csVUFBVUMsZUFBZW5CLEtBQUtxSCxFQUFLbVIsTUFBT0ksSUFDbkR2UixFQUFLbVIsTUFBTUksR0FBV3hULEtBQUtaLEdBRTNCcVUsRUFBV3JVLEdBRVgrRyxFQUFBOUYsUUFBS2xELE1BQU0saUJBR05zVyxJQTVES3BYLEtBb0Vkd0Ysb0JBQXNCLFNBQUMyUixFQUFXcFUsR0FDNUJqRSxPQUFPVyxVQUFVQyxlQUFlbkIsS0FBS3FILEVBQUttUixNQUFPSSxHQUNuRHZSLEVBQUttUixNQUFNSSxHQUFhdlIsRUFBS21SLE1BQU1JLEdBQVc3VCxPQUFPLFNBQUFvRSxHQUFBLE9BQUtBLElBQU0zRSxJQUVoRStHLEVBQUE5RixRQUFLbEQsTUFBTSxrQkF0RWJkLEtBQUsrVyxPQUNIQyxVQUNBRSxTQUNBN1MsaUJBQ0FDLDZCQXlFU3VTLGdDQ3pFZjFZLEVBQUFELFFBRkEsNkVDWUEsSUFBQW1aLEVBQUEsU0FBQUMsS0ErQkFuWixFQUFBRCxRQXJCQSxTQUFBcVosRUFBQUQsRUFBQUUsRUFBQUMsRUFBQWhaLEVBQUFDLEVBQUFnSixFQUFBbkUsR0FHQSxHQUZBOFQsRUFBQUMsSUFFQUMsRUFBQSxDQUNBLElBQUF6VyxFQUNBLFFBQUFnQixJQUFBd1YsRUFDQXhXLEVBQUEsSUFBQThMLE1BQUEscUlBQ0ssQ0FDTCxJQUFBOEssR0FBQUYsRUFBQUMsRUFBQWhaLEVBQUFDLEVBQUFnSixFQUFBbkUsR0FDQW9VLEVBQUEsR0FDQTdXLEVBQUEsSUFBQThMLE1BQUEwSyxFQUFBcEssUUFBQSxpQkFDQSxPQUFBd0ssRUFBQUMsU0FFQWhaLEtBQUEsc0JBSUEsTUFEQW1DLEVBQUE4VyxZQUFBLEVBQ0E5VyxrQ0NyQ0EsU0FBQStXLEVBQUFDLEdBQ0Esa0JBQ0EsT0FBQUEsR0FTQSxJQUFBQyxFQUFBLGFBRUFBLEVBQUFDLFlBQUFILEVBQ0FFLEVBQUFFLGlCQUFBSixHQUFBLEdBQ0FFLEVBQUFHLGdCQUFBTCxHQUFBLEdBQ0FFLEVBQUFJLGdCQUFBTixFQUFBLE1BQ0FFLEVBQUFLLGdCQUFBLFdBQ0EsT0FBQXBZLE1BRUErWCxFQUFBTSxvQkFBQSxTQUFBUCxHQUNBLE9BQUFBLEdBR0EzWixFQUFBRCxRQUFBNlosZ0NDMUJBLElBQUFBLEVBQUEvWixFQUFBLElBQ0FzYSxFQUFBdGEsRUFBQSxJQUNBdWEsRUFBQXZhLEVBQUEsSUFFQUcsRUFBQUQsUUFBQSxXQUNBLFNBQUFzYSxFQUFBN1MsRUFBQThTLEVBQUFDLEVBQUFoTSxFQUFBaU0sRUFBQUMsR0FDQUEsSUFBQUwsR0FJQUQsR0FDQSxFQUNBLG1MQU1BLFNBQUFPLElBQ0EsT0FBQUwsRUFGQUEsRUFBQXZNLFdBQUF1TSxFQU1BLElBQUFNLEdBQ0FDLE1BQUFQLEVBQ0FwTSxLQUFBb00sRUFDQXJNLEtBQUFxTSxFQUNBdE0sT0FBQXNNLEVBQ0FqWixPQUFBaVosRUFDQXhNLE9BQUF3TSxFQUNBUSxPQUFBUixFQUVBUyxJQUFBVCxFQUNBbk0sUUFBQXdNLEVBQ0E1VyxRQUFBdVcsRUFDQTVCLFdBQUFpQyxFQUNBdE0sS0FBQWlNLEVBQ0FVLFNBQUFMLEVBQ0FNLE1BQUFOLEVBQ0F2TSxVQUFBdU0sRUFDQU8sTUFBQVAsRUFDQVEsTUFBQVIsR0FNQSxPQUhBQyxFQUFBUSxlQUFBdkIsRUFDQWUsRUFBQVMsVUFBQVQsRUFFQUEsOFBDeERBOWEsRUFBQSxRQUVBQSxFQUFBLGlFQUtlLFNBQUEySCxHQUFBLE9BQ2JPLEVBQUFsQyxRQUFBNkMsY0FBQSxPQUFLRSxVQUFVLGVBQ2JiLEVBQUFsQyxRQUFBNkMsY0FBQTJTLEVBQUF4VixRQUFBUSxLQUFjbUIsR0FBT2hFLFNBQVMsT0FBT0osR0FBRyxPQUFPOEUsVUFBQSxxQ0NSbkQsUUFBQXJJLEVBQUEsU0FDQUEsRUFBQSxRQUNBQSxFQUFBLFNBQ0FBLEVBQUEsU0FDQUEsRUFBQSxTQUNBQSxFQUFBLFNBR0FBLEVBQUEsUUFDQUEsRUFBQSx1REFHQUEsRUFBQSxHQUVBRyxFQUFPRCxTQUVMdWIsaUJBQ0EvVCxtQkFDQTZQLG9CQUNBTCxrQkFDQU4sZ0JBQ0FYLGtCQUdBOVMsZ0JBQ0F0QixlQUdBVyx3QkFBeUJzSixFQUFBOUYsUUFBS3hEIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyMCk7XG4iLCJjbGFzcyBDb3JlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gbWFpbiBvYmplY3Qvc3RvcmVcbiAgICBjb25zdCBjb3JlID0ge307XG5cbiAgICAvLyBhbGwgcHVibGljIGdldHRlci9zZXR0ZXIgZ29lcyBoZXJlXG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB0byBnZXQgYXR0ZW1wdFRvUmVtb3ZlXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59IGF0dGVtcHRUb1JlbW92ZVxuICAgICAqL1xuICAgIHRoaXMuZ2V0QXR0ZW1wdFRvUmVtb3ZlID0gKCkgPT4gKGNvcmUuYXR0ZW1wdFRvUmVtb3ZlKTtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIHNldCB1c2VyJ3MgYXR0ZW1wdCB0byByZW1vdmUgdGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHN0YXR1c1xuICAgICAqL1xuICAgIHRoaXMuc2V0QXR0ZW1wdFRvUmVtb3ZlID0gKHN0YXR1cykgPT4ge1xuICAgICAgY29yZS5hdHRlbXB0VG9SZW1vdmUgPSBzdGF0dXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIHNldCBkcmFnZ2VkIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZHJhZ2dlZEVsZW1lbnRcbiAgICAgKi9cbiAgICB0aGlzLnNldERyYWdnZWRFbGVtZW50ID0gKGRyYWdnZWRFbGVtZW50KSA9PiB7XG4gICAgICBjb3JlLmRyYWdnZWRFbGVtZW50ID0gZHJhZ2dlZEVsZW1lbnQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIHJldHVybiBkcmFnZ2VkIGVsZW1lbnRcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICAgIHRoaXMuZ2V0RHJhZ2dlZEVsZW1lbnQgPSAoKSA9PiAoY29yZS5kcmFnZ2VkRWxlbWVudCk7XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB0byByZWdpc3RlciBwYWxldHRlIGVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtBcnJheX0gcmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cyAtIHBhbGV0dGUgZWxlbWVudHNcbiAgICAgKi9cbiAgICB0aGlzLnJlZ2lzdGVyUGFsZXR0ZUVsZW1lbnRzID0gKHJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHMpID0+IHtcbiAgICAgIGNvcmUucmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cyA9IHJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIHJldHVybiByZWdpc3RlcmVkIHBhbGV0dGUgZWxlbWVudHNcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IC0gYXJyYXkgb2YgcGFsZXR0ZSBlbGVtZW50c1xuICAgICAqL1xuICAgIHRoaXMuZ2V0UmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50cyA9ICgpID0+IChjb3JlLnJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHMgfHwgW10pO1xuXG4gICAgLyoqXG4gICAgICogZnVuY3Rpb24gdG8gc2V0IGRyb3AgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZHJvcFBvc2l0aW9uXG4gICAgICovXG4gICAgdGhpcy5zZXREcm9wUG9zdGlvbiA9IChkcm9wUG9zaXRpb24pID0+IHtcbiAgICAgIGNvcmUuZHJvcFBvc2l0aW9uID0gZHJvcFBvc2l0aW9uO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB0byByZXR1cm4gZHJvcCBwb3NpdGlvblxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5nZXREcm9wUG9zdGlvbiA9ICgpID0+IChjb3JlLmRyb3BQb3NpdGlvbik7XG5cbiAgICAvKiBlc2xpbnQgbm8tY29uc29sZTowICovXG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB0byBnaXZlIGFuIGVycm9yIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSAtIGFueSBtZXNzYWdlIHRvIGJlIHByaW50XG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5lcnJvciA9IGNvbnNvbGUuZXJyb3I7XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB0byBsb2cgYSBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgLSBhbnkgbWVzc2FnZSB0byBiZSBwcmludFxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubG9nID0gY29uc29sZS5sb2c7XG4gIH1cbn1cblxuY29uc3QgY29yZSA9IG5ldyBDb3JlKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvcmU7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWFjdFwiKTsiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIFN5bWJvbC5mb3IgJiZcbiAgICBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykpIHx8XG4gICAgMHhlYWM3O1xuXG4gIHZhciBpc1ZhbGlkRWxlbWVudCA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgb2JqZWN0ICE9PSBudWxsICYmXG4gICAgICBvYmplY3QuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRTtcbiAgfTtcblxuICAvLyBCeSBleHBsaWNpdGx5IHVzaW5nIGBwcm9wLXR5cGVzYCB5b3UgYXJlIG9wdGluZyBpbnRvIG5ldyBkZXZlbG9wbWVudCBiZWhhdmlvci5cbiAgLy8gaHR0cDovL2ZiLm1lL3Byb3AtdHlwZXMtaW4tcHJvZFxuICB2YXIgdGhyb3dPbkRpcmVjdEFjY2VzcyA9IHRydWU7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9mYWN0b3J5V2l0aFR5cGVDaGVja2VycycpKGlzVmFsaWRFbGVtZW50LCB0aHJvd09uRGlyZWN0QWNjZXNzKTtcbn0gZWxzZSB7XG4gIC8vIEJ5IGV4cGxpY2l0bHkgdXNpbmcgYHByb3AtdHlwZXNgIHlvdSBhcmUgb3B0aW5nIGludG8gbmV3IHByb2R1Y3Rpb24gYmVoYXZpb3IuXG4gIC8vIGh0dHA6Ly9mYi5tZS9wcm9wLXR5cGVzLWluLXByb2RcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhY3RvcnlXaXRoVGhyb3dpbmdTaGltcycpKCk7XG59XG4iLCJpbXBvcnQgcnBtRXZlbnQgZnJvbSAnLi9ldmVudCc7XG5cbmNsYXNzIFN0YXRlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gYWxsIHByaXZhdGUgdmFyaWJhbGUgZ29lcyBoZXJlXG4gICAgY29uc3Qgc3RhdGUgPSB7fTtcbiAgICBjb25zdCBzaGFyZWFibGVFbGVtZW50UHJvcHMgPSBbJ2lkJywgJ3R5cGUnLCAnbmFtZScsICdwYXlsb2FkJywgJ2Ryb3B6b25lSUQnLCAncGFyZW50SUQnXTtcblxuICAgIC8vIHNldCBiYXNlXG4gICAgc3RhdGUudHJlZSA9IFt7XG4gICAgICBpZDogJ3Jvb3QnLFxuICAgICAgZmllbGRzOiBbXVxuICAgIH1dO1xuXG4gICAgLyoqXG4gICAgICogcHJpdmF0ZSBmdW5jdGlvbiB0byB0cmF2ZXJzZSB0aHJvdWdoIGVhY2ggbm9kZSBhbmQgdXBkYXRlIHRoZSBjb3JyZXNwb25kaW5nIG5vZGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZHJvcHpvbmVJRFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnRJRFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHVwZGF0ZWRGaWVsZHMgLSBuZXcgZmllbGRzL2VsZW1lbnRzXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmllbGRzIC0gZmllbGRzL2VsZW1lbnRzIG9mIGN1cnJlbnQgY2FudmFzXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgY29uc3QgdHJhdmVyc2VBbmRVcGRhdGVUcmVlID0gKGRyb3B6b25lSUQsIHBhcmVudElELCB1cGRhdGVkRmllbGRzLCBmaWVsZHMgPSBzdGF0ZS50cmVlKSA9PiB7XG4gICAgICBjb25zdCBtYXRjaGVkUGFyZW50Q2FudmFzID0gZmllbGRzLmZpbmQoZmllbGQgPT4gZmllbGQuaWQgPT09IHBhcmVudElEKTtcbiAgICAgIGxldCByZXR1cm5TdGF0dXMgPSBmYWxzZTtcblxuICAgICAgLy8gZm91bmQgZWxlbWVudFxuICAgICAgaWYgKG1hdGNoZWRQYXJlbnRDYW52YXMpIHtcbiAgICAgICAgaWYgKGRyb3B6b25lSUQgPT09IHBhcmVudElEKSB7XG4gICAgICAgICAgLy8gZmlyc3QgdGltZSwgY3JlYXRlIGZpZWxkc1xuICAgICAgICAgIG1hdGNoZWRQYXJlbnRDYW52YXMuZmllbGRzID0gdXBkYXRlZEZpZWxkcztcbiAgICAgICAgfSBlbHNlIGlmICghbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHMgfHwgIXVwZGF0ZWRGaWVsZHMubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdXNlciB0cmllZCB0byByZW1vdmUgZWxlbWVudHNcbiAgICAgICAgICBpZiAoZHJvcHpvbmVJRCAmJiBtYXRjaGVkUGFyZW50Q2FudmFzLmZpZWxkcykge1xuICAgICAgICAgICAgbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHMgPSBtYXRjaGVkUGFyZW50Q2FudmFzLmZpZWxkc1xuICAgICAgICAgICAgICAuZmlsdGVyKGYgPT4gZi5kcm9wem9uZUlEICE9PSBkcm9wem9uZUlEKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gbWF0Y2hlZCBjYW52YXMgZG9lcyBub3QgaGFzIHN1Y2ggZmllbGQsIGNyZWF0ZSBvbmVcbiAgICAgICAgICAgIG1hdGNoZWRQYXJlbnRDYW52YXMuZmllbGRzID0gdXBkYXRlZEZpZWxkcztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZmllbGRzVG9CZUFkZGVkID0gW107XG5cbiAgICAgICAgICAvLyBpZiB1c2VyIHdvcmtpbmcgb24gbXVsdGkgZHJvcHpvbmUgZmllbGRcbiAgICAgICAgICBjb25zdCBtYXRjaGVkRHJvcHpvbmVGaWVsZHMgPSBtYXRjaGVkUGFyZW50Q2FudmFzLmZpZWxkc1xuICAgICAgICAgICAgLmZpbHRlcihmID0+IGYuZHJvcHpvbmVJRCA9PT0gZHJvcHpvbmVJRCk7XG5cbiAgICAgICAgICBpZiAobWF0Y2hlZERyb3B6b25lRmllbGRzLmxlbmd0aCAhPT0gdXBkYXRlZEZpZWxkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIHNvbWUgb2YgdGhlIGZpZWxkIGdvdCBkZWxldGVkIGZyb20gZHJvcHpvbmVcbiAgICAgICAgICAgIC8vIHJlcGxhY2UgYWxsIGZpZWxkcyB3aXRoIG5ldyBmaWVsZHNcbiAgICAgICAgICAgIG1hdGNoZWRQYXJlbnRDYW52YXMuZmllbGRzID0gdXBkYXRlZEZpZWxkc1xuICAgICAgICAgICAgICAuY29uY2F0KG1hdGNoZWRQYXJlbnRDYW52YXMuZmllbGRzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmID0+IGYuZHJvcHpvbmVJRCAhPT0gZHJvcHpvbmVJRCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVkRmllbGRzLmZvckVhY2goKHVGaWVsZCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBmaWVsZEluZGV4ID0gbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHNcbiAgICAgICAgICAgICAgICAuZmluZEluZGV4KGYgPT4gZi5pZCA9PT0gdUZpZWxkLmlkKTtcblxuICAgICAgICAgICAgICAvLyB1c2VyIHRyeSB0byBhZGQgbmV3IGZpZWxkXG4gICAgICAgICAgICAgIGlmIChmaWVsZEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGZpZWxkc1RvQmVBZGRlZC5wdXNoKHVGaWVsZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBubyBuZXcgZmllbGRzXG4gICAgICAgICAgICBpZiAoIWZpZWxkc1RvQmVBZGRlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgLy8gZWl0aGVyIHVzZXIgaGFzIHVwZGF0ZWQgdGhlIGZpZWxkIG9yIGNoYW5nZWQgdGhlIG9yZGVyXG4gICAgICAgICAgICAgIG1hdGNoZWRQYXJlbnRDYW52YXMuZmllbGRzID0gbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHNcbiAgICAgICAgICAgICAgICAubWFwKChmKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB1RiA9IHVwZGF0ZWRGaWVsZHMuZmluZCh1ZiA9PiB1Zi5pZCA9PT0gZi5pZCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdUYgfHwgZjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBhZGQgbmV3IGZpZWxkIHRvIGV4aXN0aW5nIGFycmF5XG4gICAgICAgICAgaWYgKGZpZWxkc1RvQmVBZGRlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1hdGNoZWRQYXJlbnRDYW52YXMuZmllbGRzID0gbWF0Y2hlZFBhcmVudENhbnZhcy5maWVsZHMuY29uY2F0KGZpZWxkc1RvQmVBZGRlZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuU3RhdHVzID0gdHJ1ZTtcblxuICAgICAgICAvKiBlc2xpbnQgbm8tZWxzZS1yZXR1cm46IDAgKi9cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgY2hpbGRGaWVsZHMgPSBmaWVsZHNbaV0uZmllbGRzO1xuICAgICAgICAgIGxldCBzdGF0dXMgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIGZpZWxkIGhhcyBzdWItZmllbGRzLCBjaGVjayBpbnNpZGUgc3ViLWZpZWxkc1xuICAgICAgICAgIGlmIChjaGlsZEZpZWxkcykge1xuICAgICAgICAgICAgc3RhdHVzID0gdHJhdmVyc2VBbmRVcGRhdGVUcmVlKGRyb3B6b25lSUQsIHBhcmVudElELCB1cGRhdGVkRmllbGRzLCBjaGlsZEZpZWxkcyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXR1cm5TdGF0dXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHByaXZhdGUgZnVuY3Rpb24gdG8gdHJhdmVyc2UgdGhyb3VnaCBlYWNoIG5vZGUgYW5kIHJldHVybiB0aGUgZmllbGQgcGFyZW50XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRyb3B6b25lSURcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGFyZW50SURcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWVsZHMgLSBmaWVsZHMvZWxlbWVudHMgb2YgY3VycmVudCBjYW52YXNcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSAtIFBhcmVudCBlbGVtZW50XG4gICAgICovXG4gICAgY29uc3QgdHJhdmVyc2VBbmRSZXR1cm5QYXJlbnQgPSAoZHJvcHpvbmVJRCwgcGFyZW50SUQsIGZpZWxkcyA9IHN0YXRlLnRyZWUpID0+IHtcbiAgICAgIGNvbnN0IGZvdW5kUGFyZW50ID0gZmllbGRzLmZpbmQoZWxlbWVudCA9PiBlbGVtZW50LmlkID09PSBwYXJlbnRJRCk7XG5cbiAgICAgIGlmICghZm91bmRQYXJlbnQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZmllbGRzW2ldO1xuICAgICAgICAgIGlmIChlbGVtZW50LmZpZWxkcykge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gdHJhdmVyc2VBbmRSZXR1cm5QYXJlbnQoZHJvcHpvbmVJRCwgcGFyZW50SUQsIGVsZW1lbnQuZmllbGRzKTtcbiAgICAgICAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvdW5kUGFyZW50O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBwcml2YXRlIGZ1bmN0aW9uIHRvIHRyYXZlcnNlIHRocm91Z2ggZWFjaCBub2RlIGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBlbGVtZW50SURcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZHJvcHpvbmVJRFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnRJRFxuICAgICAqIEByZXR1cm5zIHtGaWVsZC9PYmplY3R9XG4gICAgICovXG4gICAgY29uc3QgdHJhdmVyc2VBbmRSZXR1cm5FbGVtZW50ID0gKGVsZW1lbnRJRCwgZHJvcHpvbmVJRCwgcGFyZW50SUQpID0+IHtcbiAgICAgIGNvbnN0IGZpZWxkUGFyZW50ID0gdHJhdmVyc2VBbmRSZXR1cm5QYXJlbnQoZHJvcHpvbmVJRCwgcGFyZW50SUQpO1xuICAgICAgaWYgKGZpZWxkUGFyZW50KSB7XG4gICAgICAgIHJldHVybiBmaWVsZFBhcmVudC5maWVsZHMuZmluZChmaWVsZCA9PiBmaWVsZC5pZCA9PT0gZWxlbWVudElEKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHByaXZhdGUgZnVuY3Rpb24gdG8gcmVtb3ZlIHRoZSBmaWVsZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBlbGVtZW50SURcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZHJvcHpvbmVJRFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnRJRFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgY29uc3QgcmVtb3ZlRWxlbWVudCA9IChlbGVtZW50SUQsIGRyb3B6b25lSUQsIHBhcmVudElELCBjYikgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRyYXZlcnNlQW5kUmV0dXJuRWxlbWVudChlbGVtZW50SUQsIGRyb3B6b25lSUQsIHBhcmVudElEKTtcblxuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFbGVtZW50KGVsZW1lbnRJRCwgY2IpO1xuICAgICAgICBycG1FdmVudC5ub3RpZnlFbGVtZW50UmVtb3ZlKHtcbiAgICAgICAgICBlbGVtZW50SUQsIGRyb3B6b25lSUQsIHBhcmVudElELCB0cmFzaGVkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZnVuY3Rpb24gdG8gZmlsdGVyIG91dCBzZW5zaXRpdmUgaW5mb3JtYXRpb24gZnJvbSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9ubHlSZW1vdmVGdW5jdGlvbnMgLSBpbi1jYXNlIG9mIGBnZXRTdG9yYWJsZVN0YXRlYCByZXN1bHQgd2Ugb25seVxuICAgICAqIG5lZWQgdG8gZmlsdGVyIG91dCBmdW5jdGlvbnMgYW5kIGluIG90aGVyIGNhc2VzIHdlIHdpbGwgZmlsdGVyIG91dCBvdGhlciBwcm9wcyBhbHNvXG4gICAgICogYmFzZWQgb24gYHNoYXJlYWJsZUVsZW1lbnRQcm9wc2BcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjb25zdCByZW1vdmVTZW5zaXRpdmVQcm9wcyA9IChlbGVtZW50LCBvbmx5UmVtb3ZlRnVuY3Rpb25zKSA9PiB7XG4gICAgICBjb25zdCBzaGFyZWFibGVFbGVtZW50ID0ge307XG5cbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gcmVtb3ZlIGFsbCBwcml2YXRlL2Z1bmN0aW5hbCBwcm9wZXJ0aWVzXG4gICAgICBPYmplY3Qua2V5cyhlbGVtZW50KS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBlbGVtZW50W2tleV0gIT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAoXG4gICAgICAgICAgICBvbmx5UmVtb3ZlRnVuY3Rpb25zIHx8XG4gICAgICAgICAgICAhb25seVJlbW92ZUZ1bmN0aW9ucyAmJiBzaGFyZWFibGVFbGVtZW50UHJvcHMuaW5kZXhPZihrZXkpICE9PSAtMVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hhcmVhYmxlRWxlbWVudFtrZXldID0gZWxlbWVudFtrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNoYXJlYWJsZUVsZW1lbnQ7XG4gICAgfTtcblxuICAgIC8vIGZ1bmN0aW9uIHRvIHJldHVybiBlbGVtZW50LCBmaWx0ZXIgc2Vuc2l0aXZlIHByb3BzIGJlZm9yZSByZXR1cm5cbiAgICBjb25zdCBnZXRFbGVtZW50ID0gKC4uLmFyZ3MpID0+IHJlbW92ZVNlbnNpdGl2ZVByb3BzKHRyYXZlcnNlQW5kUmV0dXJuRWxlbWVudCguLi5hcmdzKSk7XG5cbiAgICAvKipcbiAgICAgKiBwcml2YXRlIGZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgZXhpc2l0aW5nIGZpZWxkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGVsZW1lbnRJRFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkcm9wem9uZUlEXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmVudElEXG4gICAgICogQHBhcmFtIHtFbGVtZW50L09iamVjdH0gbmV3RGF0YSAtIHsgaWQsIHR5cGUsIG5hbWUsIHBheWxvYWQgfVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgY29uc3QgdXBkYXRlRWxlbWVudCA9IChlbGVtZW50SUQsIGRyb3B6b25lSUQsIHBhcmVudElELCBuZXdEYXRhLCBjYikgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRyYXZlcnNlQW5kUmV0dXJuRWxlbWVudChlbGVtZW50SUQsIGRyb3B6b25lSUQsIHBhcmVudElEKTtcblxuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC51cGRhdGVFbGVtZW50KHtcbiAgICAgICAgICAuLi5uZXdEYXRhLFxuICAgICAgICAgIGlkOiBlbGVtZW50SURcbiAgICAgICAgfSwgY2IpO1xuXG4gICAgICAgIHJwbUV2ZW50Lm5vdGlmeUVsZW1lbnRVcGRhdGUoZ2V0RWxlbWVudChlbGVtZW50SUQsIGRyb3B6b25lSUQsIHBhcmVudElEKSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLy8gZnVuY3Rpb24gdG8gdHJhdmVyc2UgdGhyb3VnaCBhbGwgbm9kZVxuICAgIC8vIHJlbW92ZSBhbGwgcHJpdmF0ZS9mdW5jdGlvbmFsIHByb3BlcnRpZXNcbiAgICAvLyBhbmQgcmV0dXJuIGZsYXQgb2JqZWN0IGZvciBlYWNoIG5vZGVcbiAgICBjb25zdCB0cmF2ZXJzZUFuZFRha2VTbmFwc2hvdCA9IChlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBzdWJGaWVsZHMgPSBbXTtcbiAgICAgIC8vIHJlbW92ZSBhbGwgZnVuY3RpbmFsIHByb3BlcnRpZXNcbiAgICAgIGNvbnN0IG5lY2Vzc2FyeURldGFpbHMgPSByZW1vdmVTZW5zaXRpdmVQcm9wcyhlbGVtZW50LCB0cnVlKTtcblxuICAgICAgLy8gY2hlY2sgZm9yIHN1YiBmaWVsZHMgYW5kIHBlcmZvcm0gc2FtZSBvcGVyYXRpb25zIHJlY3Vyc2l2ZWx5XG4gICAgICBpZiAoZWxlbWVudC5maWVsZHMgJiYgZWxlbWVudC5maWVsZHMubGVuZ3RoKSB7XG4gICAgICAgIGVsZW1lbnQuZmllbGRzLmZvckVhY2goKGYpID0+IHtcbiAgICAgICAgICBzdWJGaWVsZHMucHVzaCh0cmF2ZXJzZUFuZFRha2VTbmFwc2hvdChmKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiBhcHBlbmQgaW5pdGlhbEVsZW1lbnRzIGFuZCB1cGRhdGVkIGZpZWxkc1xuICAgICAgaWYgKHN1YkZpZWxkcy5sZW5ndGgpIHtcbiAgICAgICAgbmVjZXNzYXJ5RGV0YWlscy5pbml0aWFsRWxlbWVudHMgPSBbXTtcbiAgICAgICAgbmVjZXNzYXJ5RGV0YWlscy5maWVsZHMgPSBbXTtcblxuICAgICAgICBzdWJGaWVsZHMuZm9yRWFjaCgoc2YpID0+IHtcbiAgICAgICAgICBuZWNlc3NhcnlEZXRhaWxzLmluaXRpYWxFbGVtZW50cy5wdXNoKHNmKTtcbiAgICAgICAgICBuZWNlc3NhcnlEZXRhaWxzLmZpZWxkcy5wdXNoKHNmKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHJldHVybiBmbGF0IG9iamVjdCB3aGljaCByZXByZXNlbnQgY3VycmVudCBub2RlIGluIHRyZWVcbiAgICAgIHJldHVybiBuZWNlc3NhcnlEZXRhaWxzO1xuICAgIH07XG5cbiAgICAvLyBmdW5jdGlvbiB0byB1cGRhdGUgdGhlIHN0YXRlXG4gICAgLy8gb25jZSB1cGRhdGUgaXMgZG9uZSB0aGVuIHRyaWdnZXJzIENCIGFuZCBub3RpZnlTdGF0ZUNoYW5nZVxuICAgIHRoaXMudXBkYXRlU3RhdGUgPSAoZHJvcHpvbmVJRCwgcGFyZW50SUQsIGZpZWxkcywgY2IgPSAoKSA9PiB7fSwgZGlzcGF0Y2hFbGVtZW50UmVtb3ZlKSA9PiB7XG4gICAgICB0cmF2ZXJzZUFuZFVwZGF0ZVRyZWUoZHJvcHpvbmVJRCwgcGFyZW50SUQsIGZpZWxkcyk7XG4gICAgICBjYihzdGF0ZS50cmVlKTtcbiAgICAgIHJwbUV2ZW50Lm5vdGlmeVN0YXRlQ2hhbmdlKCk7XG5cbiAgICAgIC8vIGRpc3BhdGNoIGVsZW1lbnRSZW1vdmUgZXZlbnQgaWYgbmVjZXNzYXJ5XG4gICAgICBpZiAoZGlzcGF0Y2hFbGVtZW50UmVtb3ZlKSB7XG4gICAgICAgIHJwbUV2ZW50Lm5vdGlmeUVsZW1lbnRSZW1vdmUoe1xuICAgICAgICAgIGRyb3B6b25lSUQsXG4gICAgICAgICAgcGFyZW50SUQsXG4gICAgICAgICAgZGlzcGF0Y2hFbGVtZW50UmVtb3ZlLFxuICAgICAgICAgIC8vIGp1c3QgdG8gZGlzdGluZ3Vpc2ggd2hldGhlciBmaWVsZCByZW1vdmVkIGZyb20gYHJlbW92ZUZpZWxkYCBBUEkgb3IgdHJhc2ggY29tcG9uZW50XG4gICAgICAgICAgdHJhc2hlZDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gZnVuY3Rpb24gdG8gcmV0dXJuIGVsZW1lbnQgcGFyZW50XG4gICAgdGhpcy5nZXRFbGVtZW50UGFyZW50ID0gdHJhdmVyc2VBbmRSZXR1cm5QYXJlbnQ7XG5cbiAgICAvLyBmdW5jdGlvbiB0byByZXR1cm4gZWxlbWVudFxuICAgIHRoaXMuZ2V0RWxlbWVudCA9IGdldEVsZW1lbnQ7XG5cbiAgICAvLyBmdW5jdGlvbiB0byByZW1vdmUgZWxlbWVudFxuICAgIHRoaXMucmVtb3ZlRWxlbWVudCA9IHJlbW92ZUVsZW1lbnQ7XG5cbiAgICAvLyBmdW5jdGlvbiB0byB1cGRhdGUgZWxlbWVudFxuICAgIHRoaXMudXBkYXRlRWxlbWVudCA9IHVwZGF0ZUVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB0byByZXR1cm4gY3VycmVudCBzdGF0ZSBvZiB0cmVlIChhcyBpcylcbiAgICAgKiBrZWVwaW5nIHRoaXMgZnVuY3Rpb24gdG8gZ2l2ZSBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICogQHBhcmFtIHtPYmplY3R9IC0gc3RhdGUgdHJlZVxuICAgICAqL1xuICAgIHRoaXMuZ2V0U3RhdGUgPSAoKSA9PiAoc3RhdGUudHJlZSk7XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB0byByZXR1cm4gc3RvcmFibGUgY3VycmVudCBzdGF0ZVxuICAgICAqIHRoaXMgZnVuY3Rpb24gZG9lcyBzYW1lIGpvYiBhcyBnZXRTdGF0ZSBvbmx5IGl0IG1ha2Ugc3VyZVxuICAgICAqIHJldHVybmVkIGRhdGEgaXMgaW4gcHJvcGVyIGZvcm1hdCBhbmQgdW5lY2Vzc2FyeSBwcm9wZXJ0aWVzIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gLSBzdGF0ZSB0cmVlXG4gICAgICovXG4gICAgdGhpcy5nZXRTdG9yYWJsZVN0YXRlID0gKCkgPT4gKHN0YXRlLnRyZWVbMF0uZmllbGRzXG4gICAgICAubWFwKGYgPT4gdHJhdmVyc2VBbmRUYWtlU25hcHNob3QoZikpKTtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIGNsZWFyIHRoZSBzdGF0ZVxuICAgICAqIGxvb3AgdGhvdWdoIGFsbCBwYXJlbnQoZW5kIGxldmVsKSBub2RlcywgYW5kIGNhbGwgYGZsdXNoRHJvcHBlZEVsZW1lbnRzYCBmdW5jdGlvblxuICAgICAqIHNvIHRoYXQgY29tcG9uZW50IGFzIHdlbGwgYXMgYXBwbGljYXRpb24gc3RhdGUgZ2V0cyBmbHVzaGVkXG4gICAgICovXG4gICAgdGhpcy5jbGVhclN0YXRlID0gKGNiID0gKCkgPT4ge30pID0+IHtcbiAgICAgIGNvbnN0IHJvb3ROb2RlID0gc3RhdGUudHJlZVswXTtcbiAgICAgIGNvbnN0IHRvcExldmVsRmllbGRzID0gcm9vdE5vZGUuZmllbGRzLmxlbmd0aDtcblxuICAgICAgLy8gY2FudmFzIGlzIGVtcHR5LCBqdXN0IG5vdGlmeSBvdGhlclxuICAgICAgaWYgKCFyb290Tm9kZS5maWVsZHMubGVuZ3RoKSB7XG4gICAgICAgIHJwbUV2ZW50Lm5vdGlmeVN0YXRlRmx1c2goKTtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cblxuICAgICAgcm9vdE5vZGUuZmllbGRzLmZvckVhY2goKHRvcExldmVsRWxlbWVudCwgaSkgPT4ge1xuICAgICAgICB0b3BMZXZlbEVsZW1lbnQuZmx1c2hEcm9wcGVkRWxlbWVudHMoKCkgPT4ge1xuICAgICAgICAgIGlmIChpID09PSB0b3BMZXZlbEZpZWxkcyAtIDEpIHtcbiAgICAgICAgICAgIHJwbUV2ZW50Lm5vdGlmeVN0YXRlRmx1c2godHJ1ZSk7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIGFkZCBldmVudFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiAtIGNhbGxiYWNrXG4gICAgICovXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyID0gcnBtRXZlbnQuYWRkRXZlbnRMaXN0ZW5lcjtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRvIHJlbW92ZSBldmVudFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiAtIGNhbGxiYWNrXG4gICAgICovXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyID0gcnBtRXZlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgfVxufVxuXG5jb25zdCBzdGF0ZSA9IG5ldyBTdGF0ZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBzdGF0ZTtcbiIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuXG5pbXBvcnQgc3RhdGUgZnJvbSAnLi4vLi4vY29yZS9zdGF0ZSc7XG5pbXBvcnQgY29yZSBmcm9tICcuLi8uLi9jb3JlL2NvcmUnO1xuXG5jbGFzcyBEcm9wem9uZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgLy8gY3JlYXRlIHJlZnJlbmNlIGZvciBjYW52YXNcbiAgICAvLyB0byBjaGVjayB3aGV0aGVyIGlzIGRyYWdnaW5nIG9uIGN1cnJlbnQgY2FudmFzIG9yIG5vdFxuICAgIHRoaXMuY2FudmFzUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG5cbiAgICAvLyBjb21wb25lbnQgc3RhdGVcbiAgICAvLyBpbml0aWFsRWxlbWVudHMgLSB0byBrZWVwIHRyYWNrIG9mIGluaXRpYWwgZWxlbWVudHNcbiAgICAvLyBkcm9wcGVkRWxlbWVudHMgLSB0byBrZWVwIHRyYWNrIG9mIG5ld2x5IGFkZGVkIGVsZW1lbnRzXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGluaXRpYWxFbGVtZW50czogW10sXG4gICAgICBkcm9wcGVkRWxlbWVudHM6IFtdLFxuICAgICAgaW5pdERvbmU6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLl9zZXRJbml0aWFsRWxlbWVudHModGhpcy5wcm9wcy5pbml0aWFsRWxlbWVudHMpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyh7IGluaXRpYWxFbGVtZW50cyB9KSB7XG4gICAgdGhpcy5fc2V0SW5pdGlhbEVsZW1lbnRzKGluaXRpYWxFbGVtZW50cyk7XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gYWxsb3cgbWFudWFsIGVsZW1lbnQgdXBkYXRlXG4gICAqIE5vdGUgLSBmdW5jdGlvbiBpcyBvbmx5IGFjY2Vzc2libGUgdGhyb3VnaCByZWYgYW5kIG1ha2Ugc3VyZVxuICAgKiB2YWxpZCBkYXRhIGlzIHBhc3MgdGhyb3VnaCBlbHNlIGFwcGxpY2F0aW9uIHN0YXRlL2hpZXJhcmNoeSBjYW4gYnJlYWtcbiAgICogQHBhcmFtIGRhdGEge0FycmF5L0Z1bmN0aW9ufSAtIGlmIGl0cyBmdW5jdGlvbiB0aGVuIG1ha2Ugc3VyZSB5b3UgYXJlXG4gICAqIHJldHVybmluZyB2YWxpZGEgYXJyYXlcbiAgICogQHBhcmFtIGRvbmUge2Z1bmN0aW9ufSAtIHN1Y2Nlc3MgY2FsbCBiYWNrIGZ1bmN0aW9uXG4gICAqL1xuICBkYW5nZXJvdXNseVNldEVsZW1lbnRzID0gKGRhdGEsIGRvbmUpID0+IHtcbiAgICBsZXQgZWxlbWVudHMgPSBbXTtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGVsZW1lbnRzID0gZGF0YSh0aGlzLnN0YXRlLmRyb3BwZWRFbGVtZW50cykgfHwgW107XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnRzID0gZGF0YTtcbiAgICB9XG4gICAgY29uc3QgeyBpZDogZHJvcHpvbmVJRCwgcGFyZW50SUQgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBlbGVtZW50cyA9IGVsZW1lbnRzLm1hcChlID0+ICh7XG4gICAgICAuLi5lLFxuICAgICAgZHJvcHpvbmVJRCxcbiAgICAgIHBhcmVudElELFxuICAgICAgc2hvd0Jhc2ljQ29udGVudDogZmFsc2UsXG4gICAgICB1cGRhdGVTdGF0ZTogdGhpcy5fdXBkYXRlU3RhdGUsXG4gICAgICByZW1vdmVFbGVtZW50OiB0aGlzLl9yZW1vdmVFbGVtZW50LFxuICAgICAgdXBkYXRlRWxlbWVudDogdGhpcy5fdXBkYXRlRWxlbWVudCxcbiAgICAgIGZsdXNoRHJvcHBlZEVsZW1lbnRzOiB0aGlzLl9mbHVzaERyb3BwZWRFbGVtZW50cyxcbiAgICAgIGNoZWNrQW5kUmVtb3ZlRWxlbWVudDogdGhpcy5fY2hlY2tBbmRSZW1vdmVFbGVtZW50XG4gICAgfSkpO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpbml0aWFsRWxlbWVudHM6IGVsZW1lbnRzLFxuICAgICAgZHJvcHBlZEVsZW1lbnRzOiBlbGVtZW50c1xuICAgIH0sICgpID0+IHRoaXMuX3VwZGF0ZVN0YXRlKGRvbmUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byByZW1vdmUgYmVmb3JlL2FmdGVyIGNsYXNzIGZvcm0gYWxsIGNhbnZhcyBlbGVtZW50c1xuICAgKi9cbiAgX3VubWFya0RyYWdFbGVtZW50cyA9ICgpID0+IHtcbiAgICBbXS5mb3JFYWNoLmNhbGwodGhpcy5jYW52YXNSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJhZy1pdGVtJyksIGUgPT4gZS5jbGFzc0xpc3QucmVtb3ZlKCdiZWZvcmUnLCAnYWZ0ZXInKSk7XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gc2V0IGluaXRpYWwgZWxlbWVudHNcbiAgICogQHBhcmFtIGluaXRpYWxFbGVtZW50cyB7QXJyYXl9IC0gSXQgaG9sZHMgYWxsIGluaXRpYWwgZWxlbWVudHMgdG8gYmUgc2hvd24gaW4gY2FudmFzXG4gICAqL1xuICBfc2V0SW5pdGlhbEVsZW1lbnRzID0gKGluaXRpYWxFbGVtZW50cykgPT4ge1xuICAgIC8vIGN1cnJlbnQgY29tcG9uZW50IHN0YXRlKGRyb3BwZWRFbGVtZW50cykgZG9lc24ndCBob2xkIGFueSBlbGVtZW50c1xuICAgIC8vIGJ1dCBpbml0aWFsRWxlbWVudHMgaGFzIHNvbWUgZWxlbWVudCB0byBiZSBzZXRcbiAgICBjb25zdCBnb3RJbml0aWFsSXRlbXMgPSBBcnJheS5pc0FycmF5KGluaXRpYWxFbGVtZW50cykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsRWxlbWVudHMubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUuaW5pdERvbmUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5zdGF0ZS5pbml0aWFsRWxlbWVudHMubGVuZ3RoO1xuXG4gICAgLy8gZm9yIGZpcnN0IHRpbWUgYWRkIGluaXRpYWxFbGVtZW50cyB0byBkcm9wcGVkRWxlbWVudHNcbiAgICBpZiAoZ290SW5pdGlhbEl0ZW1zKSB7XG4gICAgICBjb25zdCB7IGlkOiBkcm9wem9uZUlELCBwYXJlbnRJRCB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IHVwZGF0ZWRJbml0aWFsSXRlbXMgPSBpbml0aWFsRWxlbWVudHMubWFwKGUgPT4gKHtcbiAgICAgICAgLi4uZSxcbiAgICAgICAga2V5OiBlLmlkLFxuICAgICAgICBkcm9wem9uZUlELFxuICAgICAgICBwYXJlbnRJRCxcbiAgICAgICAgc2hvd0Jhc2ljQ29udGVudDogZmFsc2UsXG4gICAgICAgIHVwZGF0ZVN0YXRlOiB0aGlzLl91cGRhdGVTdGF0ZSxcbiAgICAgICAgcmVtb3ZlRWxlbWVudDogdGhpcy5fcmVtb3ZlRWxlbWVudCxcbiAgICAgICAgdXBkYXRlRWxlbWVudDogdGhpcy5fdXBkYXRlRWxlbWVudCxcbiAgICAgICAgZmx1c2hEcm9wcGVkRWxlbWVudHM6IHRoaXMuX2ZsdXNoRHJvcHBlZEVsZW1lbnRzLFxuICAgICAgICBjaGVja0FuZFJlbW92ZUVsZW1lbnQ6IHRoaXMuX2NoZWNrQW5kUmVtb3ZlRWxlbWVudFxuICAgICAgfSkpO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaW5pdGlhbEVsZW1lbnRzOiB1cGRhdGVkSW5pdGlhbEl0ZW1zLFxuICAgICAgICBkcm9wcGVkRWxlbWVudHM6IHVwZGF0ZWRJbml0aWFsSXRlbXNcbiAgICAgIH0sICgpID0+ICh0aGlzLl91cGRhdGVTdGF0ZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGluaXREb25lOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSkpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gdG9nZ2xlL21hbmFnZSBjbGFzcyhpbnNpZGUpXG4gICAqIGNsYXNzIGdldHMgYXBwZW5kZWQgdG8gY2FudmFzXG4gICAqIEBwYXJhbSB0YXJnZXQge0RPTX0gLSBjdXJyZW50IGNhbnZhcyB1cG9uIHdoaWNoIHVzZSBpcyBob3ZlcmluZ1xuICAgKiBAcGFyYW0gYWN0aW9uIHtTdHJpbmd9IC0gYWRkL3JlbW92ZSAtIG5hbWUgb2YgYWN0aW9uXG4gICAqL1xuICBfbWFuYWdlSW5zaWRlQ2xhc3MgPSAoeyB0YXJnZXQgfSwgYWN0aW9uKSA9PiB7XG4gICAgaWYgKHRoaXMuY2FudmFzUmVmLmN1cnJlbnQgPT09IHRhcmdldCkge1xuICAgICAgdGFyZ2V0LmNsYXNzTGlzdFthY3Rpb25dKCdpbnNpZGUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gcmVtb3ZlIGVsZW1lbnQgZnJvbSBkcm9wcGVkRWxlbWVudHNcbiAgICogQHBhcmFtIGVsZW1lbnRJRCAtIHtTdHJpbmd9IC0gSUQgb2YgZWxlbWVudFxuICAgKiBAcGFyYW0gY2IgLSB7ZnVuY3Rpb259XG4gICAqIEBwYXJhbSBkaXNwYXRjaEVsZW1lbnRSZW1vdmUge0Jvb2xlYW59IC0gdHJpZ2dlciBgcmVtb3ZlRWxlbWVudGAgZXZlbnQgaWYgaXRzIHRydWVcbiAgICovXG4gIF9yZW1vdmVFbGVtZW50ID0gKGVsZW1lbnRJRCwgY2IgPSAoKSA9PiB7fSwgZGlzcGF0Y2hFbGVtZW50UmVtb3ZlKSA9PiB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnN0YXRlLmRyb3BwZWRFbGVtZW50cy5maW5kSW5kZXgoZSA9PiBlLmlkID09PSBlbGVtZW50SUQpO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkcm9wcGVkRWxlbWVudHM6IHRoaXMuc3RhdGUuZHJvcHBlZEVsZW1lbnRzLmZpbHRlcigoZCwgaSkgPT4gKGkgIT09IGluZGV4KSlcbiAgICB9LCAoKSA9PiB0aGlzLl91cGRhdGVTdGF0ZShjYiwgZGlzcGF0Y2hFbGVtZW50UmVtb3ZlID8gZWxlbWVudElEIDogbnVsbCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIHVwZGF0ZSBlbGVtZW50IGZyb20gZHJvcHBlZEVsZW1lbnRzXG4gICAqIEBwYXJhbSBuZXdEYXRhIC0ge2VsZW1lbnR9IC0geyBpZCwgbmFtZSwgdHlwZSwgcGF5bG9hZCB9XG4gICAqIEBwYXJhbSBjYiAtIHtmdW5jdGlvbn1cbiAgICovXG4gIF91cGRhdGVFbGVtZW50ID0gKG5ld0RhdGEsIGNiID0gKCkgPT4ge30pID0+IHtcbiAgICBjb25zdCBlbGVtZW50SW5kZXggPSB0aGlzLnN0YXRlLmRyb3BwZWRFbGVtZW50cy5maW5kSW5kZXgoZSA9PiBlLmlkID09PSBuZXdEYXRhLmlkKTtcblxuICAgIGlmIChlbGVtZW50SW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gY2IobnVsbCk7XG4gICAgfVxuXG4gICAgLy8gc3VwcG9ydCBpcyBsaW1pdGVkIHRvIGJlbG93IGtleXMgb25seSwgdG8gYXZvaWQgcG9zc2libGUgYnJlYWtzXG4gICAgY29uc3Qgc3VwcG9ydGVkS2V5cyA9IFsnbmFtZScsICd0eXBlJywgJ3BheWxvYWQnXTtcbiAgICBjb25zdCBuZXdFbGVtZW50RGF0YSA9IHt9O1xuICAgIE9iamVjdC5rZXlzKG5ld0RhdGEpXG4gICAgICAuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmIChzdXBwb3J0ZWRLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHtcbiAgICAgICAgICBuZXdFbGVtZW50RGF0YVtrZXldID0gbmV3RGF0YVtrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZHJvcHBlZEVsZW1lbnRzOiB0aGlzLnN0YXRlLmRyb3BwZWRFbGVtZW50c1xuICAgICAgICAubWFwKChlKSA9PiB7XG4gICAgICAgICAgaWYgKGUuaWQgPT09IG5ld0RhdGEuaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmUsIC4uLm5ld0VsZW1lbnREYXRhIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH0pXG4gICAgfSwgKCkgPT4gdGhpcy5fdXBkYXRlU3RhdGUoY2IpKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgYXBwbGljYXRpb24gc3RhdGUgKG5vdCBjb21wb25lbnQgc3RhdGUpXG4gICAqIGZ1bmN0aW9uIHdpbGwgZnVydGhlciBjYWxsIGB1cGRhdGVTdGF0ZWAgZnJvbSBzdGF0ZSBBUEksIHdoaWNoIHVwZGF0ZXMgdGhlIGFwcGxpY2F0aW9uIHN0YXRlXG4gICAqIEBwYXJhbSBjYiB7ZnVuY3Rpb259IC0gY2FsbGJhY2sgZnVuY3Rpb24gLSBvcHRpb25hbFxuICAgKi9cbiAgX3VwZGF0ZVN0YXRlID0gKGNiID0gKCkgPT4ge30sIGRpc3BhdGNoRWxlbWVudFJlbW92ZSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGlkOiBkcm9wem9uZUlELFxuICAgICAgcGFyZW50SURcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIHN0YXRlLnVwZGF0ZVN0YXRlKFxuICAgICAgZHJvcHpvbmVJRCxcbiAgICAgIHBhcmVudElELFxuICAgICAgdGhpcy5zdGF0ZS5kcm9wcGVkRWxlbWVudHMsXG4gICAgICBjYixcbiAgICAgIGRpc3BhdGNoRWxlbWVudFJlbW92ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gZmx1c2ggdGhlIGNvbXBvbmVudCBzdGF0ZVxuICAgKiBvbmNlIGNvbXBvbmVudCBzdGF0ZSB0aHMgZmx1c2hlZCwgdGhpcyB3aWxsIGNhbGwgYF91cGRhdGVTdGF0ZWAgdG8gdXBkYXRlIHRoZVxuICAgKiBhcHBsaWNhdGlvbiBzdGF0ZVxuICAgKiBAcGFyYW0gY2Ige2Z1bmN0aW9ufSAtIGNhbGxiYWNrIGZ1bmN0aW9uIC0gb3B0aW9uYWxcbiAgICovXG4gIF9mbHVzaERyb3BwZWRFbGVtZW50cyA9IChjYiA9ICgpID0+IHt9KSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpbml0aWFsRWxlbWVudHM6IFtdLFxuICAgICAgZHJvcHBlZEVsZW1lbnRzOiBbXVxuICAgIH0sICgpID0+ICh0aGlzLl91cGRhdGVTdGF0ZShjYikpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiBjaGVjayBiZWxvdyBwYXJhbWV0ZXJzXG4gICAqIDEgLSB1c2VyJ3MgaW50ZW5kIGlzIHRvIG1vdmUgZWxlbWVudCBmcm9tIG9uZSBjYW52YXMgdG8gb3RoZXJcbiAgICogMiAtIEdldCBjb25maXJtYXRpb24gYmVmb3JlIHJlbW92ZVxuICAgKiBvbmNlIGJvdGggY29uZGl0aW9uIG1hdGNoZWQgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gY3VycmVudCBjYW52YXNcbiAgICovXG4gIF9jaGVja0FuZFJlbW92ZUVsZW1lbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudE1vdmVkID0gY29yZS5nZXREcmFnZ2VkRWxlbWVudCgpO1xuICAgIGNvbnN0IHsgcmVtb3ZlRWxlbWVudCwgZWxlbWVudElEIH0gPSBlbGVtZW50TW92ZWQ7XG4gICAgY29uc3Qgc3RhdHVzID0gdGhpcy5wcm9wcy5vbkVsZW1lbnRNb3ZlKGVsZW1lbnRNb3ZlZCk7XG4gICAgY29uc3QgYXR0ZW1wdFRvTW92ZSA9ICFjb3JlLmdldEF0dGVtcHRUb1JlbW92ZSgpO1xuXG4gICAgaWYgKHN0YXR1cyAmJiBhdHRlbXB0VG9Nb3ZlKSB7XG4gICAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRJRCk7XG4gICAgfVxuICB9XG5cbiAgLy8gdXNlciBpcyBkcmFnZ2luZyBvdmVyIHRoZSBjYW52YXNcbiAgLy8gYHByZXZlbnREZWZhdWx0YCAtIFJlcXVpcmVkLiBBbGxvd3MgdXMgdG8gZHJvcC5cbiAgLy8gQHBhcmFtIGUge2V2ZW50fVxuICBfb25EcmFnT3ZlciA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogdXNlciBpcyBsZWF2aW5nIHRoZSBjYW52YXNcbiAgICogQHBhcmFtIGUge2V2ZW50fVxuICAgKi9cbiAgX29uRHJhZ0xlYXZlID0gKGUpID0+IHtcbiAgICB0aGlzLl9tYW5hZ2VJbnNpZGVDbGFzcyhlLCAncmVtb3ZlJyk7XG4gICAgY29yZS5zZXRBdHRlbXB0VG9SZW1vdmUodHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogdXNlciBpcyBkcmFnZ2luZyBvdmVyIGNhbnZhc1xuICAgKiBAcGFyYW0gZSB7ZXZlbnR9XG4gICAqL1xuICBfb25EcmFnRW50ZXIgPSAoZSkgPT4ge1xuICAgIHRoaXMuX21hbmFnZUluc2lkZUNsYXNzKGUsICdhZGQnKTtcbiAgICBjb3JlLnNldEF0dGVtcHRUb1JlbW92ZShmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogdXNlIGhhcyBkcm9wcGVkIHRoZSBlbGVtZW50IGludG8gdGhlIGNhbnZhc1xuICAgKiBwZXJmb3JtIGFsbCByZXF1aXJlZCBjaGVja3NcbiAgICogZnVuY3Rpb24gYWxzbyB0cmlnZ2VycyBgb25Ecm9wYCBwcm9wIHNvIHRoYXQgdXNldCBjYW4gcHJvdmlkZSBhZGRpdGlvbmFsIGluZm9cbiAgICogb25jZSBhbGwgZG9uZSBgX2FkZEVsZW1lbnRgIGdldCBjYWxsZWQgd2l0aCBhbGwgcmVxdWlyZWQgaW5mb1xuICAgKiBAcGFyYW0gZSB7ZXZlbnR9XG4gICAqL1xuICBfb25Ecm9wID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCB7IGRyb3BwZWRFbGVtZW50cyB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGNvcmUuc2V0QXR0ZW1wdFRvUmVtb3ZlKGZhbHNlKTtcbiAgICB0aGlzLl9tYW5hZ2VJbnNpZGVDbGFzcyhlLCAncmVtb3ZlJyk7XG5cbiAgICBjb25zdCB7IG9uRHJvcCB9ID0gdGhpcy5wcm9wcztcbiAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2UoZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgnZGF0YScpKTtcbiAgICBkYXRhID0geyAuLi5kYXRhIH07XG5cbiAgICB0aGlzLl91bm1hcmtEcmFnRWxlbWVudHMoKTtcblxuICAgIHJldHVybiBvbkRyb3AgPyBvbkRyb3AoZGF0YSwgdGhpcy5fYWRkRWxlbWVudCwge1xuICAgICAgZHJvcEluZGV4OiAhZHJvcHBlZEVsZW1lbnRzLmxlbmd0aCA/IGNvcmUuZ2V0RHJvcFBvc3Rpb24oKSArIDEgOiAwLFxuICAgICAgY3VycmVudEVsZW1lbnRzOiBkcm9wcGVkRWxlbWVudHNcbiAgICB9KSA6IHRoaXMuX2FkZEVsZW1lbnQoZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gYWRkIGVsZW1lbnQgaW50byBkcm9wcGVkRWxlbWVudHNcbiAgICogcHJpb3IgdG8gYWRkIGl0IHBlcmZvbSBiZWxvdyBjaGVja1xuICAgKiAxIC0gZWxlbWVudCBoYXMgdW5pcXVlIGtleVxuICAgKiAyIC0gZWxlbWVudCBoYXMgaW52YWxpZCBkYXRhXG4gICAqIDMgLSBjaGVjayBhZ2FpbnN0IG1heC1jYXBhY2l0eVxuICAgKiBvbmNlIGVsZW1lbnQgYWRkZWQgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gcHJldmlvdXMgY2FudmFzXG4gICAqIEBwYXJhbSB1cGRhdGVkRGF0YSB7T2JqZWN0fSAtIGVsZW1lbnQgaW5mb3JtYXRpb25cbiAgICogQHJldHVybnMgT2JqZWN0IC0gbmV3IGxpc3Qgb2YgY2FudmFzIGVsZW1lbnRzXG4gICAqL1xuICBfYWRkRWxlbWVudCA9ICh1cGRhdGVkRGF0YSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGlkOiBkcm9wem9uZUlELFxuICAgICAgY2FwYWNpdHksXG4gICAgICBwYXJlbnRJRCxcbiAgICAgIGFsbG93SG9yaXpvbnRhbFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGRyb3BQb3NpdGlvbiA9IGNvcmUuZ2V0RHJvcFBvc3Rpb24oKTtcbiAgICBjb25zdCBkcmFnZ2VkRWxlbWVudCA9IGNvcmUuZ2V0RHJhZ2dlZEVsZW1lbnQoKTtcbiAgICBjb25zdCBpbnZhbGlkVXBkYXRlZERhdGEgPSAhdXBkYXRlZERhdGEgfHwgIXVwZGF0ZWREYXRhLmlkO1xuICAgIGxldCBpbmRleE9mUHJlc2VudEVsZW1lbnQgPSAtMTtcbiAgICBjb25zdCBrZXlBbHJlYWR5UHJlc2VudCA9IHVwZGF0ZWREYXRhLmlkICYmXG4gICAgICB0aGlzLnN0YXRlLmRyb3BwZWRFbGVtZW50cy5maWx0ZXIoKGUsIGkpID0+IHtcbiAgICAgICAgaWYgKGUuaWQgPT09IHVwZGF0ZWREYXRhLmlkKSB7XG4gICAgICAgICAgaW5kZXhPZlByZXNlbnRFbGVtZW50ID0gaTtcblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSkubGVuZ3RoO1xuICAgIGNvbnN0IGlzU2FtZUluZGV4ID0gaW5kZXhPZlByZXNlbnRFbGVtZW50ID09PSBkcm9wUG9zaXRpb247XG4gICAgbGV0IG5ld0VsZW1lbnRzID0gW10uY29uY2F0KHRoaXMuc3RhdGUuZHJvcHBlZEVsZW1lbnRzKTtcbiAgICBsZXQgZWxlbWVudEFscmVhZHlSZW1vdmVkID0gZmFsc2U7XG5cbiAgICAvLyBjaGVjayBmbyB1bmlxdWUga2V5XG4gICAgaWYgKGludmFsaWRVcGRhdGVkRGF0YSB8fCBrZXlBbHJlYWR5UHJlc2VudCkge1xuICAgICAgaWYgKGlzU2FtZUluZGV4KSB7XG4gICAgICAgIHJldHVybiBjb3JlLmVycm9yKCdEdXBsaWNhdGUgb3IgaW52YWxpZCBJRCcpO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50QWxyZWFkeVJlbW92ZWQgPSB0cnVlO1xuICAgICAgbmV3RWxlbWVudHMgPSBuZXdFbGVtZW50cy5tYXAoKGUpID0+IHtcbiAgICAgICAgaWYgKGUuaWQgPT09IHVwZGF0ZWREYXRhLmlkKSB7XG4gICAgICAgICAgcmV0dXJuIHsgLi4uZSwgcmVtb3ZlOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgaW5pdGlhbEVsZW1lbnRzVG9CaW5kID0gbnVsbDtcbiAgICBpZiAodXBkYXRlZERhdGEucGFyZW50SUQgJiYgdXBkYXRlZERhdGEuZHJvcHpvbmVJRCkge1xuICAgICAgY29uc3Qgb2xkQ29weSA9IHN0YXRlLnRyYXZlcnNlQW5kUmV0dXJuRWxlbWVudCh1cGRhdGVkRGF0YS5pZCwgdXBkYXRlZERhdGEuZHJvcHpvbmVJRCwgdXBkYXRlZERhdGEucGFyZW50SUQpO1xuICAgICAgaW5pdGlhbEVsZW1lbnRzVG9CaW5kID0gb2xkQ29weSAmJiBvbGRDb3B5LmZpZWxkcyB8fCBbXTtcbiAgICAgIGNvbnN0IGFzc2lnbkluaXRpYWxFbGVtZW50cyA9IChsaXN0KSA9PiB7XG4gICAgICAgIGxpc3QuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICBpZiAoZS5maWVsZHMpIHtcbiAgICAgICAgICAgIGUuaW5pdGlhbEVsZW1lbnRzID0gZS5maWVsZHM7XG4gICAgICAgICAgICBhc3NpZ25Jbml0aWFsRWxlbWVudHMoZS5maWVsZHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGFzc2lnbkluaXRpYWxFbGVtZW50cyhpbml0aWFsRWxlbWVudHNUb0JpbmQpO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnRUb0Ryb3AgPSB7XG4gICAgICAuLi51cGRhdGVkRGF0YSxcbiAgICAgIGtleTogdXBkYXRlZERhdGEuaWQsXG4gICAgICBkcm9wem9uZUlELFxuICAgICAgcGFyZW50SUQsXG4gICAgICBhbGxvd0hvcml6b250YWwsXG4gICAgICBzaG93QmFzaWNDb250ZW50OiBmYWxzZSxcbiAgICAgIHVwZGF0ZVN0YXRlOiB0aGlzLl91cGRhdGVTdGF0ZSxcbiAgICAgIHJlbW92ZUVsZW1lbnQ6IHRoaXMuX3JlbW92ZUVsZW1lbnQsXG4gICAgICB1cGRhdGVFbGVtZW50OiB0aGlzLl91cGRhdGVFbGVtZW50LFxuICAgICAgLy8gaW5pdGlhbEVsZW1lbnRzIGhlbHBzIGZpZ3VyaW5nIG91dCBpbml0RG9uZVxuICAgICAgaW5pdGlhbEVsZW1lbnRzOiBpbml0aWFsRWxlbWVudHNUb0JpbmQgfHwgdGhpcy5zdGF0ZS5pbml0aWFsRWxlbWVudHMsXG4gICAgICBmbHVzaERyb3BwZWRFbGVtZW50czogdGhpcy5fZmx1c2hEcm9wcGVkRWxlbWVudHMsXG4gICAgICBjaGVja0FuZFJlbW92ZUVsZW1lbnQ6IHRoaXMuX2NoZWNrQW5kUmVtb3ZlRWxlbWVudFxuICAgIH07XG5cbiAgICBpZiAoZHJvcFBvc2l0aW9uID4gMCkge1xuICAgICAgbmV3RWxlbWVudHMgPSBbXG4gICAgICAgIC4uLm5ld0VsZW1lbnRzLnNsaWNlKDAsIGRyb3BQb3NpdGlvbiksXG4gICAgICAgIGVsZW1lbnRUb0Ryb3AsXG4gICAgICAgIC4uLm5ld0VsZW1lbnRzLnNsaWNlKGRyb3BQb3NpdGlvbilcbiAgICAgIF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0VsZW1lbnRzID0gW1xuICAgICAgICBlbGVtZW50VG9Ecm9wLFxuICAgICAgICAuLi5uZXdFbGVtZW50c1xuICAgICAgXTtcbiAgICB9XG5cbiAgICBpZiAoIWlzU2FtZUluZGV4KSB7XG4gICAgICBuZXdFbGVtZW50cyA9IG5ld0VsZW1lbnRzLmZpbHRlcihlID0+ICFlLnJlbW92ZSk7XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgbmV3IGxpc3QgYWdhaW5zdCBtYXgtY2FwYWNpdHlcbiAgICBpZiAoY2FwYWNpdHkgJiYgbmV3RWxlbWVudHMubGVuZ3RoID4gY2FwYWNpdHkpIHtcbiAgICAgIHJldHVybiBjb3JlLmVycm9yKGBNYXhpbXVtIGNhcGFjaXR5IG9mIGNhbnZhcygke2Ryb3B6b25lSUR9KSBpcyAke2NhcGFjaXR5fWApO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSB0aGUgY3VycmVudCBsaXN0XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBkcm9wcGVkRWxlbWVudHM6IG5ld0VsZW1lbnRzXG4gICAgfSwgKCkgPT4ge1xuICAgICAgLy8gcmVtb3ZlIGVsZW1lbnQgZnJvbSBwcmV2aW91cyBjYW52YXNcbiAgICAgIGlmICghZWxlbWVudEFscmVhZHlSZW1vdmVkICYmIGRyYWdnZWRFbGVtZW50ICYmIHR5cGVvZiBkcmFnZ2VkRWxlbWVudC5jaGVja0FuZFJlbW92ZUVsZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZHJhZ2dlZEVsZW1lbnQuY2hlY2tBbmRSZW1vdmVFbGVtZW50KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHVwZGF0ZSB0aGUgYXBwbGljYXRpb24gc3RhdGVcbiAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBhZGRpbmcgZHJvcHBpbmcgY2xhc3MgdG8gZHJvcHpvbmUsIGl0IGNhbiBiZSB1c2VkIGZvciBhbmltYXRpb24gcHVycG9zZVxuICAgIHRoaXMuY2FudmFzUmVmLmN1cnJlbnQuY2xhc3NMaXN0LmFkZCgnZHJvcHBpbmcnKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY2FudmFzUmVmLmN1cnJlbnQgJiYgdGhpcy5jYW52YXNSZWYuY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wcGluZycpO1xuICAgIH0sIDUwMCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZHJvcHpvbmVJRCxcbiAgICAgIGVsZW1lbnRzOiBuZXdFbGVtZW50c1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gcmVuZGVyIHRoZSBkcmFnZ2VkIGVsZW1lbnRcbiAgICogQHBhcmFtIHByb3BzIHtPYmplY3R9IC0gQW4gb2JqZWN0IHdoaWNoIGhvbGQgdGhlIGluZm8gb2YgZHJhZ2dlZCBlbGVtZW50L2NvbXBvbmVudFxuICAgKiBAcmV0dXJucyBKU1hcbiAgICovXG4gIF9yZW5kZXJEcmFnSXRlbSA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjb3JlLmdldFJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHMoKS5maW5kKGUgPT4gZS50eXBlID09PSBwcm9wcy50eXBlKTtcbiAgICByZXR1cm4gZWxlbWVudCA/IDxlbGVtZW50LmNvbXBvbmVudCB7Li4ucHJvcHN9IC8+IDogbnVsbDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRyb3BwZWRFbGVtZW50cyB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGNhcGFjaXR5LCBpZCwgcGxhY2Vob2xkZXIgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qgc3BhY2VBdmFpbGFibGUgPSBjYXBhY2l0eSA/IGNhcGFjaXR5ID4gZHJvcHBlZEVsZW1lbnRzLmxlbmd0aCA6IHRydWU7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICByZWY9e3RoaXMuY2FudmFzUmVmfVxuICAgICAgICBjbGFzc05hbWU9e2AkeyFzcGFjZUF2YWlsYWJsZSA/ICduby1zcGFjZScgOiAnJ30gJHtpZCA9PT0gJ3Jvb3QnID8gJ2NhbnZhcycgOiAnJ30gJHshZHJvcHBlZEVsZW1lbnRzLmxlbmd0aCA/ICdlbXB0eScgOiAnJ30gZHJvcHpvbmVgfVxuICAgICAgICBvbkRyYWdPdmVyPXt0aGlzLl9vbkRyYWdPdmVyfVxuICAgICAgICBvbkRyYWdMZWF2ZT17dGhpcy5fb25EcmFnTGVhdmV9XG4gICAgICAgIG9uRHJhZ0VudGVyPXt0aGlzLl9vbkRyYWdFbnRlcn1cbiAgICAgICAgb25Ecm9wPXt0aGlzLl9vbkRyb3B9XG4gICAgICAgIG9uRHJhZ0VuZD17dGhpcy5fb25EcmFnRW5kfVxuICAgICAgPlxuICAgICAgICB7XG4gICAgICAgICAgZHJvcHBlZEVsZW1lbnRzLm1hcCgoZSwgaSkgPT4gKFxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyRHJhZ0l0ZW0oe1xuICAgICAgICAgICAgICAuLi5lLFxuICAgICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgICAgc3BhY2VBdmFpbGFibGUsXG4gICAgICAgICAgICAgIGluaXREb25lOiB0aGlzLnN0YXRlLmluaXREb25lLFxuICAgICAgICAgICAgICBkcm9wem9uZVByb3BzOiB7XG4gICAgICAgICAgICAgICAgaW5pdERvbmU6IHRoaXMuc3RhdGUuaW5pdERvbmUsXG4gICAgICAgICAgICAgICAgcGFyZW50SUQ6IGUuaWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApKVxuICAgICAgICB9XG5cbiAgICAgICAge1xuICAgICAgICAgICFkcm9wcGVkRWxlbWVudHMubGVuZ3RoID9cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImRyb3B6b25lLXBsYWNlaG9sZGVyXCI+e3BsYWNlaG9sZGVyfTwvcD4gOiBudWxsXG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuRHJvcHpvbmUucHJvcFR5cGVzID0ge1xuICBpZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBjYXBhY2l0eTogUHJvcFR5cGVzLm51bWJlcixcbiAgb25Ecm9wOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25FbGVtZW50TW92ZTogUHJvcFR5cGVzLmZ1bmMsXG4gIGFsbG93SG9yaXpvbnRhbDogUHJvcFR5cGVzLmJvb2wsXG4gIGluaXRpYWxFbGVtZW50czogUHJvcFR5cGVzLmFycmF5T2YoT2JqZWN0KSxcbiAgcGFyZW50SUQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgUHJvcFR5cGVzLm5vZGVcbiAgXSlcbn07XG5cbkRyb3B6b25lLmRlZmF1bHRQcm9wcyA9IHtcbiAgaW5pdGlhbEVsZW1lbnRzOiBbXSxcbiAgcGxhY2Vob2xkZXI6ICdEcm9wIEhlcmUnLFxuICBvbkVsZW1lbnRNb3ZlOiAoKSA9PiAodHJ1ZSlcbn07XG5cbmV4cG9ydCBkZWZhdWx0IERyb3B6b25lO1xuIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvICsgXCIgXCIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0b3B0aW9ucy5hdHRycy5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblxuXHRhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspO1xuXG5cdHJldHVybiBsaW5rO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRycyAoZWwsIGF0dHJzKSB7XG5cdE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qIFZlcnkgYmFzaWMgc3R5bGUgKi9cXG5cXG4vKiBQcmV2ZW50IHRoZSB0ZXh0IGNvbnRlbnRzIG9mIGRyYWdnYWJsZSBlbGVtZW50cyBmcm9tIGJlaW5nIHNlbGVjdGFibGUuICovXFxuW2RyYWdnYWJsZV0ge1xcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG4gIC1raHRtbC11c2VyLXNlbGVjdDogbm9uZTtcXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XFxuICB1c2VyLXNlbGVjdDogbm9uZTtcXG5cXG4gIC8qIFJlcXVpcmVkIHRvIG1ha2UgZWxlbWVudHMgZHJhZ2dhYmxlIGluIG9sZCBXZWJLaXQgKi9cXG4gIC1raHRtbC11c2VyLWRyYWc6IGVsZW1lbnQ7XFxuICAtd2Via2l0LXVzZXItZHJhZzogZWxlbWVudDtcXG59XFxuXFxuLyogY2xhc3MgZ2V0cyBhcHBlbmRlZCB0byBjYW52YXMgd2hlbiB1c2VyIGRyYWdnaW5nIG92ZXIgb24gaXQgKi9cXG4uaW5zaWRlIHtcXG4gIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAwIDI2cHggMC41cHggcmdiYSgyMCwgMTgwLCA4MSwgMC43NSk7XFxuICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDAgMCAyNnB4IDAuNXB4IHJnYmEoMjAsIDE4MCwgODEsIDAuNzUpO1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDI2cHggMC41cHggcmdiYSgyMCwgMTgwLCA4MSwgMC43NSk7XFxufVxcblxcbi50cmFzaC1ib3guaW5zaWRlLFxcbi5kcm9wem9uZS5pbnNpZGUubm8tc3BhY2Uge1xcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDAgMjZweCAwLjVweCByZ2JhKDIzMCwgMjMsIDIzLCAwLjUpO1xcbiAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDAgMjZweCAwLjVweCByZ2JhKDIzMCwgMjMsIDIzLCAwLjc1KTtcXG4gIGJveC1zaGFkb3c6IGluc2V0IDAgMCAyNnB4IDAuNXB4IHJnYmEoMjMwLCAyMywgMjMsIDAuNzUpO1xcbn1cXG5cXG4uZHJvcHpvbmUge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIGJhY2tncm91bmQ6ICNmMGZhZmY7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjMDI3N2JkO1xcbn1cXG5cXG4uZHJvcHpvbmUuZW1wdHkge1xcbiAgcGFkZGluZzogNDBweDtcXG59XFxuXFxuLnBhbGV0dGUge1xcbiAgcGFkZGluZzogMTBweDtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgYm9yZGVyOiAxcHggc29saWQgIzAxNTc5YjtcXG59XFxuXFxuLmRyYWctaXRlbSB7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgY29sb3I6ICMwMTU3OWI7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2IzZTVmYztcXG4gIGJvcmRlcjogMXB4IHNvbGlkICMwMTU3OWI7XFxufVxcblxcbi5pbmxpbmUuZHJhZy1pdGVtIHtcXG4gIG1hcmdpbjogMCAxMHB4O1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbn1cXG5cXG4uZHJvcHpvbmUtcGxhY2Vob2xkZXIge1xcbiAgd2lkdGg6IDEwMCU7XFxuICBjb2xvcjogIzAxNTc5YjtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IGNhbGMoNTAlIC0gMTBweCk7XFxuICBhbmltYXRpb24tbmFtZTogY2hhbmdlQ29sb3I7XFxuICBhbmltYXRpb24tZHVyYXRpb246IDJzO1xcbiAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1pbi1vdXQ7XFxuICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiBpbmZpbml0ZTtcXG59XFxuXFxuQGtleWZyYW1lcyBjaGFuZ2VDb2xvciB7XFxuICAyNSUge1xcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xcbiAgICBvcGFjaXR5OiAxO1xcbiAgfVxcblxcbiAgNzUlIHtcXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcXG4gICAgb3BhY2l0eTogMC41O1xcbiAgfVxcbn1cXG5cXG4ucGFsZXR0ZS13cmFwcGVyIC5kcmFnLWl0ZW0ge1xcbiAgY29sb3I6ICNmZmY7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDE1NzliO1xcbn1cXG5cXG4uZHJhZy1pdGVtICsgZGl2IHtcXG4gIG1hcmdpbi10b3A6IDEwcHg7XFxufVxcblxcbi5kcmFnLWl0ZW0uYWZ0ZXIsXFxuLmRyYWctaXRlbS5iZWZvcmUge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG4uZHJhZy1pdGVtLmFmdGVyOjphZnRlciB7XFxuICBjb250ZW50OiAnJztcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHdpZHRoOiA1MCU7XFxuICBoZWlnaHQ6IDFweDtcXG4gIGJhY2tncm91bmQ6ICMxNGI0NTE7XFxuICBsZWZ0OiA1MCU7XFxuICBib3R0b206IC0xcHg7XFxuICBib3JkZXItcmFkaXVzOiA1MCU7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAwKTtcXG4gIC13ZWJraXQtYm94LXNoYWRvdzogMHB4IDRweCAxMHB4IDBweCByZ2JhKDIwLCAxODAsIDgxLCAxKTtcXG4gIC1tb3otYm94LXNoYWRvdzogMHB4IDRweCAxMHB4IDBweCByZ2JhKDIwLCAxODAsIDgxLCAxKTtcXG4gIGJveC1zaGFkb3c6IDBweCA0cHggMTBweCAwcHggcmdiYSgyMCwgMTgwLCA4MSwgMSk7XFxufVxcblxcbi5kcmFnLWl0ZW0uYmVmb3JlOjpiZWZvcmUge1xcbiAgY29udGVudDogJyc7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogNTAlO1xcbiAgaGVpZ2h0OiAxcHg7XFxuICBiYWNrZ3JvdW5kOiAjMTRiNDUxO1xcbiAgbGVmdDogNTAlO1xcbiAgdG9wOiAtMXB4O1xcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMCk7XFxuICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAtMXB4IDEwcHggMC4zcHggcmdiYSgyMywgMTgwLCA4MSwgMSk7XFxuICAtbW96LWJveC1zaGFkb3c6IDBweCAtMXB4IDEwcHggMC4zcHggcmdiYSgyMywgMTgwLCA4MSwgMSk7XFxuICBib3gtc2hhZG93OiAwcHggLTFweCAxMHB4IDAuM3B4IHJnYmEoMjMsIDE4MCwgODEsIDEpO1xcbn1cXG5cXG4uaW5saW5lLmRyYWctaXRlbS5iZWZvcmU6OmJlZm9yZSB7XFxuICB3aWR0aDogMXB4O1xcbiAgaGVpZ2h0OiA1MCU7XFxuICBsZWZ0OiAtMXB4O1xcbiAgcmlnaHQ6IHVuc2V0O1xcbiAgdG9wOiA1MCU7XFxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLCAtNTAlKTtcXG59XFxuXFxuLmlubGluZS5kcmFnLWl0ZW0uYWZ0ZXI6OmFmdGVyIHtcXG4gIHdpZHRoOiAxcHg7XFxuICBoZWlnaHQ6IDUwJTtcXG4gIHJpZ2h0OiAtMXB4O1xcbiAgbGVmdDogdW5zZXQ7XFxuICB0b3A6IHVuc2V0O1xcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgLTUwJSk7XFxufVxcblxcbi50cmFzaC1ib3gge1xcbiAgcGFkZGluZzogMzBweCAxMHB4O1xcbiAgbWFyZ2luOiAxMHB4IDA7XFxuICBjb2xvcjogI2I3MWMxYztcXG4gIGJhY2tncm91bmQ6ICNmZmNkZDI7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjYjcxYzFjO1xcbn1cXG5cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZS5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGUuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZS5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuaW1wb3J0IGNvcmUgZnJvbSAnLi4vLi4vY29yZS9jb3JlJztcbmltcG9ydCBzdGF0ZSBmcm9tICcuLi8uLi9jb3JlL3N0YXRlJztcblxuY2xhc3MgUHJldmlldyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGN1cnJlbnRTdGF0ZTogc3RhdGUuZ2V0U3RhdGUoKVxuICAgIH07XG5cbiAgICB0aGlzLnJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHMgPSBjb3JlLmdldFJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHMoKTtcbiAgICBzdGF0ZS5hZGRFdmVudExpc3RlbmVyKHRoaXMuX29uU3RhdGVDaGFuZ2UpO1xuICB9XG5cbiAgLy8ga2VlcCB0cmFjayBvZiBzdGF0ZSB0cmVlIGNoYW5nZXNcbiAgX29uU3RhdGVDaGFuZ2UgPSAobmV3U3RhdGUpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnRTdGF0ZTogbmV3U3RhdGVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZWN1cmVzaXZlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgdGhyb3VnaCBhbGwgbm9kZSBvZiBzdGF0ZSB0cmVlIGFuZFxuICAgKiByZW5kZXIgYXBwcm9wcmF0ZSBjb21wb25lbnQgYW5kIHBhc3MgbmVjZXNzYXJ5IHByb3BzXG4gICAqIEBwYXJhbSBlbGVtZW50IHtPYmplY3R9IC0gaW5mb21hdGlvbiBvZiBzdGF0ZSB0cmVlIG5vZGVcbiAgICogQHJldHVybnMge0pTWH0gLSBQcmV2aWV3L0pTWCByZXByZXNlbnRhdGlvbiBvZiBjdXJyZW50IHN0YXRlIHRyZWVcbiAgICovXG4gIF9yZW5kZXJFbGVtZW50SW5QcmV2aWV3TW9kZSA9IChlbGVtZW50KSA9PiB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB7fTtcbiAgICBjb25zdCBlbGVtZW50RGF0YSA9IHRoaXMucmVnaXN0ZXJlZFBhbGV0dGVFbGVtZW50c1xuICAgICAgLmZpbmQoZSA9PiBlLnR5cGUgPT09IGVsZW1lbnQudHlwZSk7XG5cbiAgICAvLyBlbGVtZW50IGhhcyBzdWIgZmllbGRzLCByZW5kZXIgdGhvc2UgZmllbGRzIGZpcnN0XG4gICAgLy8gYW5kIHRoZW4gY29tZSBiYWNrIHRvIGN1cnJlbnQgZmllbGRcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlbGVtZW50LmZpZWxkcykpIHtcbiAgICAgIGVsZW1lbnQuZmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICAgIGNoaWxkcmVuW2ZpZWxkLmRyb3B6b25lSURdID0gY2hpbGRyZW5bZmllbGQuZHJvcHpvbmVJRF0gfHwgW107XG4gICAgICAgIGNoaWxkcmVuW2ZpZWxkLmRyb3B6b25lSURdID0gY2hpbGRyZW5bZmllbGQuZHJvcHpvbmVJRF1cbiAgICAgICAgICAuY29uY2F0KHRoaXMuX3JlbmRlckVsZW1lbnRJblByZXZpZXdNb2RlKGZpZWxkKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyByZW5kZXIgY29ycmVzcG9uZGluZyBjb21wb25lbnQgYW5kIHBhc3MgbmVjZXNzYXJ5IHByb3BzXG4gICAgLy8gc2hvd1ByZXZpZXcgaXMgbWFuZGF0b3J5XG4gICAgcmV0dXJuIChcbiAgICAgIDxlbGVtZW50RGF0YS5jb21wb25lbnRcbiAgICAgICAgaWQ9e2VsZW1lbnQuaWR9XG4gICAgICAgIGtleT17ZWxlbWVudC5pZH1cbiAgICAgICAgY2hpbGROb2RlPXtjaGlsZHJlbn1cbiAgICAgICAgey4uLnsgLi4uZWxlbWVudCwgc2hvd1ByZXZpZXc6IHRydWUsIHNob3dCYXNpY0NvbnRlbnQ6IGZhbHNlIH19XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuc3RhdGUuY3VycmVudFN0YXRlWzBdO1xuXG4gICAgLy8gaWYgeW91IHdhbnQgbW9yZSBmbGV4aWJsaXR5XG4gICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLmNoaWxkcmVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbih7XG4gICAgICAgIGNoaWxkcmVuOiByb290LmZpZWxkcy5tYXAodGhpcy5fcmVuZGVyRWxlbWVudEluUHJldmlld01vZGUpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBzdGFuZGFyZCByZW5kZXIgLSBvbmx5IDxQcmV2aWV3IC8+IGFuZCBkb25lXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJldmlldy1jb250YWluZXJcIj5cbiAgICAgICAge1xuICAgICAgICAgIHJvb3QuZmllbGRzLm1hcCh0aGlzLl9yZW5kZXJFbGVtZW50SW5QcmV2aWV3TW9kZSlcbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5QcmV2aWV3LnByb3BUeXBlcyA9IHtcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5mdW5jXG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcmV2aWV3O1xuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5cbmltcG9ydCBjb3JlIGZyb20gJy4uLy4uL2NvcmUvY29yZSc7XG5cbmNsYXNzIFRyYXNoIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAvLyBjcmVhdGUgcmVmcmVuY2UgZm9yIHRyYXNoXG4gICAgLy8gdG8gY2hlY2sgd2hldGhlciBpcyBkcmFnZ2luZyBvbiB0cmFzaCBib3ggb3Igbm90XG4gICAgdGhpcy50cmFzaFJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIHRvZ2dsZS9tYW5hZ2UgY2xhc3MoaW5zaWRlKVxuICAgKiBjbGFzcyBnZXRzIGFwcGVuZGVkIHRvIGNhbnZhc1xuICAgKiBAcGFyYW0gdGFyZ2V0IHtET019IC0gY3VycmVudCBjYW52YXMgdXBvbiB3aGljaCB1c2UgaXMgaG92ZXJpbmdcbiAgICogQHBhcmFtIGFjdGlvbiB7U3RyaW5nfSAtIGFkZC9yZW1vdmUgLSBuYW1lIG9mIGFjdGlvblxuICAgKi9cbiAgX21hbmFnZUluc2lkZUNsYXNzID0gKHsgdGFyZ2V0IH0sIGFjdGlvbikgPT4ge1xuICAgIGlmICh0aGlzLnRyYXNoUmVmLmN1cnJlbnQgPT09IHRhcmdldCkge1xuICAgICAgdGFyZ2V0LmNsYXNzTGlzdFthY3Rpb25dKCdpbnNpZGUnKTtcbiAgICB9XG4gIH1cblxuICBfb25Ecm9wID0gKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIC8vIGdldCBkcmFnZ2VkIGVsZW1lbnRcbiAgICBjb25zdCBlbGVtZW50VG9CZVRyYXNoZWQgPSBjb3JlLmdldERyYWdnZWRFbGVtZW50KCk7XG5cbiAgICAvLyBkb250IGFsbG93IGVsZW1lbnRzIHdoaWNoIGRpcmVjdGx5IGNvbWluZyBmcm9tIHBhbGV0dGVcbiAgICBpZiAoIWVsZW1lbnRUb0JlVHJhc2hlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHsgb25CZWZvcmVUcmFzaCwgb25BZnRlclRyYXNoIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgcmVtb3ZlRWxlbWVudCB9ID0gZWxlbWVudFRvQmVUcmFzaGVkO1xuICAgIGNvbnN0IHN0YXR1cyA9IG9uQmVmb3JlVHJhc2goZWxlbWVudFRvQmVUcmFzaGVkKTtcblxuICAgIHRoaXMuX21hbmFnZUluc2lkZUNsYXNzKGUsICdyZW1vdmUnKTtcblxuICAgIC8vIHVzZXIgdHJpZWQgYW5kIGNvbmZpcm0gdG8gcmVtb3ZlIGVsZW1lbnRcbiAgICBpZiAoc3RhdHVzICYmIGNvcmUuZ2V0QXR0ZW1wdFRvUmVtb3ZlKCkpIHtcbiAgICAgIC8vIHJlbW92ZSBlbGVtZW50IGZyb20gY3VycmVudCBjYW52YXNcbiAgICAgIHJlbW92ZUVsZW1lbnQoZWxlbWVudFRvQmVUcmFzaGVkLmVsZW1lbnRJRCwgKCkgPT4ge1xuICAgICAgICAvLyBhY2tub3dsZWRnZVxuICAgICAgICBvbkFmdGVyVHJhc2goKTtcbiAgICAgIH0sIHRydWUpOyAvLyB0cnVlIC0gZGlzcGF0Y2ggYHJlbW92ZUVsZW1lbnRgIGV2ZW50XG5cbiAgICAgIC8vIGRvbmUgZHJhZ2dpbmcsIGZsdXNoIHRoZSBkcmFnZ2VkIGVsZW1lbnRcbiAgICAgIGNvcmUuc2V0RHJhZ2dlZEVsZW1lbnQobnVsbCk7XG4gICAgfVxuXG4gICAgLy8gcmVzZXQgYXR0ZW1wdCB0byByZW1vdmVcbiAgICBjb3JlLnNldEF0dGVtcHRUb1JlbW92ZShmYWxzZSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIHVzZXIgaXMgZHJhZ2dpbmcgb3ZlciB0aGUgdHJhc2hcbiAgLy8gYHByZXZlbnREZWZhdWx0YCAtIFJlcXVpcmVkLiBBbGxvd3MgdXMgdG8gZHJvcC5cbiAgLy8gQHBhcmFtIGUge2V2ZW50fVxuICBfb25EcmFnT3ZlciA9IChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIHVzZXIgaXMgbGVhdmluZyB0aGUgdHJhc2hcbiAgICogQHBhcmFtIGUge2V2ZW50fVxuICAgKi9cbiAgX29uRHJhZ0xlYXZlID0gKGUpID0+IHtcbiAgICB0aGlzLl9tYW5hZ2VJbnNpZGVDbGFzcyhlLCAncmVtb3ZlJyk7XG4gIH1cblxuICAvKipcbiAgICogdXNlciBpcyBkcmFnZ2luZyBvdmVyIHRyYXNoXG4gICAqIEBwYXJhbSBlIHtldmVudH1cbiAgICovXG4gIF9vbkRyYWdFbnRlciA9IChlKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudFRvQmVUcmFzaGVkID0gY29yZS5nZXREcmFnZ2VkRWxlbWVudCgpO1xuXG4gICAgaWYgKGVsZW1lbnRUb0JlVHJhc2hlZCkge1xuICAgICAgdGhpcy5fbWFuYWdlSW5zaWRlQ2xhc3MoZSwgJ2FkZCcpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdlxuICAgICAgICByZWY9e3RoaXMudHJhc2hSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT1cInRyYXNoLWJveFwiXG4gICAgICAgIG9uRHJhZ0xlYXZlPXt0aGlzLl9vbkRyYWdMZWF2ZX1cbiAgICAgICAgb25EcmFnRW50ZXI9e3RoaXMuX29uRHJhZ0VudGVyfVxuICAgICAgICBvbkRyYWdPdmVyPXt0aGlzLl9vbkRyYWdPdmVyfVxuICAgICAgICBvbkRyb3A9e3RoaXMuX29uRHJvcH1cbiAgICAgID5cbiAgICAgICAgeyB0aGlzLnByb3BzLmNoaWxkcmVuIHx8IDxzcGFuPlRyYXNoIEJveDwvc3Bhbj4gfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5UcmFzaC5wcm9wVHlwZXMgPSB7XG4gIG9uQmVmb3JlVHJhc2g6IFByb3BUeXBlcy5mdW5jLFxuICBvbkFmdGVyVHJhc2g6IFByb3BUeXBlcy5mdW5jLFxuICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmVsZW1lbnQpLFxuICAgIFByb3BUeXBlcy5lbGVtZW50XG4gIF0pLFxufTtcblxuVHJhc2guZGVmYXVsdFByb3BzID0ge1xuICBvbkJlZm9yZVRyYXNoOiAoKSA9PiAodHJ1ZSksXG4gIG9uQWZ0ZXJUcmFzaDogKCkgPT4gKHRydWUpXG59O1xuXG5leHBvcnQgZGVmYXVsdCBUcmFzaDtcbiIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuXG5pbXBvcnQgY29yZSBmcm9tICcuLi8uLi9jb3JlL2NvcmUnO1xuXG5jbGFzcyBQYWxldHRlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgZHJhZ2dlZCBlbGVtZW50XG4gICAqIEBwYXJhbSBwcm9wcyB7T2JqZWN0fSAtIEFuIG9iamVjdCB3aGljaCBob2xkIHRoZSBpbmZvIG9mIGRyYWdnZWQgZWxlbWVudC9jb21wb25lbnRcbiAgICogQHJldHVybnMgSlNYXG4gICAqL1xuICBfcmVuZGVyTGlzdCA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBjb3JlLmdldFJlZ2lzdGVyZWRQYWxldHRlRWxlbWVudHMoKS5maW5kKGUgPT4gZS50eXBlID09PSBwcm9wcy50eXBlKTtcbiAgICByZXR1cm4gZWxlbWVudCA/IDxlbGVtZW50LmNvbXBvbmVudCB7Li4ucHJvcHN9IC8+IDogbnVsbDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHBhbGV0dGVFbGVtZW50cyB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbGV0dGVcIj5cbiAgICAgICAge1xuICAgICAgICAgIHBhbGV0dGVFbGVtZW50cy5tYXAoaXRlbSA9PiAoXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJMaXN0KHsgLi4uaXRlbSwga2V5OiBpdGVtLmlkLCBzaG93QmFzaWNDb250ZW50OiB0cnVlIH0pXG4gICAgICAgICAgKSlcbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5QYWxldHRlLnByb3BUeXBlcyA9IHtcbiAgcGFsZXR0ZUVsZW1lbnRzOiBQcm9wVHlwZXMuYXJyYXlPZigocHJvcFZhbHVlKSA9PiB7XG4gICAgbGV0IGlzRXJyb3IgPSBmYWxzZTtcblxuICAgIC8vIGFsbCBwYWxldHRlIGVsZW1lbnRzIHNob3VsZCBoYXZlIHVuaXF1ZSBJRFxuICAgIHByb3BWYWx1ZS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBpZiAoaXRlbSAmJiAhaXRlbS5pZCkge1xuICAgICAgICBpc0Vycm9yID0gJ2BpZGAgaXMgcmVxdWlyZWQgaW4gYWxsIHBhbGV0dGUgZWxlbWVudCc7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wVmFsdWUuZmlsdGVyKGkgPT4gaS5pZCA9PT0gaXRlbS5pZCkubGVuZ3RoID4gMSkge1xuICAgICAgICBpc0Vycm9yID0gJ2BpZGAgb2YgcGFsZXR0ZSBlbGVtZW50IHNob3VsZCBiZSB1bmlxdWUnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGlzRXJyb3IgPyBuZXcgRXJyb3IoaXNFcnJvcikgOiB0cnVlO1xuICB9KVxufTtcblxuUGFsZXR0ZS5kZWZhdWx0UHJvcHMgPSB7XG4gIHBhbGV0dGVFbGVtZW50czogW11cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBhbGV0dGU7XG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuaW1wb3J0IGNvcmUgZnJvbSAnLi4vLi4vY29yZS9jb3JlJztcblxuY2xhc3MgRHJhZ2dhYmxlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLmRyYWdFbGVtUmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIC8vIHVwZGF0ZSB0aGUgc3RhdGUgb25jZSBwYXJlbnQgc3RhdGUgaW5pdGlhbGlzYXRpb24gaXMgZG9uZVxuICAgIGlmICh0aGlzLnByb3BzLmluaXREb25lICE9PSBuZXh0UHJvcHMuaW5pdERvbmUgJiYgbmV4dFByb3BzLmluaXREb25lKSB7XG4gICAgICB0aGlzLnByb3BzLnVwZGF0ZVN0YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgX2RyYWdFbmQgPSAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB0aGlzLmRyYWdFbGVtUmVmLmN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYmVmb3JlJywgJ2FmdGVyJyk7XG5cbiAgICAvLyBkb25lIGRyYWdnaW5nLCByZXNldCBkcmFnZ2VkIGVsZW1lbnRcbiAgICBjb3JlLnNldERyYWdnZWRFbGVtZW50KG51bGwpO1xuICB9XG5cbiAgX2RyYWdTdGFydCA9IChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGNvbnN0IHtcbiAgICAgIGlkLFxuICAgICAgdHlwZSxcbiAgICAgIG5hbWUsXG4gICAgICBmaWVsZHMsXG4gICAgICBwYXlsb2FkLFxuICAgICAgZHJvcHpvbmVJRCxcbiAgICAgIHJlbW92ZUVsZW1lbnQsXG4gICAgICBjaGVja0FuZFJlbW92ZUVsZW1lbnRcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBpZCxcbiAgICAgIHR5cGUsXG4gICAgICBuYW1lLFxuICAgICAgcGF5bG9hZFxuICAgIH07XG5cbiAgICBpZiAoZmllbGRzKSB7XG4gICAgICBkYXRhLmZpZWxkcyA9IGZpZWxkcztcbiAgICB9XG5cbiAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ2NvcHknO1xuICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ2RhdGEnLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7IC8vIHJlcXVpcmVkLCB3ZSBjYW5uJ3QgcGFzcyBKUyBvYmplY3RcblxuICAgIC8vIGlmIGVsZW1lbnQgaXMgYWxyZWFkeSBwcmVzZW50IGluIHNvbWUgY2FudmFzXG4gICAgLy8gdGhlbiBzZXQgZHJhZ2dlZEVsZW1lbnQsIHNvIHRoYXQgdGhpcyB3aWxsIGhlbHAgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gcHJldmlvdXMgY2FudmFzXG4gICAgaWYgKGRyb3B6b25lSUQpIHtcbiAgICAgIGNvcmUuc2V0RHJhZ2dlZEVsZW1lbnQoe1xuICAgICAgICBlbGVtZW50SUQ6IGlkLFxuICAgICAgICBkcm9wem9uZUlELFxuICAgICAgICByZW1vdmVFbGVtZW50LFxuICAgICAgICBjaGVja0FuZFJlbW92ZUVsZW1lbnRcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byBzZXQgZHJvcCBwb3NpdGlvbi5cbiAgICogZmlyc3QgZmluZSBtaWQgb2YgZWxlbWVudCB1cG9uIHdoaWNoIHVzZXIgaXMgZHJhZ2dpbmcgb3ZlciBhbmRcbiAgICogYmFzZWQgb24gdGhhdCBkZWNpZGUgd2hldGhlciB1c2VyIHRyeWluZyB0byBkcm9wIGFuIGVsZW1lbnQgYWJvdmUgb3IgYmVsb3dcbiAgICovXG4gIF9vbkRyYWdPdmVyID0gKGUpID0+IHtcbiAgICBjb25zdCBlbGVtQ29yZCA9IHRoaXMuZHJhZ0VsZW1SZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGlmICghdGhpcy5wcm9wcy5zcGFjZUF2YWlsYWJsZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmFsbG93SG9yaXpvbnRhbCkge1xuICAgICAgY29uc3QgZHJhZ0VsZW1YID0gZS5jbGllbnRYO1xuICAgICAgaWYgKGRyYWdFbGVtWCA+PSBlbGVtQ29yZC54ICYmIGRyYWdFbGVtWCA8PSBlbGVtQ29yZC54ICsgZWxlbUNvcmQud2lkdGgpIHtcbiAgICAgICAgY29uc3QgbWlkWCA9IGVsZW1Db3JkLnggKyBlbGVtQ29yZC53aWR0aCAvIDI7XG4gICAgICAgIGlmIChkcmFnRWxlbVggPCBtaWRYKSB7XG4gICAgICAgICAgdGhpcy5kcmFnRWxlbVJlZi5jdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FmdGVyJyk7XG4gICAgICAgICAgdGhpcy5kcmFnRWxlbVJlZi5jdXJyZW50LmNsYXNzTGlzdC5hZGQoJ2JlZm9yZScpO1xuICAgICAgICAgIGNvcmUuc2V0RHJvcFBvc3Rpb24odGhpcy5wcm9wcy5pbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kcmFnRWxlbVJlZi5jdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JlZm9yZScpO1xuICAgICAgICAgIHRoaXMuZHJhZ0VsZW1SZWYuY3VycmVudC5jbGFzc0xpc3QuYWRkKCdhZnRlcicpO1xuICAgICAgICAgIGNvcmUuc2V0RHJvcFBvc3Rpb24odGhpcy5wcm9wcy5pbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRyYWdFbGVtWSA9IGUuY2xpZW50WTtcbiAgICAgIGlmIChkcmFnRWxlbVkgPj0gZWxlbUNvcmQueSAmJiBkcmFnRWxlbVkgPD0gZWxlbUNvcmQueSArIGVsZW1Db3JkLmhlaWdodCkge1xuICAgICAgICBjb25zdCBtaWRZID0gZWxlbUNvcmQueSArIGVsZW1Db3JkLmhlaWdodCAvIDI7XG4gICAgICAgIGlmIChkcmFnRWxlbVkgPCBtaWRZKSB7XG4gICAgICAgICAgdGhpcy5kcmFnRWxlbVJlZi5jdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FmdGVyJyk7XG4gICAgICAgICAgdGhpcy5kcmFnRWxlbVJlZi5jdXJyZW50LmNsYXNzTGlzdC5hZGQoJ2JlZm9yZScpO1xuICAgICAgICAgIGNvcmUuc2V0RHJvcFBvc3Rpb24odGhpcy5wcm9wcy5pbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kcmFnRWxlbVJlZi5jdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JlZm9yZScpO1xuICAgICAgICAgIHRoaXMuZHJhZ0VsZW1SZWYuY3VycmVudC5jbGFzc0xpc3QuYWRkKCdhZnRlcicpO1xuICAgICAgICAgIGNvcmUuc2V0RHJvcFBvc3Rpb24odGhpcy5wcm9wcy5pbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBfb25EcmFnTGVhdmUgPSAoKSA9PiB7XG4gICAgLy8gcmVtb3ZlIGJlZm9yZS9hZnRlciBjbGFzcyBmcm9tIGRyYWdnZWQgZWxlbWVudFxuICAgIHRoaXMuZHJhZ0VsZW1SZWYuY3VycmVudC5jbGFzc0xpc3QucmVtb3ZlKCdiZWZvcmUnLCAnYWZ0ZXInKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGVsZW1lbnRQcm9wcywgZHJhZ2dhYmxlLCBhbGxvd0hvcml6b250YWwgfSA9IHRoaXMucHJvcHM7XG4gICAgbGV0IGUgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMucHJvcHMuZHJvcHpvbmVJRCkge1xuICAgICAgLy8gYWRkIHRoaXMgcmVxdWlyZWQgZnVuY3Rpb24gb25seSBpZiBlbGVtZW50IGlzIGRyb3BwZWQgaW4gY2FudmFzXG4gICAgICBlID0ge1xuICAgICAgICBvbkRyYWdPdmVyOiB0aGlzLl9vbkRyYWdPdmVyLFxuICAgICAgICBvbkRyYWdMZWF2ZTogdGhpcy5fb25EcmFnTGVhdmVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGRyYWdnYWJsZSkge1xuICAgICAgZSA9IHtcbiAgICAgICAgLi4uZSxcbiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17dGhpcy5kcmFnRWxlbVJlZn1cbiAgICAgICAgY2xhc3NOYW1lPXtgZHJhZy1pdGVtICR7YWxsb3dIb3Jpem9udGFsID8gJ2lubGluZScgOiAnJ31gfVxuICAgICAgICBvbkRyYWdTdGFydD17dGhpcy5fZHJhZ1N0YXJ0fVxuICAgICAgICBvbkRyYWdFbmQ9e3RoaXMuX2RyYWdFbmR9XG4gICAgICAgIHsuLi5lbGVtZW50UHJvcHN9XG4gICAgICAgIHsuLi5lfVxuICAgICAgPlxuICAgICAgICB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbkRyYWdnYWJsZS5wcm9wVHlwZXMgPSB7XG4gIGlkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGluaXREb25lOiBQcm9wVHlwZXMuYm9vbCxcbiAgaW5kZXg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGFsbG93SG9yaXpvbnRhbDogUHJvcFR5cGVzLmJvb2wsXG4gIGZpZWxkczogUHJvcFR5cGVzLmluc3RhbmNlT2YoQXJyYXkpLFxuICBkcmFnZ2FibGU6IFByb3BUeXBlcy5ib29sLFxuICBzcGFjZUF2YWlsYWJsZTogUHJvcFR5cGVzLmJvb2wsXG4gIHVwZGF0ZVN0YXRlOiBQcm9wVHlwZXMuZnVuYyxcbiAgZHJvcHpvbmVJRDogUHJvcFR5cGVzLnN0cmluZyxcbiAgcGF5bG9hZDogUHJvcFR5cGVzLmluc3RhbmNlT2YoT2JqZWN0KSxcbiAgZWxlbWVudFByb3BzOiBQcm9wVHlwZXMuaW5zdGFuY2VPZihPYmplY3QpLFxuICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuZWxlbWVudCksXG4gICAgUHJvcFR5cGVzLmVsZW1lbnRcbiAgXSkuaXNSZXF1aXJlZCxcbiAgcmVtb3ZlRWxlbWVudDogUHJvcFR5cGVzLmZ1bmMsXG4gIGNoZWNrQW5kUmVtb3ZlRWxlbWVudDogUHJvcFR5cGVzLmZ1bmNcbn07XG5cbkRyYWdnYWJsZS5kZWZhdWx0UHJvcHMgPSB7XG4gIGNoZWNrQW5kUmVtb3ZlRWxlbWVudDogKCkgPT4gKHRydWUpLFxuICBlbGVtZW50UHJvcHM6IG51bGwsXG4gIHBheWxvYWQ6IG51bGwsXG4gIGRyYWdnYWJsZTogdHJ1ZSxcbiAgdXBkYXRlU3RhdGU6ICgpID0+ICh0cnVlKVxufTtcblxuZXhwb3J0IGRlZmF1bHQgRHJhZ2dhYmxlO1xuIiwiaW1wb3J0IGNvcmUgZnJvbSAnLi9jb3JlJztcbmltcG9ydCBzdGF0ZSBmcm9tICcuL3N0YXRlJztcblxuLy8gZG9udCB3YW50IGFueSBjb25mbGljdHMgd2l0aCBKUyBFdmVudCBhbmQgQ3VzdG9tRXZlbnQgT2JqZWN0IGhlbmNlIGtlZXBpbmcgbmFtZSBhcyBScG1FdmVudFxuY2xhc3MgUnBtRXZlbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBzdXBwb3J0ZWQgZXZlbnRzXG4gICAgdGhpcy5ldmVudCA9IHtcbiAgICAgIGNoYW5nZTogW10sXG4gICAgICBmbHVzaDogW10sXG4gICAgICByZW1vdmVFbGVtZW50OiBbXSxcbiAgICAgIHVwZGF0ZUVsZW1lbnQ6IFtdXG4gICAgfTtcbiAgfVxuXG4gIC8vIHByaXZhdGUgZnVuY3Rpb24gdG8gdHJpZ2dlciBhbGwgY2hhbmdlIENCXG4gIG5vdGlmeVN0YXRlQ2hhbmdlID0gKCkgPT4ge1xuICAgIC8vIHRyaWdnZXIgYWxsIGV2ZW50c1xuICAgIHRoaXMuZXZlbnQuY2hhbmdlLmZvckVhY2goZSA9PiBlKHN0YXRlLmdldFN0YXRlKCkpKTtcbiAgfTtcblxuICAvLyBwcml2YXRlIGZ1bmN0aW9uIHRvIHRyaWdnZXIgYWxsIGZsdXNoIENCXG4gIC8vIHN0YXRlIGhhcyBiZWVuIHJlc2V0IHRvIGVtcHR5LCB0cmlnZ2VyIGZpbmFsIGNoYW5nZSBhbmQgdGhlbiBmbHVzaCBldmVudFxuICBub3RpZnlTdGF0ZUZsdXNoID0gKHRyaWdnZXJDaGFuZ2UpID0+IHtcbiAgICBpZiAodHJpZ2dlckNoYW5nZSkge1xuICAgICAgdGhpcy5ub3RpZnlTdGF0ZUNoYW5nZSgpO1xuICAgIH1cblxuICAgIC8vIHRyaWdnZXIgYWxsIGV2ZW50c1xuICAgIHRoaXMuZXZlbnQuZmx1c2guZm9yRWFjaChlID0+IGUodHJ1ZSkpO1xuICB9O1xuXG4gIC8vIHByaXZhdGUgZnVuY3Rpb24gdG8gdHJpZ2dlciBhbGwgZWxlbWVudCB1cGRhdGUgQ0JcbiAgbm90aWZ5RWxlbWVudFVwZGF0ZSA9IChlbGVtZW50KSA9PiB7XG4gICAgLy8gdHJpZ2dlciBhbGwgZXZlbnRzXG4gICAgdGhpcy5ldmVudC51cGRhdGVFbGVtZW50LmZvckVhY2goZSA9PiBlKGVsZW1lbnQpKTtcbiAgfTtcblxuICAvLyBwcml2YXRlIGZ1bmN0aW9uIHRvIHRyaWdnZXIgYWxsIGVsZW1lbnQgcmVtb3ZlIENCXG4gIG5vdGlmeUVsZW1lbnRSZW1vdmUgPSAoZWxlbWVudCkgPT4ge1xuICAgIC8vIHRyaWdnZXIgYWxsIGV2ZW50c1xuICAgIHRoaXMuZXZlbnQucmVtb3ZlRWxlbWVudC5mb3JFYWNoKGUgPT4gZShlbGVtZW50KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGFkZCBldmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIC0gY2FsbGJhY2tcbiAgICovXG4gIGFkZEV2ZW50TGlzdGVuZXIgPSAoZXZlbnROYW1lLCBjYikgPT4ge1xuICAgIGxldCByZXR1cm5DQiA9IG51bGw7XG5cbiAgICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb3JlLmVycm9yKCdgY2JgIHBhcmFtIGhhcyB0byBiZSBmdW5jdGlvbicpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5ldmVudCwgZXZlbnROYW1lKSkge1xuICAgICAgdGhpcy5ldmVudFtldmVudE5hbWVdLnB1c2goY2IpO1xuXG4gICAgICByZXR1cm5DQiA9IGNiO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb3JlLmVycm9yKCdObyBzdWNoIGV2ZW50Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHVybkNCO1xuICB9O1xuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byByZW1vdmUgZXZlbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiAtIGNhbGxiYWNrXG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVyID0gKGV2ZW50TmFtZSwgY2IpID0+IHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuZXZlbnQsIGV2ZW50TmFtZSkpIHtcbiAgICAgIHRoaXMuZXZlbnRbZXZlbnROYW1lXSA9IHRoaXMuZXZlbnRbZXZlbnROYW1lXS5maWx0ZXIoZSA9PiBlICE9PSBjYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvcmUuZXJyb3IoJ05vIHN1Y2ggZXZlbnQnKTtcbiAgICB9XG4gIH07XG59XG5cbmNvbnN0IHJwbUV2ZW50ID0gbmV3IFJwbUV2ZW50KCk7XG5cbmV4cG9ydCBkZWZhdWx0IHJwbUV2ZW50O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFByb3BUeXBlc1NlY3JldCA9ICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCc7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZXNTZWNyZXQ7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuICpcbiAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG4gKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcbiAqIGV4cGVjdGluZy5cbiAqXG4gKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuICovXG5cbnZhciB2YWxpZGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybWF0KGZvcm1hdCkge307XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhbGlkYXRlRm9ybWF0ID0gZnVuY3Rpb24gdmFsaWRhdGVGb3JtYXQoZm9ybWF0KSB7XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFyaWFudCByZXF1aXJlcyBhbiBlcnJvciBtZXNzYWdlIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgdmFsaWRhdGVGb3JtYXQoZm9ybWF0KTtcblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKCdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICsgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSkpO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnZhcmlhbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogXG4gKi9cblxuZnVuY3Rpb24gbWFrZUVtcHR5RnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFyZztcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGFjY2VwdHMgYW5kIGRpc2NhcmRzIGlucHV0czsgaXQgaGFzIG5vIHNpZGUgZWZmZWN0cy4gVGhpcyBpc1xuICogcHJpbWFyaWx5IHVzZWZ1bCBpZGlvbWF0aWNhbGx5IGZvciBvdmVycmlkYWJsZSBmdW5jdGlvbiBlbmRwb2ludHMgd2hpY2hcbiAqIGFsd2F5cyBuZWVkIHRvIGJlIGNhbGxhYmxlLCBzaW5jZSBKUyBsYWNrcyBhIG51bGwtY2FsbCBpZGlvbSBhbGEgQ29jb2EuXG4gKi9cbnZhciBlbXB0eUZ1bmN0aW9uID0gZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9O1xuXG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zID0gbWFrZUVtcHR5RnVuY3Rpb247XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2UgPSBtYWtlRW1wdHlGdW5jdGlvbihmYWxzZSk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZSA9IG1ha2VFbXB0eUZ1bmN0aW9uKHRydWUpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc051bGwgPSBtYWtlRW1wdHlGdW5jdGlvbihudWxsKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUaGlzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcztcbn07XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zQXJndW1lbnQgPSBmdW5jdGlvbiAoYXJnKSB7XG4gIHJldHVybiBhcmc7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVtcHR5RnVuY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gcmVxdWlyZSgnLi9saWIvUmVhY3RQcm9wVHlwZXNTZWNyZXQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gc2hpbShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUsIHNlY3JldCkge1xuICAgIGlmIChzZWNyZXQgPT09IFJlYWN0UHJvcFR5cGVzU2VjcmV0KSB7XG4gICAgICAvLyBJdCBpcyBzdGlsbCBzYWZlIHdoZW4gY2FsbGVkIGZyb20gUmVhY3QuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGludmFyaWFudChcbiAgICAgIGZhbHNlLFxuICAgICAgJ0NhbGxpbmcgUHJvcFR5cGVzIHZhbGlkYXRvcnMgZGlyZWN0bHkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UuICcgK1xuICAgICAgJ1VzZSBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoKSB0byBjYWxsIHRoZW0uICcgK1xuICAgICAgJ1JlYWQgbW9yZSBhdCBodHRwOi8vZmIubWUvdXNlLWNoZWNrLXByb3AtdHlwZXMnXG4gICAgKTtcbiAgfTtcbiAgc2hpbS5pc1JlcXVpcmVkID0gc2hpbTtcbiAgZnVuY3Rpb24gZ2V0U2hpbSgpIHtcbiAgICByZXR1cm4gc2hpbTtcbiAgfTtcbiAgLy8gSW1wb3J0YW50IVxuICAvLyBLZWVwIHRoaXMgbGlzdCBpbiBzeW5jIHdpdGggcHJvZHVjdGlvbiB2ZXJzaW9uIGluIGAuL2ZhY3RvcnlXaXRoVHlwZUNoZWNrZXJzLmpzYC5cbiAgdmFyIFJlYWN0UHJvcFR5cGVzID0ge1xuICAgIGFycmF5OiBzaGltLFxuICAgIGJvb2w6IHNoaW0sXG4gICAgZnVuYzogc2hpbSxcbiAgICBudW1iZXI6IHNoaW0sXG4gICAgb2JqZWN0OiBzaGltLFxuICAgIHN0cmluZzogc2hpbSxcbiAgICBzeW1ib2w6IHNoaW0sXG5cbiAgICBhbnk6IHNoaW0sXG4gICAgYXJyYXlPZjogZ2V0U2hpbSxcbiAgICBlbGVtZW50OiBzaGltLFxuICAgIGluc3RhbmNlT2Y6IGdldFNoaW0sXG4gICAgbm9kZTogc2hpbSxcbiAgICBvYmplY3RPZjogZ2V0U2hpbSxcbiAgICBvbmVPZjogZ2V0U2hpbSxcbiAgICBvbmVPZlR5cGU6IGdldFNoaW0sXG4gICAgc2hhcGU6IGdldFNoaW0sXG4gICAgZXhhY3Q6IGdldFNoaW1cbiAgfTtcblxuICBSZWFjdFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcyA9IGVtcHR5RnVuY3Rpb247XG4gIFJlYWN0UHJvcFR5cGVzLlByb3BUeXBlcyA9IFJlYWN0UHJvcFR5cGVzO1xuXG4gIHJldHVybiBSZWFjdFByb3BUeXBlcztcbn07XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgRHJvcHpvbmUgZnJvbSAnLi4vRHJvcHpvbmUvRHJvcHpvbmUnO1xuXG4vLyBmdW5jdGlvbmFsIGNvbXBvbmVudCB3aGljaCBleHRlbmRzIERyb3B6b25lIGJ1dCB3aXRoIHNvbWUgZml4ZWQgcHJvcGVydGllcyAtIGlkIGFuZCBwYXJlbnRJRFxuLy8gYm90aCBwcm9wcyBzZXQgdG8gYHJvb3RgIC0gcmVxdWlyZWQgc2luY2UgYXBwbGljYXRpb24gc3RhdGUgaG9sZHMgYHJvb3RgIGFzIHBhcmVudCBub2RlXG4vLyBkZWZhdWx0IGluaXREb25lIHNldCB0byB0cnVlXG5jb25zdCBDYW52YXMgPSBwcm9wcyA9PiAoXG4gIDxkaXYgY2xhc3NOYW1lPVwibWFpbi1jYW52YXNcIj5cbiAgICA8RHJvcHpvbmUgey4uLnByb3BzfSBwYXJlbnRJRD1cInJvb3RcIiBpZD1cInJvb3RcIiBpbml0RG9uZSAvPlxuICA8L2Rpdj5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IENhbnZhcztcbiIsIi8vIGltcG9ydCBhbGwgY29tcG9uZW50c1xuaW1wb3J0IENhbnZhcyBmcm9tICcuL2NvbXBvbmVudHMvQ2FudmFzL0NhbnZhcyc7XG5pbXBvcnQgRHJvcHpvbmUgZnJvbSAnLi9jb21wb25lbnRzL0Ryb3B6b25lL0Ryb3B6b25lJztcbmltcG9ydCBEcmFnZ2FibGUgZnJvbSAnLi9jb21wb25lbnRzL0RyYWdnYWJsZS9EcmFnZ2FibGUnO1xuaW1wb3J0IFBhbGV0dGUgZnJvbSAnLi9jb21wb25lbnRzL1BhbGV0dGUvUGFsZXR0ZSc7XG5pbXBvcnQgVHJhc2ggZnJvbSAnLi9jb21wb25lbnRzL1RyYXNoL1RyYXNoJztcbmltcG9ydCBQcmV2aWV3IGZyb20gJy4vY29tcG9uZW50cy9QcmV2aWV3L1ByZXZpZXcnO1xuXG4vLyBpbXBvcnQgYWxsIEFQSSdzXG5pbXBvcnQgc3RhdGUgZnJvbSAnLi9jb3JlL3N0YXRlJztcbmltcG9ydCBjb3JlIGZyb20gJy4vY29yZS9jb3JlJztcblxuLy8gaW1wb3J0IGJhc2ljIHN0eWxlXG5pbXBvcnQgJy4vc3R5bGUuY3NzJztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIGFsbCBjb21wb25lbnRzXG4gIENhbnZhcyxcbiAgRHJvcHpvbmUsXG4gIERyYWdnYWJsZSxcbiAgUGFsZXR0ZSxcbiAgVHJhc2gsXG4gIFByZXZpZXcsXG5cbiAgLy8gYWxsIG9wZW4gQVBJJ3NcbiAgc3RhdGUsXG4gIGNvcmUsXG5cbiAgLy8gc2luY2UgdGhpcyBpcyByZXVpcmVkIGZ1bmN0aW9uLCBrZWVwaW5nIHNlcHJhdGVcbiAgcmVnaXN0ZXJQYWxldHRlRWxlbWVudHM6IGNvcmUucmVnaXN0ZXJQYWxldHRlRWxlbWVudHNcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9